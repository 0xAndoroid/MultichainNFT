import{r as Iv,c as or,g as Ov,e as Qr,a as xv,E as Wc,_ as Pv}from"./index-e728eeed.js";import{s as Cv,f as Av,a as Tv,d as Nv,g as Rv,b as Uf,c as Fv,e as Uv,h as jv,i as Yc,j as gl,k as $v,l as Lv,m as jf,n as Jc,p as Mv,J as Pi,o as Xc,q as Zc,r as Qc,t as Ii,u as fi,v as eu,w as $f,H as Xi}from"./http-0c34895f.js";var tu={},Pa={},je={},Lf={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function t(g,w){var x=g>>>16&65535,A=g&65535,q=w>>>16&65535,W=w&65535;return A*W+(x*W+A*q<<16>>>0)|0}n.mul=Math.imul||t;function r(g,w){return g+w|0}n.add=r;function s(g,w){return g-w|0}n.sub=s;function o(g,w){return g<<w|g>>>32-w}n.rotl=o;function f(g,w){return g<<32-w|g>>>w}n.rotr=f;function m(g){return typeof g=="number"&&isFinite(g)&&Math.floor(g)===g}n.isInteger=Number.isInteger||m,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(g){return n.isInteger(g)&&g>=-n.MAX_SAFE_INTEGER&&g<=n.MAX_SAFE_INTEGER}})(Lf);Object.defineProperty(je,"__esModule",{value:!0});var Mf=Lf;function zv(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])<<16>>16}je.readInt16BE=zv;function qv(n,t){return t===void 0&&(t=0),(n[t+0]<<8|n[t+1])>>>0}je.readUint16BE=qv;function Hv(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])<<16>>16}je.readInt16LE=Hv;function Bv(n,t){return t===void 0&&(t=0),(n[t+1]<<8|n[t])>>>0}je.readUint16LE=Bv;function zf(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>8,t[r+1]=n>>>0,t}je.writeUint16BE=zf;je.writeInt16BE=zf;function qf(n,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t}je.writeUint16LE=qf;je.writeInt16LE=qf;function Tc(n,t){return t===void 0&&(t=0),n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]}je.readInt32BE=Tc;function Nc(n,t){return t===void 0&&(t=0),(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3])>>>0}je.readUint32BE=Nc;function Rc(n,t){return t===void 0&&(t=0),n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t]}je.readInt32LE=Rc;function Fc(n,t){return t===void 0&&(t=0),(n[t+3]<<24|n[t+2]<<16|n[t+1]<<8|n[t])>>>0}je.readUint32LE=Fc;function Ea(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>24,t[r+1]=n>>>16,t[r+2]=n>>>8,t[r+3]=n>>>0,t}je.writeUint32BE=Ea;je.writeInt32BE=Ea;function Da(n,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=n>>>0,t[r+1]=n>>>8,t[r+2]=n>>>16,t[r+3]=n>>>24,t}je.writeUint32LE=Da;je.writeInt32LE=Da;function Kv(n,t){t===void 0&&(t=0);var r=Tc(n,t),s=Tc(n,t+4);return r*4294967296+s-(s>>31)*4294967296}je.readInt64BE=Kv;function Vv(n,t){t===void 0&&(t=0);var r=Nc(n,t),s=Nc(n,t+4);return r*4294967296+s}je.readUint64BE=Vv;function kv(n,t){t===void 0&&(t=0);var r=Rc(n,t),s=Rc(n,t+4);return s*4294967296+r-(r>>31)*4294967296}je.readInt64LE=kv;function Gv(n,t){t===void 0&&(t=0);var r=Fc(n,t),s=Fc(n,t+4);return s*4294967296+r}je.readUint64LE=Gv;function Hf(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ea(n/4294967296>>>0,t,r),Ea(n>>>0,t,r+4),t}je.writeUint64BE=Hf;je.writeInt64BE=Hf;function Bf(n,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Da(n>>>0,t,r),Da(n/4294967296>>>0,t,r+4),t}je.writeUint64LE=Bf;je.writeInt64LE=Bf;function Wv(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,f=n/8+r-1;f>=r;f--)s+=t[f]*o,o*=256;return s}je.readUintBE=Wv;function Yv(n,t,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,f=r;f<r+n/8;f++)s+=t[f]*o,o*=256;return s}je.readUintLE=Yv;function Jv(n,t,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Mf.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var o=1,f=n/8+s-1;f>=s;f--)r[f]=t/o&255,o*=256;return r}je.writeUintBE=Jv;function Xv(n,t,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Mf.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var o=1,f=s;f<s+n/8;f++)r[f]=t/o&255,o*=256;return r}je.writeUintLE=Xv;function Zv(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t)}je.readFloat32BE=Zv;function Qv(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(t,!0)}je.readFloat32LE=Qv;function eb(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t)}je.readFloat64BE=eb;function tb(n,t){t===void 0&&(t=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(t,!0)}je.readFloat64LE=tb;function rb(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,n),t}je.writeFloat32BE=rb;function ib(n,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(r,n,!0),t}je.writeFloat32LE=ib;function nb(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,n),t}je.writeFloat64BE=nb;function sb(n,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(r,n,!0),t}je.writeFloat64LE=sb;var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});function ab(n){for(var t=0;t<n.length;t++)n[t]=0;return n}Sr.wipe=ab;Object.defineProperty(Pa,"__esModule",{value:!0});var Zt=je,Uc=Sr,ob=20;function cb(n,t,r){for(var s=1634760805,o=857760878,f=2036477234,m=1797285236,g=r[3]<<24|r[2]<<16|r[1]<<8|r[0],w=r[7]<<24|r[6]<<16|r[5]<<8|r[4],x=r[11]<<24|r[10]<<16|r[9]<<8|r[8],A=r[15]<<24|r[14]<<16|r[13]<<8|r[12],q=r[19]<<24|r[18]<<16|r[17]<<8|r[16],W=r[23]<<24|r[22]<<16|r[21]<<8|r[20],H=r[27]<<24|r[26]<<16|r[25]<<8|r[24],$=r[31]<<24|r[30]<<16|r[29]<<8|r[28],X=t[3]<<24|t[2]<<16|t[1]<<8|t[0],ee=t[7]<<24|t[6]<<16|t[5]<<8|t[4],ue=t[11]<<24|t[10]<<16|t[9]<<8|t[8],j=t[15]<<24|t[14]<<16|t[13]<<8|t[12],M=s,P=o,N=f,S=m,c=g,y=w,Z=x,l=A,d=q,v=W,I=H,b=$,p=X,F=ee,L=ue,J=j,C=0;C<ob;C+=2)M=M+c|0,p^=M,p=p>>>32-16|p<<16,d=d+p|0,c^=d,c=c>>>32-12|c<<12,P=P+y|0,F^=P,F=F>>>32-16|F<<16,v=v+F|0,y^=v,y=y>>>32-12|y<<12,N=N+Z|0,L^=N,L=L>>>32-16|L<<16,I=I+L|0,Z^=I,Z=Z>>>32-12|Z<<12,S=S+l|0,J^=S,J=J>>>32-16|J<<16,b=b+J|0,l^=b,l=l>>>32-12|l<<12,N=N+Z|0,L^=N,L=L>>>32-8|L<<8,I=I+L|0,Z^=I,Z=Z>>>32-7|Z<<7,S=S+l|0,J^=S,J=J>>>32-8|J<<8,b=b+J|0,l^=b,l=l>>>32-7|l<<7,P=P+y|0,F^=P,F=F>>>32-8|F<<8,v=v+F|0,y^=v,y=y>>>32-7|y<<7,M=M+c|0,p^=M,p=p>>>32-8|p<<8,d=d+p|0,c^=d,c=c>>>32-7|c<<7,M=M+y|0,J^=M,J=J>>>32-16|J<<16,I=I+J|0,y^=I,y=y>>>32-12|y<<12,P=P+Z|0,p^=P,p=p>>>32-16|p<<16,b=b+p|0,Z^=b,Z=Z>>>32-12|Z<<12,N=N+l|0,F^=N,F=F>>>32-16|F<<16,d=d+F|0,l^=d,l=l>>>32-12|l<<12,S=S+c|0,L^=S,L=L>>>32-16|L<<16,v=v+L|0,c^=v,c=c>>>32-12|c<<12,N=N+l|0,F^=N,F=F>>>32-8|F<<8,d=d+F|0,l^=d,l=l>>>32-7|l<<7,S=S+c|0,L^=S,L=L>>>32-8|L<<8,v=v+L|0,c^=v,c=c>>>32-7|c<<7,P=P+Z|0,p^=P,p=p>>>32-8|p<<8,b=b+p|0,Z^=b,Z=Z>>>32-7|Z<<7,M=M+y|0,J^=M,J=J>>>32-8|J<<8,I=I+J|0,y^=I,y=y>>>32-7|y<<7;Zt.writeUint32LE(M+s|0,n,0),Zt.writeUint32LE(P+o|0,n,4),Zt.writeUint32LE(N+f|0,n,8),Zt.writeUint32LE(S+m|0,n,12),Zt.writeUint32LE(c+g|0,n,16),Zt.writeUint32LE(y+w|0,n,20),Zt.writeUint32LE(Z+x|0,n,24),Zt.writeUint32LE(l+A|0,n,28),Zt.writeUint32LE(d+q|0,n,32),Zt.writeUint32LE(v+W|0,n,36),Zt.writeUint32LE(I+H|0,n,40),Zt.writeUint32LE(b+$|0,n,44),Zt.writeUint32LE(p+X|0,n,48),Zt.writeUint32LE(F+ee|0,n,52),Zt.writeUint32LE(L+ue|0,n,56),Zt.writeUint32LE(J+j|0,n,60)}function Kf(n,t,r,s,o){if(o===void 0&&(o=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var f,m;if(o===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");f=new Uint8Array(16),m=f.length-t.length,f.set(t,m)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");f=t,m=o}for(var g=new Uint8Array(64),w=0;w<r.length;w+=64){cb(g,f,n);for(var x=w;x<w+64&&x<r.length;x++)s[x]=r[x]^g[x-w];hb(f,0,m)}return Uc.wipe(g),o===0&&Uc.wipe(f),s}Pa.streamXOR=Kf;function ub(n,t,r,s){return s===void 0&&(s=0),Uc.wipe(r),Kf(n,t,r,r,s)}Pa.stream=ub;function hb(n,t,r){for(var s=1;r--;)s=s+(n[t]&255)|0,n[t]=s&255,s>>>=8,t++;if(s>0)throw new Error("ChaCha: counter overflow")}var Vf={},Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});function lb(n,t,r){return~(n-1)&t|n-1&r}Ci.select=lb;function fb(n,t){return(n|0)-(t|0)-1>>>31&1}Ci.lessOrEqual=fb;function kf(n,t){if(n.length!==t.length)return 0;for(var r=0,s=0;s<n.length;s++)r|=n[s]^t[s];return 1&r-1>>>8}Ci.compare=kf;function db(n,t){return n.length===0||t.length===0?!1:kf(n,t)!==0}Ci.equal=db;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=Ci,r=Sr;n.DIGEST_LENGTH=16;var s=function(){function m(g){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var w=g[0]|g[1]<<8;this._r[0]=w&8191;var x=g[2]|g[3]<<8;this._r[1]=(w>>>13|x<<3)&8191;var A=g[4]|g[5]<<8;this._r[2]=(x>>>10|A<<6)&7939;var q=g[6]|g[7]<<8;this._r[3]=(A>>>7|q<<9)&8191;var W=g[8]|g[9]<<8;this._r[4]=(q>>>4|W<<12)&255,this._r[5]=W>>>1&8190;var H=g[10]|g[11]<<8;this._r[6]=(W>>>14|H<<2)&8191;var $=g[12]|g[13]<<8;this._r[7]=(H>>>11|$<<5)&8065;var X=g[14]|g[15]<<8;this._r[8]=($>>>8|X<<8)&8191,this._r[9]=X>>>5&127,this._pad[0]=g[16]|g[17]<<8,this._pad[1]=g[18]|g[19]<<8,this._pad[2]=g[20]|g[21]<<8,this._pad[3]=g[22]|g[23]<<8,this._pad[4]=g[24]|g[25]<<8,this._pad[5]=g[26]|g[27]<<8,this._pad[6]=g[28]|g[29]<<8,this._pad[7]=g[30]|g[31]<<8}return m.prototype._blocks=function(g,w,x){for(var A=this._fin?0:2048,q=this._h[0],W=this._h[1],H=this._h[2],$=this._h[3],X=this._h[4],ee=this._h[5],ue=this._h[6],j=this._h[7],M=this._h[8],P=this._h[9],N=this._r[0],S=this._r[1],c=this._r[2],y=this._r[3],Z=this._r[4],l=this._r[5],d=this._r[6],v=this._r[7],I=this._r[8],b=this._r[9];x>=16;){var p=g[w+0]|g[w+1]<<8;q+=p&8191;var F=g[w+2]|g[w+3]<<8;W+=(p>>>13|F<<3)&8191;var L=g[w+4]|g[w+5]<<8;H+=(F>>>10|L<<6)&8191;var J=g[w+6]|g[w+7]<<8;$+=(L>>>7|J<<9)&8191;var C=g[w+8]|g[w+9]<<8;X+=(J>>>4|C<<12)&8191,ee+=C>>>1&8191;var k=g[w+10]|g[w+11]<<8;ue+=(C>>>14|k<<2)&8191;var te=g[w+12]|g[w+13]<<8;j+=(k>>>11|te<<5)&8191;var se=g[w+14]|g[w+15]<<8;M+=(te>>>8|se<<8)&8191,P+=se>>>5|A;var ie=0,ye=ie;ye+=q*N,ye+=W*(5*b),ye+=H*(5*I),ye+=$*(5*v),ye+=X*(5*d),ie=ye>>>13,ye&=8191,ye+=ee*(5*l),ye+=ue*(5*Z),ye+=j*(5*y),ye+=M*(5*c),ye+=P*(5*S),ie+=ye>>>13,ye&=8191;var le=ie;le+=q*S,le+=W*N,le+=H*(5*b),le+=$*(5*I),le+=X*(5*v),ie=le>>>13,le&=8191,le+=ee*(5*d),le+=ue*(5*l),le+=j*(5*Z),le+=M*(5*y),le+=P*(5*c),ie+=le>>>13,le&=8191;var be=ie;be+=q*c,be+=W*S,be+=H*N,be+=$*(5*b),be+=X*(5*I),ie=be>>>13,be&=8191,be+=ee*(5*v),be+=ue*(5*d),be+=j*(5*l),be+=M*(5*Z),be+=P*(5*y),ie+=be>>>13,be&=8191;var Y=ie;Y+=q*y,Y+=W*c,Y+=H*S,Y+=$*N,Y+=X*(5*b),ie=Y>>>13,Y&=8191,Y+=ee*(5*I),Y+=ue*(5*v),Y+=j*(5*d),Y+=M*(5*l),Y+=P*(5*Z),ie+=Y>>>13,Y&=8191;var G=ie;G+=q*Z,G+=W*y,G+=H*c,G+=$*S,G+=X*N,ie=G>>>13,G&=8191,G+=ee*(5*b),G+=ue*(5*I),G+=j*(5*v),G+=M*(5*d),G+=P*(5*l),ie+=G>>>13,G&=8191;var z=ie;z+=q*l,z+=W*Z,z+=H*y,z+=$*c,z+=X*S,ie=z>>>13,z&=8191,z+=ee*N,z+=ue*(5*b),z+=j*(5*I),z+=M*(5*v),z+=P*(5*d),ie+=z>>>13,z&=8191;var h=ie;h+=q*d,h+=W*l,h+=H*Z,h+=$*y,h+=X*c,ie=h>>>13,h&=8191,h+=ee*S,h+=ue*N,h+=j*(5*b),h+=M*(5*I),h+=P*(5*v),ie+=h>>>13,h&=8191;var R=ie;R+=q*v,R+=W*d,R+=H*l,R+=$*Z,R+=X*y,ie=R>>>13,R&=8191,R+=ee*c,R+=ue*S,R+=j*N,R+=M*(5*b),R+=P*(5*I),ie+=R>>>13,R&=8191;var he=ie;he+=q*I,he+=W*v,he+=H*d,he+=$*l,he+=X*Z,ie=he>>>13,he&=8191,he+=ee*y,he+=ue*c,he+=j*S,he+=M*N,he+=P*(5*b),ie+=he>>>13,he&=8191;var pe=ie;pe+=q*b,pe+=W*I,pe+=H*v,pe+=$*d,pe+=X*l,ie=pe>>>13,pe&=8191,pe+=ee*Z,pe+=ue*y,pe+=j*c,pe+=M*S,pe+=P*N,ie+=pe>>>13,pe&=8191,ie=(ie<<2)+ie|0,ie=ie+ye|0,ye=ie&8191,ie=ie>>>13,le+=ie,q=ye,W=le,H=be,$=Y,X=G,ee=z,ue=h,j=R,M=he,P=pe,w+=16,x-=16}this._h[0]=q,this._h[1]=W,this._h[2]=H,this._h[3]=$,this._h[4]=X,this._h[5]=ee,this._h[6]=ue,this._h[7]=j,this._h[8]=M,this._h[9]=P},m.prototype.finish=function(g,w){w===void 0&&(w=0);var x=new Uint16Array(10),A,q,W,H;if(this._leftover){for(H=this._leftover,this._buffer[H++]=1;H<16;H++)this._buffer[H]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(A=this._h[1]>>>13,this._h[1]&=8191,H=2;H<10;H++)this._h[H]+=A,A=this._h[H]>>>13,this._h[H]&=8191;for(this._h[0]+=A*5,A=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=A,A=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=A,x[0]=this._h[0]+5,A=x[0]>>>13,x[0]&=8191,H=1;H<10;H++)x[H]=this._h[H]+A,A=x[H]>>>13,x[H]&=8191;for(x[9]-=8192,q=(A^1)-1,H=0;H<10;H++)x[H]&=q;for(q=~q,H=0;H<10;H++)this._h[H]=this._h[H]&q|x[H];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,W=this._h[0]+this._pad[0],this._h[0]=W&65535,H=1;H<8;H++)W=(this._h[H]+this._pad[H]|0)+(W>>>16)|0,this._h[H]=W&65535;return g[w+0]=this._h[0]>>>0,g[w+1]=this._h[0]>>>8,g[w+2]=this._h[1]>>>0,g[w+3]=this._h[1]>>>8,g[w+4]=this._h[2]>>>0,g[w+5]=this._h[2]>>>8,g[w+6]=this._h[3]>>>0,g[w+7]=this._h[3]>>>8,g[w+8]=this._h[4]>>>0,g[w+9]=this._h[4]>>>8,g[w+10]=this._h[5]>>>0,g[w+11]=this._h[5]>>>8,g[w+12]=this._h[6]>>>0,g[w+13]=this._h[6]>>>8,g[w+14]=this._h[7]>>>0,g[w+15]=this._h[7]>>>8,this._finished=!0,this},m.prototype.update=function(g){var w=0,x=g.length,A;if(this._leftover){A=16-this._leftover,A>x&&(A=x);for(var q=0;q<A;q++)this._buffer[this._leftover+q]=g[w+q];if(x-=A,w+=A,this._leftover+=A,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(x>=16&&(A=x-x%16,this._blocks(g,w,A),w+=A,x-=A),x){for(var q=0;q<x;q++)this._buffer[this._leftover+q]=g[w+q];this._leftover+=x}return this},m.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var g=new Uint8Array(16);return this.finish(g),g},m.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},m}();n.Poly1305=s;function o(m,g){var w=new s(m);w.update(g);var x=w.digest();return w.clean(),x}n.oneTimeAuth=o;function f(m,g){return m.length!==n.DIGEST_LENGTH||g.length!==n.DIGEST_LENGTH?!1:t.equal(m,g)}n.equal=f})(Vf);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=Pa,r=Vf,s=Sr,o=je,f=Ci;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var m=new Uint8Array(16),g=function(){function w(x){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,x.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(x)}return w.prototype.seal=function(x,A,q,W){if(x.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var H=new Uint8Array(16);H.set(x,H.length-x.length);var $=new Uint8Array(32);t.stream(this._key,H,$,4);var X=A.length+this.tagLength,ee;if(W){if(W.length!==X)throw new Error("ChaCha20Poly1305: incorrect destination length");ee=W}else ee=new Uint8Array(X);return t.streamXOR(this._key,H,A,ee,4),this._authenticate(ee.subarray(ee.length-this.tagLength,ee.length),$,ee.subarray(0,ee.length-this.tagLength),q),s.wipe(H),ee},w.prototype.open=function(x,A,q,W){if(x.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(A.length<this.tagLength)return null;var H=new Uint8Array(16);H.set(x,H.length-x.length);var $=new Uint8Array(32);t.stream(this._key,H,$,4);var X=new Uint8Array(this.tagLength);if(this._authenticate(X,$,A.subarray(0,A.length-this.tagLength),q),!f.equal(X,A.subarray(A.length-this.tagLength,A.length)))return null;var ee=A.length-this.tagLength,ue;if(W){if(W.length!==ee)throw new Error("ChaCha20Poly1305: incorrect destination length");ue=W}else ue=new Uint8Array(ee);return t.streamXOR(this._key,H,A.subarray(0,A.length-this.tagLength),ue,4),s.wipe(H),ue},w.prototype.clean=function(){return s.wipe(this._key),this},w.prototype._authenticate=function(x,A,q,W){var H=new r.Poly1305(A);W&&(H.update(W),W.length%16>0&&H.update(m.subarray(W.length%16))),H.update(q),q.length%16>0&&H.update(m.subarray(q.length%16));var $=new Uint8Array(8);W&&o.writeUint64LE(W.length,$),H.update($),o.writeUint64LE(q.length,$),H.update($);for(var X=H.digest(),ee=0;ee<X.length;ee++)x[ee]=X[ee];H.clean(),s.wipe(X),s.wipe($)},w}();n.ChaCha20Poly1305=g})(tu);var Gf={},as={},ru={};Object.defineProperty(ru,"__esModule",{value:!0});function pb(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}ru.isSerializableHash=pb;Object.defineProperty(as,"__esModule",{value:!0});var Yr=ru,gb=Ci,_b=Sr,Wf=function(){function n(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),Yr.isSerializableHash(this._inner)&&Yr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),_b.wipe(s)}return n.prototype.reset=function(){if(!Yr.isSerializableHash(this._inner)||!Yr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){Yr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Yr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(t){return this._inner.update(t),this},n.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},n.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},n.prototype.saveState=function(){if(!Yr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(t){if(!Yr.isSerializableHash(this._inner)||!Yr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(t){if(!Yr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},n}();as.HMAC=Wf;function yb(n,t,r){var s=new Wf(n,t);s.update(r);var o=s.digest();return s.clean(),o}as.hmac=yb;as.equal=gb.equal;Object.defineProperty(Gf,"__esModule",{value:!0});var _l=as,yl=Sr,vb=function(){function n(t,r,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=o;var f=_l.hmac(this._hash,s,r);this._hmac=new _l.HMAC(t,f),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(t){for(var r=new Uint8Array(t),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},n.prototype.clean=function(){this._hmac.clean(),yl.wipe(this._buffer),yl.wipe(this._counter),this._bufpos=0},n}(),bb=Gf.HKDF=vb,On={},Ca={},Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.BrowserRandomSource=void 0;const vl=65536;class mb{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let s=0;s<r.length;s+=vl)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,vl)));return r}}Aa.BrowserRandomSource=mb;function wb(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.NodeRandomSource=void 0;const Eb=Sr;class Db{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof wb<"u"){const t=Iv;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(t);for(let o=0;o<s.length;o++)s[o]=r[o];return(0,Eb.wipe)(r),s}}Ta.NodeRandomSource=Db;Object.defineProperty(Ca,"__esModule",{value:!0});Ca.SystemRandomSource=void 0;const Sb=Aa,Ib=Ta;class Ob{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Sb.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Ib.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}Ca.SystemRandomSource=Ob;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const t=Ca,r=je,s=Sr;n.defaultRandomSource=new t.SystemRandomSource;function o(x,A=n.defaultRandomSource){return A.randomBytes(x)}n.randomBytes=o;function f(x=n.defaultRandomSource){const A=o(4,x),q=(0,r.readUint32LE)(A);return(0,s.wipe)(A),q}n.randomUint32=f;const m="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function g(x,A=m,q=n.defaultRandomSource){if(A.length<2)throw new Error("randomString charset is too short");if(A.length>256)throw new Error("randomString charset is too long");let W="";const H=A.length,$=256-256%H;for(;x>0;){const X=o(Math.ceil(x*256/$),q);for(let ee=0;ee<X.length&&x>0;ee++){const ue=X[ee];ue<$&&(W+=A.charAt(ue%H),x--)}(0,s.wipe)(X)}return W}n.randomString=g;function w(x,A=m,q=n.defaultRandomSource){const W=Math.ceil(x/(Math.log(A.length)/Math.LN2));return g(W,A,q)}n.randomStringForEntropy=w})(On);var Na={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=je,r=Sr;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function g(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return g.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},g.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},g.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},g.prototype.update=function(w,x){if(x===void 0&&(x=w.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var A=0;if(this._bytesHashed+=x,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&x>0;)this._buffer[this._bufferLength++]=w[A++],x--;this._bufferLength===this.blockSize&&(f(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(x>=this.blockSize&&(A=f(this._temp,this._state,w,A,x),x%=this.blockSize);x>0;)this._buffer[this._bufferLength++]=w[A++],x--;return this},g.prototype.finish=function(w){if(!this._finished){var x=this._bytesHashed,A=this._bufferLength,q=x/536870912|0,W=x<<3,H=x%64<56?64:128;this._buffer[A]=128;for(var $=A+1;$<H-8;$++)this._buffer[$]=0;t.writeUint32BE(q,this._buffer,H-8),t.writeUint32BE(W,this._buffer,H-4),f(this._temp,this._state,this._buffer,0,H),this._finished=!0}for(var $=0;$<this.digestLength/4;$++)t.writeUint32BE(this._state[$],w,$*4);return this},g.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},g.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},g.prototype.restoreState=function(w){return this._state.set(w.state),this._bufferLength=w.bufferLength,w.buffer&&this._buffer.set(w.buffer),this._bytesHashed=w.bytesHashed,this._finished=!1,this},g.prototype.cleanSavedState=function(w){r.wipe(w.state),w.buffer&&r.wipe(w.buffer),w.bufferLength=0,w.bytesHashed=0},g}();n.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function f(g,w,x,A,q){for(;q>=64;){for(var W=w[0],H=w[1],$=w[2],X=w[3],ee=w[4],ue=w[5],j=w[6],M=w[7],P=0;P<16;P++){var N=A+P*4;g[P]=t.readUint32BE(x,N)}for(var P=16;P<64;P++){var S=g[P-2],c=(S>>>17|S<<32-17)^(S>>>19|S<<32-19)^S>>>10;S=g[P-15];var y=(S>>>7|S<<32-7)^(S>>>18|S<<32-18)^S>>>3;g[P]=(c+g[P-7]|0)+(y+g[P-16]|0)}for(var P=0;P<64;P++){var c=(((ee>>>6|ee<<26)^(ee>>>11|ee<<21)^(ee>>>25|ee<<7))+(ee&ue^~ee&j)|0)+(M+(o[P]+g[P]|0)|0)|0,y=((W>>>2|W<<32-2)^(W>>>13|W<<32-13)^(W>>>22|W<<32-22))+(W&H^W&$^H&$)|0;M=j,j=ue,ue=ee,ee=X+c|0,X=$,$=H,H=W,W=c+y|0}w[0]+=W,w[1]+=H,w[2]+=$,w[3]+=X,w[4]+=ee,w[5]+=ue,w[6]+=j,w[7]+=M,A+=64,q-=64}return A}function m(g){var w=new s;w.update(g);var x=w.digest();return w.clean(),x}n.hash=m})(Na);var iu={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const t=On,r=Sr;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(P){const N=new Float64Array(16);if(P)for(let S=0;S<P.length;S++)N[S]=P[S];return N}const o=new Uint8Array(32);o[0]=9;const f=s([56129,1]);function m(P){let N=1;for(let S=0;S<16;S++){let c=P[S]+N+65535;N=Math.floor(c/65536),P[S]=c-N*65536}P[0]+=N-1+37*(N-1)}function g(P,N,S){const c=~(S-1);for(let y=0;y<16;y++){const Z=c&(P[y]^N[y]);P[y]^=Z,N[y]^=Z}}function w(P,N){const S=s(),c=s();for(let y=0;y<16;y++)c[y]=N[y];m(c),m(c),m(c);for(let y=0;y<2;y++){S[0]=c[0]-65517;for(let l=1;l<15;l++)S[l]=c[l]-65535-(S[l-1]>>16&1),S[l-1]&=65535;S[15]=c[15]-32767-(S[14]>>16&1);const Z=S[15]>>16&1;S[14]&=65535,g(c,S,1-Z)}for(let y=0;y<16;y++)P[2*y]=c[y]&255,P[2*y+1]=c[y]>>8}function x(P,N){for(let S=0;S<16;S++)P[S]=N[2*S]+(N[2*S+1]<<8);P[15]&=32767}function A(P,N,S){for(let c=0;c<16;c++)P[c]=N[c]+S[c]}function q(P,N,S){for(let c=0;c<16;c++)P[c]=N[c]-S[c]}function W(P,N,S){let c,y,Z=0,l=0,d=0,v=0,I=0,b=0,p=0,F=0,L=0,J=0,C=0,k=0,te=0,se=0,ie=0,ye=0,le=0,be=0,Y=0,G=0,z=0,h=0,R=0,he=0,pe=0,Ie=0,He=0,Ve=0,$e=0,dt=0,pt=0,Me=S[0],Oe=S[1],Re=S[2],Fe=S[3],ze=S[4],Pe=S[5],Ue=S[6],Se=S[7],Ce=S[8],Be=S[9],xe=S[10],ke=S[11],We=S[12],et=S[13],tt=S[14],Je=S[15];c=N[0],Z+=c*Me,l+=c*Oe,d+=c*Re,v+=c*Fe,I+=c*ze,b+=c*Pe,p+=c*Ue,F+=c*Se,L+=c*Ce,J+=c*Be,C+=c*xe,k+=c*ke,te+=c*We,se+=c*et,ie+=c*tt,ye+=c*Je,c=N[1],l+=c*Me,d+=c*Oe,v+=c*Re,I+=c*Fe,b+=c*ze,p+=c*Pe,F+=c*Ue,L+=c*Se,J+=c*Ce,C+=c*Be,k+=c*xe,te+=c*ke,se+=c*We,ie+=c*et,ye+=c*tt,le+=c*Je,c=N[2],d+=c*Me,v+=c*Oe,I+=c*Re,b+=c*Fe,p+=c*ze,F+=c*Pe,L+=c*Ue,J+=c*Se,C+=c*Ce,k+=c*Be,te+=c*xe,se+=c*ke,ie+=c*We,ye+=c*et,le+=c*tt,be+=c*Je,c=N[3],v+=c*Me,I+=c*Oe,b+=c*Re,p+=c*Fe,F+=c*ze,L+=c*Pe,J+=c*Ue,C+=c*Se,k+=c*Ce,te+=c*Be,se+=c*xe,ie+=c*ke,ye+=c*We,le+=c*et,be+=c*tt,Y+=c*Je,c=N[4],I+=c*Me,b+=c*Oe,p+=c*Re,F+=c*Fe,L+=c*ze,J+=c*Pe,C+=c*Ue,k+=c*Se,te+=c*Ce,se+=c*Be,ie+=c*xe,ye+=c*ke,le+=c*We,be+=c*et,Y+=c*tt,G+=c*Je,c=N[5],b+=c*Me,p+=c*Oe,F+=c*Re,L+=c*Fe,J+=c*ze,C+=c*Pe,k+=c*Ue,te+=c*Se,se+=c*Ce,ie+=c*Be,ye+=c*xe,le+=c*ke,be+=c*We,Y+=c*et,G+=c*tt,z+=c*Je,c=N[6],p+=c*Me,F+=c*Oe,L+=c*Re,J+=c*Fe,C+=c*ze,k+=c*Pe,te+=c*Ue,se+=c*Se,ie+=c*Ce,ye+=c*Be,le+=c*xe,be+=c*ke,Y+=c*We,G+=c*et,z+=c*tt,h+=c*Je,c=N[7],F+=c*Me,L+=c*Oe,J+=c*Re,C+=c*Fe,k+=c*ze,te+=c*Pe,se+=c*Ue,ie+=c*Se,ye+=c*Ce,le+=c*Be,be+=c*xe,Y+=c*ke,G+=c*We,z+=c*et,h+=c*tt,R+=c*Je,c=N[8],L+=c*Me,J+=c*Oe,C+=c*Re,k+=c*Fe,te+=c*ze,se+=c*Pe,ie+=c*Ue,ye+=c*Se,le+=c*Ce,be+=c*Be,Y+=c*xe,G+=c*ke,z+=c*We,h+=c*et,R+=c*tt,he+=c*Je,c=N[9],J+=c*Me,C+=c*Oe,k+=c*Re,te+=c*Fe,se+=c*ze,ie+=c*Pe,ye+=c*Ue,le+=c*Se,be+=c*Ce,Y+=c*Be,G+=c*xe,z+=c*ke,h+=c*We,R+=c*et,he+=c*tt,pe+=c*Je,c=N[10],C+=c*Me,k+=c*Oe,te+=c*Re,se+=c*Fe,ie+=c*ze,ye+=c*Pe,le+=c*Ue,be+=c*Se,Y+=c*Ce,G+=c*Be,z+=c*xe,h+=c*ke,R+=c*We,he+=c*et,pe+=c*tt,Ie+=c*Je,c=N[11],k+=c*Me,te+=c*Oe,se+=c*Re,ie+=c*Fe,ye+=c*ze,le+=c*Pe,be+=c*Ue,Y+=c*Se,G+=c*Ce,z+=c*Be,h+=c*xe,R+=c*ke,he+=c*We,pe+=c*et,Ie+=c*tt,He+=c*Je,c=N[12],te+=c*Me,se+=c*Oe,ie+=c*Re,ye+=c*Fe,le+=c*ze,be+=c*Pe,Y+=c*Ue,G+=c*Se,z+=c*Ce,h+=c*Be,R+=c*xe,he+=c*ke,pe+=c*We,Ie+=c*et,He+=c*tt,Ve+=c*Je,c=N[13],se+=c*Me,ie+=c*Oe,ye+=c*Re,le+=c*Fe,be+=c*ze,Y+=c*Pe,G+=c*Ue,z+=c*Se,h+=c*Ce,R+=c*Be,he+=c*xe,pe+=c*ke,Ie+=c*We,He+=c*et,Ve+=c*tt,$e+=c*Je,c=N[14],ie+=c*Me,ye+=c*Oe,le+=c*Re,be+=c*Fe,Y+=c*ze,G+=c*Pe,z+=c*Ue,h+=c*Se,R+=c*Ce,he+=c*Be,pe+=c*xe,Ie+=c*ke,He+=c*We,Ve+=c*et,$e+=c*tt,dt+=c*Je,c=N[15],ye+=c*Me,le+=c*Oe,be+=c*Re,Y+=c*Fe,G+=c*ze,z+=c*Pe,h+=c*Ue,R+=c*Se,he+=c*Ce,pe+=c*Be,Ie+=c*xe,He+=c*ke,Ve+=c*We,$e+=c*et,dt+=c*tt,pt+=c*Je,Z+=38*le,l+=38*be,d+=38*Y,v+=38*G,I+=38*z,b+=38*h,p+=38*R,F+=38*he,L+=38*pe,J+=38*Ie,C+=38*He,k+=38*Ve,te+=38*$e,se+=38*dt,ie+=38*pt,y=1,c=Z+y+65535,y=Math.floor(c/65536),Z=c-y*65536,c=l+y+65535,y=Math.floor(c/65536),l=c-y*65536,c=d+y+65535,y=Math.floor(c/65536),d=c-y*65536,c=v+y+65535,y=Math.floor(c/65536),v=c-y*65536,c=I+y+65535,y=Math.floor(c/65536),I=c-y*65536,c=b+y+65535,y=Math.floor(c/65536),b=c-y*65536,c=p+y+65535,y=Math.floor(c/65536),p=c-y*65536,c=F+y+65535,y=Math.floor(c/65536),F=c-y*65536,c=L+y+65535,y=Math.floor(c/65536),L=c-y*65536,c=J+y+65535,y=Math.floor(c/65536),J=c-y*65536,c=C+y+65535,y=Math.floor(c/65536),C=c-y*65536,c=k+y+65535,y=Math.floor(c/65536),k=c-y*65536,c=te+y+65535,y=Math.floor(c/65536),te=c-y*65536,c=se+y+65535,y=Math.floor(c/65536),se=c-y*65536,c=ie+y+65535,y=Math.floor(c/65536),ie=c-y*65536,c=ye+y+65535,y=Math.floor(c/65536),ye=c-y*65536,Z+=y-1+37*(y-1),y=1,c=Z+y+65535,y=Math.floor(c/65536),Z=c-y*65536,c=l+y+65535,y=Math.floor(c/65536),l=c-y*65536,c=d+y+65535,y=Math.floor(c/65536),d=c-y*65536,c=v+y+65535,y=Math.floor(c/65536),v=c-y*65536,c=I+y+65535,y=Math.floor(c/65536),I=c-y*65536,c=b+y+65535,y=Math.floor(c/65536),b=c-y*65536,c=p+y+65535,y=Math.floor(c/65536),p=c-y*65536,c=F+y+65535,y=Math.floor(c/65536),F=c-y*65536,c=L+y+65535,y=Math.floor(c/65536),L=c-y*65536,c=J+y+65535,y=Math.floor(c/65536),J=c-y*65536,c=C+y+65535,y=Math.floor(c/65536),C=c-y*65536,c=k+y+65535,y=Math.floor(c/65536),k=c-y*65536,c=te+y+65535,y=Math.floor(c/65536),te=c-y*65536,c=se+y+65535,y=Math.floor(c/65536),se=c-y*65536,c=ie+y+65535,y=Math.floor(c/65536),ie=c-y*65536,c=ye+y+65535,y=Math.floor(c/65536),ye=c-y*65536,Z+=y-1+37*(y-1),P[0]=Z,P[1]=l,P[2]=d,P[3]=v,P[4]=I,P[5]=b,P[6]=p,P[7]=F,P[8]=L,P[9]=J,P[10]=C,P[11]=k,P[12]=te,P[13]=se,P[14]=ie,P[15]=ye}function H(P,N){W(P,N,N)}function $(P,N){const S=s();for(let c=0;c<16;c++)S[c]=N[c];for(let c=253;c>=0;c--)H(S,S),c!==2&&c!==4&&W(S,S,N);for(let c=0;c<16;c++)P[c]=S[c]}function X(P,N){const S=new Uint8Array(32),c=new Float64Array(80),y=s(),Z=s(),l=s(),d=s(),v=s(),I=s();for(let L=0;L<31;L++)S[L]=P[L];S[31]=P[31]&127|64,S[0]&=248,x(c,N);for(let L=0;L<16;L++)Z[L]=c[L];y[0]=d[0]=1;for(let L=254;L>=0;--L){const J=S[L>>>3]>>>(L&7)&1;g(y,Z,J),g(l,d,J),A(v,y,l),q(y,y,l),A(l,Z,d),q(Z,Z,d),H(d,v),H(I,y),W(y,l,y),W(l,Z,v),A(v,y,l),q(y,y,l),H(Z,y),q(l,d,I),W(y,l,f),A(y,y,d),W(l,l,y),W(y,d,I),W(d,Z,c),H(Z,v),g(y,Z,J),g(l,d,J)}for(let L=0;L<16;L++)c[L+16]=y[L],c[L+32]=l[L],c[L+48]=Z[L],c[L+64]=d[L];const b=c.subarray(32),p=c.subarray(16);$(b,b),W(p,p,b);const F=new Uint8Array(32);return w(F,p),F}n.scalarMult=X;function ee(P){return X(P,o)}n.scalarMultBase=ee;function ue(P){if(P.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const N=new Uint8Array(P);return{publicKey:ee(N),secretKey:N}}n.generateKeyPairFromSeed=ue;function j(P){const N=(0,t.randomBytes)(32,P),S=ue(N);return(0,r.wipe)(N),S}n.generateKeyPair=j;function M(P,N,S=!1){if(P.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(N.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=X(P,N);if(S){let y=0;for(let Z=0;Z<c.length;Z++)y|=c[Z];if(y===0)throw new Error("X25519: invalid shared key")}return c}n.sharedKey=M})(iu);function nu(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function Yf(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?nu(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function jc(n,t){t||(t=n.reduce((o,f)=>o+f.length,0));const r=Yf(t);let s=0;for(const o of n)r.set(o,s),s+=o.length;return nu(r)}function xb(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<n.length;o++){var f=n.charAt(o),m=f.charCodeAt(0);if(r[m]!==255)throw new TypeError(f+" is ambiguous");r[m]=o}var g=n.length,w=n.charAt(0),x=Math.log(g)/Math.log(256),A=Math.log(256)/Math.log(g);function q($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var X=0,ee=0,ue=0,j=$.length;ue!==j&&$[ue]===0;)ue++,X++;for(var M=(j-ue)*A+1>>>0,P=new Uint8Array(M);ue!==j;){for(var N=$[ue],S=0,c=M-1;(N!==0||S<ee)&&c!==-1;c--,S++)N+=256*P[c]>>>0,P[c]=N%g>>>0,N=N/g>>>0;if(N!==0)throw new Error("Non-zero carry");ee=S,ue++}for(var y=M-ee;y!==M&&P[y]===0;)y++;for(var Z=w.repeat(X);y<M;++y)Z+=n.charAt(P[y]);return Z}function W($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var X=0;if($[X]!==" "){for(var ee=0,ue=0;$[X]===w;)ee++,X++;for(var j=($.length-X)*x+1>>>0,M=new Uint8Array(j);$[X];){var P=r[$.charCodeAt(X)];if(P===255)return;for(var N=0,S=j-1;(P!==0||N<ue)&&S!==-1;S--,N++)P+=g*M[S]>>>0,M[S]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");ue=N,X++}if($[X]!==" "){for(var c=j-ue;c!==j&&M[c]===0;)c++;for(var y=new Uint8Array(ee+(j-c)),Z=ee;c!==j;)y[Z++]=M[c++];return y}}}function H($){var X=W($);if(X)return X;throw new Error(`Non-${t} character`)}return{encode:q,decodeUnsafe:W,decode:H}}var Pb=xb,Cb=Pb;const Ab=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Tb=n=>new TextEncoder().encode(n),Nb=n=>new TextDecoder().decode(n);class Rb{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Fb{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Jf(this,t)}}class Ub{constructor(t){this.decoders=t}or(t){return Jf(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Jf=(n,t)=>new Ub({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}});class jb{constructor(t,r,s,o){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new Rb(t,r,s),this.decoder=new Fb(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Ra=({name:n,prefix:t,encode:r,decode:s})=>new jb(n,t,r,s),os=({prefix:n,name:t,alphabet:r})=>{const{encode:s,decode:o}=Cb(r,t);return Ra({prefix:n,name:t,encode:s,decode:f=>Ab(o(f))})},$b=(n,t,r,s)=>{const o={};for(let A=0;A<t.length;++A)o[t[A]]=A;let f=n.length;for(;n[f-1]==="=";)--f;const m=new Uint8Array(f*r/8|0);let g=0,w=0,x=0;for(let A=0;A<f;++A){const q=o[n[A]];if(q===void 0)throw new SyntaxError(`Non-${s} character`);w=w<<r|q,g+=r,g>=8&&(g-=8,m[x++]=255&w>>g)}if(g>=r||255&w<<8-g)throw new SyntaxError("Unexpected end of data");return m},Lb=(n,t,r)=>{const s=t[t.length-1]==="=",o=(1<<r)-1;let f="",m=0,g=0;for(let w=0;w<n.length;++w)for(g=g<<8|n[w],m+=8;m>r;)m-=r,f+=t[o&g>>m];if(m&&(f+=t[o&g<<r-m]),s)for(;f.length*r&7;)f+="=";return f},Wt=({name:n,prefix:t,bitsPerChar:r,alphabet:s})=>Ra({prefix:t,name:n,encode(o){return Lb(o,s,r)},decode(o){return $b(o,s,r,n)}}),Mb=Ra({prefix:"\0",name:"identity",encode:n=>Nb(n),decode:n=>Tb(n)}),zb=Object.freeze(Object.defineProperty({__proto__:null,identity:Mb},Symbol.toStringTag,{value:"Module"})),qb=Wt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Hb=Object.freeze(Object.defineProperty({__proto__:null,base2:qb},Symbol.toStringTag,{value:"Module"})),Bb=Wt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Kb=Object.freeze(Object.defineProperty({__proto__:null,base8:Bb},Symbol.toStringTag,{value:"Module"})),Vb=os({prefix:"9",name:"base10",alphabet:"0123456789"}),kb=Object.freeze(Object.defineProperty({__proto__:null,base10:Vb},Symbol.toStringTag,{value:"Module"})),Gb=Wt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Wb=Wt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Yb=Object.freeze(Object.defineProperty({__proto__:null,base16:Gb,base16upper:Wb},Symbol.toStringTag,{value:"Module"})),Jb=Wt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Xb=Wt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Zb=Wt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Qb=Wt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),em=Wt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),tm=Wt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rm=Wt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),im=Wt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),nm=Wt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),sm=Object.freeze(Object.defineProperty({__proto__:null,base32:Jb,base32hex:em,base32hexpad:rm,base32hexpadupper:im,base32hexupper:tm,base32pad:Zb,base32padupper:Qb,base32upper:Xb,base32z:nm},Symbol.toStringTag,{value:"Module"})),am=os({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),om=os({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),cm=Object.freeze(Object.defineProperty({__proto__:null,base36:am,base36upper:om},Symbol.toStringTag,{value:"Module"})),um=os({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hm=os({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),lm=Object.freeze(Object.defineProperty({__proto__:null,base58btc:um,base58flickr:hm},Symbol.toStringTag,{value:"Module"})),fm=Wt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),dm=Wt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),pm=Wt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gm=Wt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),_m=Object.freeze(Object.defineProperty({__proto__:null,base64:fm,base64pad:dm,base64url:pm,base64urlpad:gm},Symbol.toStringTag,{value:"Module"})),Xf=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),ym=Xf.reduce((n,t,r)=>(n[r]=t,n),[]),vm=Xf.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]);function bm(n){return n.reduce((t,r)=>(t+=ym[r],t),"")}function mm(n){const t=[];for(const r of n){const s=vm[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const wm=Ra({prefix:"ðŸš€",name:"base256emoji",encode:bm,decode:mm}),Em=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:wm},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bl={...zb,...Hb,...Kb,...kb,...Yb,...sm,...cm,...lm,..._m,...Em};function Zf(n,t,r,s){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:s}}}const ml=Zf("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),hc=Zf("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);const t=Yf(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),Qf={utf8:ml,"utf-8":ml,hex:bl.base16,latin1:hc,ascii:hc,binary:hc,...bl};function yr(n,t="utf8"){const r=Qf[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?nu(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}function ur(n,t="utf8"){const r=Qf[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}var me={},ed={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var t,r,s,o,f,m,g,w,x,A,q,W,H,$,X,ee,ue,j,M,P,N,S,c;(function(y){var Z=typeof or=="object"?or:typeof self=="object"?self:typeof this=="object"?this:{};y(l(Z,l(n.exports)));function l(d,v){return d!==Z&&(typeof Object.create=="function"?Object.defineProperty(d,"__esModule",{value:!0}):d.__esModule=!0),function(I,b){return d[I]=v?v(I,b):b}}})(function(y){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])};t=function(l,d){Z(l,d);function v(){this.constructor=l}l.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)},r=Object.assign||function(l){for(var d,v=1,I=arguments.length;v<I;v++){d=arguments[v];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(l[b]=d[b])}return l},s=function(l,d){var v={};for(var I in l)Object.prototype.hasOwnProperty.call(l,I)&&d.indexOf(I)<0&&(v[I]=l[I]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,I=Object.getOwnPropertySymbols(l);b<I.length;b++)d.indexOf(I[b])<0&&Object.prototype.propertyIsEnumerable.call(l,I[b])&&(v[I[b]]=l[I[b]]);return v},o=function(l,d,v,I){var b=arguments.length,p=b<3?d:I===null?I=Object.getOwnPropertyDescriptor(d,v):I,F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(l,d,v,I);else for(var L=l.length-1;L>=0;L--)(F=l[L])&&(p=(b<3?F(p):b>3?F(d,v,p):F(d,v))||p);return b>3&&p&&Object.defineProperty(d,v,p),p},f=function(l,d){return function(v,I){d(v,I,l)}},m=function(l,d){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,d)},g=function(l,d,v,I){function b(p){return p instanceof v?p:new v(function(F){F(p)})}return new(v||(v=Promise))(function(p,F){function L(k){try{C(I.next(k))}catch(te){F(te)}}function J(k){try{C(I.throw(k))}catch(te){F(te)}}function C(k){k.done?p(k.value):b(k.value).then(L,J)}C((I=I.apply(l,d||[])).next())})},w=function(l,d){var v={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},I,b,p,F;return F={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function L(C){return function(k){return J([C,k])}}function J(C){if(I)throw new TypeError("Generator is already executing.");for(;v;)try{if(I=1,b&&(p=C[0]&2?b.return:C[0]?b.throw||((p=b.return)&&p.call(b),0):b.next)&&!(p=p.call(b,C[1])).done)return p;switch(b=0,p&&(C=[C[0]&2,p.value]),C[0]){case 0:case 1:p=C;break;case 4:return v.label++,{value:C[1],done:!1};case 5:v.label++,b=C[1],C=[0];continue;case 7:C=v.ops.pop(),v.trys.pop();continue;default:if(p=v.trys,!(p=p.length>0&&p[p.length-1])&&(C[0]===6||C[0]===2)){v=0;continue}if(C[0]===3&&(!p||C[1]>p[0]&&C[1]<p[3])){v.label=C[1];break}if(C[0]===6&&v.label<p[1]){v.label=p[1],p=C;break}if(p&&v.label<p[2]){v.label=p[2],v.ops.push(C);break}p[2]&&v.ops.pop(),v.trys.pop();continue}C=d.call(l,v)}catch(k){C=[6,k],b=0}finally{I=p=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},c=function(l,d,v,I){I===void 0&&(I=v),l[I]=d[v]},x=function(l,d){for(var v in l)v!=="default"&&!d.hasOwnProperty(v)&&(d[v]=l[v])},A=function(l){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&l[d],I=0;if(v)return v.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&I>=l.length&&(l=void 0),{value:l&&l[I++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},q=function(l,d){var v=typeof Symbol=="function"&&l[Symbol.iterator];if(!v)return l;var I=v.call(l),b,p=[],F;try{for(;(d===void 0||d-- >0)&&!(b=I.next()).done;)p.push(b.value)}catch(L){F={error:L}}finally{try{b&&!b.done&&(v=I.return)&&v.call(I)}finally{if(F)throw F.error}}return p},W=function(){for(var l=[],d=0;d<arguments.length;d++)l=l.concat(q(arguments[d]));return l},H=function(){for(var l=0,d=0,v=arguments.length;d<v;d++)l+=arguments[d].length;for(var I=Array(l),b=0,d=0;d<v;d++)for(var p=arguments[d],F=0,L=p.length;F<L;F++,b++)I[b]=p[F];return I},$=function(l){return this instanceof $?(this.v=l,this):new $(l)},X=function(l,d,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=v.apply(l,d||[]),b,p=[];return b={},F("next"),F("throw"),F("return"),b[Symbol.asyncIterator]=function(){return this},b;function F(se){I[se]&&(b[se]=function(ie){return new Promise(function(ye,le){p.push([se,ie,ye,le])>1||L(se,ie)})})}function L(se,ie){try{J(I[se](ie))}catch(ye){te(p[0][3],ye)}}function J(se){se.value instanceof $?Promise.resolve(se.value.v).then(C,k):te(p[0][2],se)}function C(se){L("next",se)}function k(se){L("throw",se)}function te(se,ie){se(ie),p.shift(),p.length&&L(p[0][0],p[0][1])}},ee=function(l){var d,v;return d={},I("next"),I("throw",function(b){throw b}),I("return"),d[Symbol.iterator]=function(){return this},d;function I(b,p){d[b]=l[b]?function(F){return(v=!v)?{value:$(l[b](F)),done:b==="return"}:p?p(F):F}:p}},ue=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=l[Symbol.asyncIterator],v;return d?d.call(l):(l=typeof A=="function"?A(l):l[Symbol.iterator](),v={},I("next"),I("throw"),I("return"),v[Symbol.asyncIterator]=function(){return this},v);function I(p){v[p]=l[p]&&function(F){return new Promise(function(L,J){F=l[p](F),b(L,J,F.done,F.value)})}}function b(p,F,L,J){Promise.resolve(J).then(function(C){p({value:C,done:L})},F)}},j=function(l,d){return Object.defineProperty?Object.defineProperty(l,"raw",{value:d}):l.raw=d,l},M=function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var v in l)Object.hasOwnProperty.call(l,v)&&(d[v]=l[v]);return d.default=l,d},P=function(l){return l&&l.__esModule?l:{default:l}},N=function(l,d){if(!d.has(l))throw new TypeError("attempted to get private field on non-instance");return d.get(l)},S=function(l,d,v){if(!d.has(l))throw new TypeError("attempted to set private field on non-instance");return d.set(l,v),v},y("__extends",t),y("__assign",r),y("__rest",s),y("__decorate",o),y("__param",f),y("__metadata",m),y("__awaiter",g),y("__generator",w),y("__exportStar",x),y("__createBinding",c),y("__values",A),y("__read",q),y("__spread",W),y("__spreadArrays",H),y("__await",$),y("__asyncGenerator",X),y("__asyncDelegator",ee),y("__asyncValues",ue),y("__makeTemplateObject",j),y("__importStar",M),y("__importDefault",P),y("__classPrivateFieldGet",N),y("__classPrivateFieldSet",S)})})(ed);var Fa=ed.exports,lc={},Gn={},wl;function Dm(){if(wl)return Gn;wl=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.delay=void 0;function n(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return Gn.delay=n,Gn}var Vi={},fc={},ki={},El;function Sm(){return El||(El=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.ONE_THOUSAND=ki.ONE_HUNDRED=void 0,ki.ONE_HUNDRED=100,ki.ONE_THOUSAND=1e3),ki}var dc={},Dl;function Im(){return Dl||(Dl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(dc)),dc}var Sl;function td(){return Sl||(Sl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Fa;t.__exportStar(Sm(),n),t.__exportStar(Im(),n)}(fc)),fc}var Il;function Om(){if(Il)return Vi;Il=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.fromMiliseconds=Vi.toMiliseconds=void 0;const n=td();function t(s){return s*n.ONE_THOUSAND}Vi.toMiliseconds=t;function r(s){return Math.floor(s/n.ONE_THOUSAND)}return Vi.fromMiliseconds=r,Vi}var Ol;function xm(){return Ol||(Ol=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Fa;t.__exportStar(Dm(),n),t.__exportStar(Om(),n)}(lc)),lc}var wn={},xl;function Pm(){if(xl)return wn;xl=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const s=this.get(r);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const o=Date.now()-s.started;this.timestamps.set(r,{started:s.started,elapsed:o})}get(r){const s=this.timestamps.get(r);if(typeof s>"u")throw new Error(`No timestamp found for label: ${r}`);return s}elapsed(r){const s=this.get(r);return s.elapsed||Date.now()-s.started}}return wn.Watch=n,wn.default=n,wn}var pc={},Wn={},Pl;function Cm(){if(Pl)return Wn;Pl=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.IWatch=void 0;class n{}return Wn.IWatch=n,Wn}var Cl;function Am(){return Cl||(Cl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Fa.__exportStar(Cm(),n)}(pc)),pc}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=Fa;t.__exportStar(xm(),n),t.__exportStar(Pm(),n),t.__exportStar(Am(),n),t.__exportStar(td(),n)})(me);var ss={};(function(n){const t=Tv,r=Nv,s=Cv,o=Av,f=j=>j==null,m=Symbol("encodeFragmentIdentifier");function g(j){switch(j.arrayFormat){case"index":return M=>(P,N)=>{const S=P.length;return N===void 0||j.skipNull&&N===null||j.skipEmptyString&&N===""?P:N===null?[...P,[A(M,j),"[",S,"]"].join("")]:[...P,[A(M,j),"[",A(S,j),"]=",A(N,j)].join("")]};case"bracket":return M=>(P,N)=>N===void 0||j.skipNull&&N===null||j.skipEmptyString&&N===""?P:N===null?[...P,[A(M,j),"[]"].join("")]:[...P,[A(M,j),"[]=",A(N,j)].join("")];case"colon-list-separator":return M=>(P,N)=>N===void 0||j.skipNull&&N===null||j.skipEmptyString&&N===""?P:N===null?[...P,[A(M,j),":list="].join("")]:[...P,[A(M,j),":list=",A(N,j)].join("")];case"comma":case"separator":case"bracket-separator":{const M=j.arrayFormat==="bracket-separator"?"[]=":"=";return P=>(N,S)=>S===void 0||j.skipNull&&S===null||j.skipEmptyString&&S===""?N:(S=S===null?"":S,N.length===0?[[A(P,j),M,A(S,j)].join("")]:[[N,A(S,j)].join(j.arrayFormatSeparator)])}default:return M=>(P,N)=>N===void 0||j.skipNull&&N===null||j.skipEmptyString&&N===""?P:N===null?[...P,A(M,j)]:[...P,[A(M,j),"=",A(N,j)].join("")]}}function w(j){let M;switch(j.arrayFormat){case"index":return(P,N,S)=>{if(M=/\[(\d*)\]$/.exec(P),P=P.replace(/\[\d*\]$/,""),!M){S[P]=N;return}S[P]===void 0&&(S[P]={}),S[P][M[1]]=N};case"bracket":return(P,N,S)=>{if(M=/(\[\])$/.exec(P),P=P.replace(/\[\]$/,""),!M){S[P]=N;return}if(S[P]===void 0){S[P]=[N];return}S[P]=[].concat(S[P],N)};case"colon-list-separator":return(P,N,S)=>{if(M=/(:list)$/.exec(P),P=P.replace(/:list$/,""),!M){S[P]=N;return}if(S[P]===void 0){S[P]=[N];return}S[P]=[].concat(S[P],N)};case"comma":case"separator":return(P,N,S)=>{const c=typeof N=="string"&&N.includes(j.arrayFormatSeparator),y=typeof N=="string"&&!c&&q(N,j).includes(j.arrayFormatSeparator);N=y?q(N,j):N;const Z=c||y?N.split(j.arrayFormatSeparator).map(l=>q(l,j)):N===null?N:q(N,j);S[P]=Z};case"bracket-separator":return(P,N,S)=>{const c=/(\[\])$/.test(P);if(P=P.replace(/\[\]$/,""),!c){S[P]=N&&q(N,j);return}const y=N===null?[]:N.split(j.arrayFormatSeparator).map(Z=>q(Z,j));if(S[P]===void 0){S[P]=y;return}S[P]=[].concat(S[P],y)};default:return(P,N,S)=>{if(S[P]===void 0){S[P]=N;return}S[P]=[].concat(S[P],N)}}}function x(j){if(typeof j!="string"||j.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function A(j,M){return M.encode?M.strict?t(j):encodeURIComponent(j):j}function q(j,M){return M.decode?r(j):j}function W(j){return Array.isArray(j)?j.sort():typeof j=="object"?W(Object.keys(j)).sort((M,P)=>Number(M)-Number(P)).map(M=>j[M]):j}function H(j){const M=j.indexOf("#");return M!==-1&&(j=j.slice(0,M)),j}function $(j){let M="";const P=j.indexOf("#");return P!==-1&&(M=j.slice(P)),M}function X(j){j=H(j);const M=j.indexOf("?");return M===-1?"":j.slice(M+1)}function ee(j,M){return M.parseNumbers&&!Number.isNaN(Number(j))&&typeof j=="string"&&j.trim()!==""?j=Number(j):M.parseBooleans&&j!==null&&(j.toLowerCase()==="true"||j.toLowerCase()==="false")&&(j=j.toLowerCase()==="true"),j}function ue(j,M){M=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},M),x(M.arrayFormatSeparator);const P=w(M),N=Object.create(null);if(typeof j!="string"||(j=j.trim().replace(/^[?#&]/,""),!j))return N;for(const S of j.split("&")){if(S==="")continue;let[c,y]=s(M.decode?S.replace(/\+/g," "):S,"=");y=y===void 0?null:["comma","separator","bracket-separator"].includes(M.arrayFormat)?y:q(y,M),P(q(c,M),y,N)}for(const S of Object.keys(N)){const c=N[S];if(typeof c=="object"&&c!==null)for(const y of Object.keys(c))c[y]=ee(c[y],M);else N[S]=ee(c,M)}return M.sort===!1?N:(M.sort===!0?Object.keys(N).sort():Object.keys(N).sort(M.sort)).reduce((S,c)=>{const y=N[c];return y&&typeof y=="object"&&!Array.isArray(y)?S[c]=W(y):S[c]=y,S},Object.create(null))}n.extract=X,n.parse=ue,n.stringify=(j,M)=>{if(!j)return"";M=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},M),x(M.arrayFormatSeparator);const P=y=>M.skipNull&&f(j[y])||M.skipEmptyString&&j[y]==="",N=g(M),S={};for(const y of Object.keys(j))P(y)||(S[y]=j[y]);const c=Object.keys(S);return M.sort!==!1&&c.sort(M.sort),c.map(y=>{const Z=j[y];return Z===void 0?"":Z===null?A(y,M):Array.isArray(Z)?Z.length===0&&M.arrayFormat==="bracket-separator"?A(y,M)+"[]":Z.reduce(N(y),[]).join("&"):A(y,M)+"="+A(Z,M)}).filter(y=>y.length>0).join("&")},n.parseUrl=(j,M)=>{M=Object.assign({decode:!0},M);const[P,N]=s(j,"#");return Object.assign({url:P.split("?")[0]||"",query:ue(X(j),M)},M&&M.parseFragmentIdentifier&&N?{fragmentIdentifier:q(N,M)}:{})},n.stringifyUrl=(j,M)=>{M=Object.assign({encode:!0,strict:!0,[m]:!0},M);const P=H(j.url).split("?")[0]||"",N=n.extract(j.url),S=n.parse(N,{sort:!1}),c=Object.assign(S,j.query);let y=n.stringify(c,M);y&&(y=`?${y}`);let Z=$(j.url);return j.fragmentIdentifier&&(Z=`#${M[m]?A(j.fragmentIdentifier,M):j.fragmentIdentifier}`),`${P}${y}${Z}`},n.pick=(j,M,P)=>{P=Object.assign({parseFragmentIdentifier:!0,[m]:!1},P);const{url:N,query:S,fragmentIdentifier:c}=n.parseUrl(j,P);return n.stringifyUrl({url:N,query:o(S,M),fragmentIdentifier:c},P)},n.exclude=(j,M,P)=>{const N=Array.isArray(M)?S=>!M.includes(S):(S,c)=>!M(S,c);return n.pick(j,N,P)}})(ss);const Tm={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Nm(n,t=[]){const r=[];return Object.keys(n).forEach(s=>{if(t.length&&!t.includes(s))return;const o=n[s];r.push(...o.accounts)}),r}function rd(n,t){return n.includes(":")?[n]:t.chains||[]}const id="base10",cr="base16",$c="base64pad",su="utf8",nd=0,Zi=1,Rm=0,Al=1,Lc=12,au=32;function Fm(){const n=iu.generateKeyPair();return{privateKey:ur(n.secretKey,cr),publicKey:ur(n.publicKey,cr)}}function Mc(){const n=On.randomBytes(au);return ur(n,cr)}function Um(n,t){const r=iu.sharedKey(yr(n,cr),yr(t,cr)),s=new bb(Na.SHA256,r).expand(au);return ur(s,cr)}function jm(n){const t=Na.hash(yr(n,cr));return ur(t,cr)}function Sn(n){const t=Na.hash(yr(n,su));return ur(t,cr)}function $m(n){return yr(`${n}`,id)}function cs(n){return Number(ur(n,id))}function Lm(n){const t=$m(typeof n.type<"u"?n.type:nd);if(cs(t)===Zi&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof n.senderPublicKey<"u"?yr(n.senderPublicKey,cr):void 0,s=typeof n.iv<"u"?yr(n.iv,cr):On.randomBytes(Lc),o=new tu.ChaCha20Poly1305(yr(n.symKey,cr)).seal(s,yr(n.message,su));return zm({type:t,sealed:o,iv:s,senderPublicKey:r})}function Mm(n){const t=new tu.ChaCha20Poly1305(yr(n.symKey,cr)),{sealed:r,iv:s}=Sa(n.encoded),o=t.open(s,r);if(o===null)throw new Error("Failed to decrypt");return ur(o,su)}function zm(n){if(cs(n.type)===Zi){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ur(jc([n.type,n.senderPublicKey,n.iv,n.sealed]),$c)}return ur(jc([n.type,n.iv,n.sealed]),$c)}function Sa(n){const t=yr(n,$c),r=t.slice(Rm,Al),s=Al;if(cs(r)===Zi){const g=s+au,w=g+Lc,x=t.slice(s,g),A=t.slice(g,w),q=t.slice(w);return{type:r,sealed:q,iv:A,senderPublicKey:x}}const o=s+Lc,f=t.slice(s,o),m=t.slice(o);return{type:r,sealed:m,iv:f}}function qm(n,t){const r=Sa(n);return sd({type:cs(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?ur(r.senderPublicKey,cr):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function sd(n){const t=(n==null?void 0:n.type)||nd;if(t===Zi){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function Tl(n){return n.type===Zi&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var Hm=Object.defineProperty,Nl=Object.getOwnPropertySymbols,Bm=Object.prototype.hasOwnProperty,Km=Object.prototype.propertyIsEnumerable,Rl=(n,t,r)=>t in n?Hm(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Fl=(n,t)=>{for(var r in t||(t={}))Bm.call(t,r)&&Rl(n,r,t[r]);if(Nl)for(var r of Nl(t))Km.call(t,r)&&Rl(n,r,t[r]);return n};const Vm="ReactNative",Yi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},km="js";function ou(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ad(){return!Fv()&&!!Uf()&&navigator.product===Vm}function cu(){return!ou()&&!!Uf()}function od(){return ad()?Yi.reactNative:ou()?Yi.node:cu()?Yi.browser:Yi.unknown}function Gm(n,t){let r=ss.parse(n);return r=Fl(Fl({},r),t),n=ss.stringify(r),n}function Wm(){return Rv()||{name:"",description:"",url:"",icons:[""]}}function Ym(){const n=Uv();if(n===null)return"unknown";const t=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[t,n.name,n.version].join("-"):[t,n.version].join("-")}function Jm(){var n;const t=od();return t===Yi.browser?[t,((n=jv())==null?void 0:n.host)||"unknown"].join(":"):t}function Xm(n,t,r){const s=Ym(),o=Jm();return[[n,t].join("-"),[km,r].join("-"),s,o].join("/")}function Zm({protocol:n,version:t,relayUrl:r,sdkVersion:s,auth:o,projectId:f,useOnCloseEvent:m}){const g=r.split("?"),w=Xm(n,t,s),x={auth:o,ua:w,projectId:f,useOnCloseEvent:m||void 0},A=Gm(g[1]||"",x);return g[0]+"?"+A}function Ji(n,t){return n.filter(r=>t.includes(r)).length===n.length}function cd(n){return Object.fromEntries(n.entries())}function ud(n){return new Map(Object.entries(n))}function En(n=me.FIVE_MINUTES,t){const r=me.toMiliseconds(n||me.FIVE_MINUTES);let s,o,f;return{resolve:m=>{f&&s&&(clearTimeout(f),s(m))},reject:m=>{f&&o&&(clearTimeout(f),o(m))},done:()=>new Promise((m,g)=>{f=setTimeout(()=>{g(new Error(t))},r),s=m,o=g})}}function Ia(n,t,r){return new Promise(async(s,o)=>{const f=setTimeout(()=>o(new Error(r)),t);try{const m=await n;s(m)}catch(m){o(m)}clearTimeout(f)})}function hd(n,t){if(typeof t=="string"&&t.startsWith(`${n}:`))return t;if(n.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(n.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${n}`)}function Qm(n){return hd("topic",n)}function ew(n){return hd("id",n)}function ld(n){const[t,r]=n.split(":"),s={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")s.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return s}function Zr(n,t){return me.fromMiliseconds((t||Date.now())+me.toMiliseconds(n))}function Oi(n){return Date.now()>=me.toMiliseconds(n)}function qt(n,t){return`${n}${t?`:${t}`:""}`}function gc(n=[],t=[]){return[...new Set([...n,...t])]}async function tw({id:n,topic:t,wcDeepLink:r}){try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const f=`${o}/wc?requestId=${n}&sessionTopic=${t}`,m=od();m===Yi.browser?window.open(f,"_self","noreferrer noopener"):m===Yi.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(f)}catch(s){console.error(s)}}const rw="irn";function zc(n){return(n==null?void 0:n.relay)||{protocol:rw}}function ba(n){const t=Tm[n];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${n}`);return t}var iw=Object.defineProperty,Ul=Object.getOwnPropertySymbols,nw=Object.prototype.hasOwnProperty,sw=Object.prototype.propertyIsEnumerable,jl=(n,t,r)=>t in n?iw(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,aw=(n,t)=>{for(var r in t||(t={}))nw.call(t,r)&&jl(n,r,t[r]);if(Ul)for(var r of Ul(t))sw.call(t,r)&&jl(n,r,t[r]);return n};function ow(n,t="-"){const r={},s="relay"+t;return Object.keys(n).forEach(o=>{if(o.startsWith(s)){const f=o.replace(s,""),m=n[o];r[f]=m}}),r}function cw(n){const t=n.indexOf(":"),r=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,t),o=n.substring(t+1,r).split("@"),f=typeof r<"u"?n.substring(r):"",m=ss.parse(f);return{protocol:s,topic:uw(o[0]),version:parseInt(o[1],10),symKey:m.symKey,relay:ow(m)}}function uw(n){return n.startsWith("//")?n.substring(2):n}function hw(n,t="-"){const r="relay",s={};return Object.keys(n).forEach(o=>{const f=r+t+o;n[o]&&(s[f]=n[o])}),s}function lw(n){return`${n.protocol}:${n.topic}@${n.version}?`+ss.stringify(aw({symKey:n.symKey},hw(n.relay)))}function xn(n){const t=[];return n.forEach(r=>{const[s,o]=r.split(":");t.push(`${s}:${o}`)}),t}function fw(n){const t=[];return Object.values(n).forEach(r=>{t.push(...xn(r.accounts))}),t}function dw(n,t){const r=[];return Object.values(n).forEach(s=>{xn(s.accounts).includes(t)&&r.push(...s.methods)}),r}function pw(n,t){const r=[];return Object.values(n).forEach(s=>{xn(s.accounts).includes(t)&&r.push(...s.events)}),r}function gw(n,t){const r=wa(n,t);if(r)throw new Error(r.message);const s={};for(const[o,f]of Object.entries(n))s[o]={methods:f.methods,events:f.events,chains:f.accounts.map(m=>`${m.split(":")[0]}:${m.split(":")[1]}`)};return s}function fd(n){return n.includes(":")}function ma(n){return fd(n)?n.split(":")[0]:n}const _w={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},yw={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function de(n,t){const{message:r,code:s}=yw[n];return{message:t?`${r} ${t}`:r,code:s}}function Nt(n,t){const{message:r,code:s}=_w[n];return{message:t?`${r} ${t}`:r,code:s}}function di(n,t){return Array.isArray(n)?typeof t<"u"&&n.length?n.every(t):!0:!1}function In(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function ar(n){return typeof n>"u"}function kt(n,t){return t&&ar(n)?!0:typeof n=="string"&&!!n.trim().length}function uu(n,t){return t&&ar(n)?!0:typeof n=="number"&&!isNaN(n)}function vw(n,t){const{requiredNamespaces:r}=t,s=Object.keys(n.namespaces),o=Object.keys(r);let f=!0;return Ji(o,s)?(s.forEach(m=>{const{accounts:g,methods:w,events:x}=n.namespaces[m],A=xn(g),q=r[m];(!Ji(rd(m,q),A)||!Ji(q.methods,w)||!Ji(q.events,x))&&(f=!1)}),f):!1}function hu(n){return kt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function bw(n){if(kt(n,!1)&&n.includes(":")){const t=n.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&hu(r)}}return!1}function mw(n){if(kt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function ww(n){var t;return(t=n==null?void 0:n.proposer)==null?void 0:t.publicKey}function Ew(n){return n==null?void 0:n.topic}function Dw(n,t){let r=null;return kt(n==null?void 0:n.publicKey,!1)||(r=de("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function $l(n){let t=!0;return di(n)?n.length&&(t=n.every(r=>kt(r,!1))):t=!1,t}function Sw(n,t,r){let s=null;return di(t)?t.forEach(o=>{s||(!hu(o)||!o.includes(n))&&(s=Nt("UNSUPPORTED_CHAINS",`${r}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):s=Nt("UNSUPPORTED_CHAINS",`${r}, chains ${t} should be an array of strings conforming to "namespace:chainId" format`),s}function Iw(n,t){let r=null;return Object.entries(n).forEach(([s,o])=>{if(r)return;const f=Sw(s,rd(s,o),`${t} requiredNamespace`);f&&(r=f)}),r}function Ow(n,t){let r=null;return di(n)?n.forEach(s=>{r||bw(s)||(r=Nt("UNSUPPORTED_ACCOUNTS",`${t}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=Nt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function xw(n,t){let r=null;return Object.values(n).forEach(s=>{if(r)return;const o=Ow(s==null?void 0:s.accounts,`${t} namespace`);o&&(r=o)}),r}function Pw(n,t){let r=null;return $l(n==null?void 0:n.methods)?$l(n==null?void 0:n.events)||(r=Nt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Nt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function dd(n,t){let r=null;return Object.values(n).forEach(s=>{if(r)return;const o=Pw(s,`${t}, namespace`);o&&(r=o)}),r}function Cw(n,t,r){let s=null;if(n&&In(n)){const o=dd(n,t);o&&(s=o);const f=Iw(n,t);f&&(s=f)}else s=de("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return s}function wa(n,t){let r=null;if(n&&In(n)){const s=dd(n,t);s&&(r=s);const o=xw(n,t);o&&(r=o)}else r=de("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function pd(n){return kt(n.protocol,!0)}function Aw(n,t){let r=!1;return t&&!n?r=!0:n&&di(n)&&n.length&&n.forEach(s=>{r=pd(s)}),r}function Tw(n){return typeof n=="number"}function _r(n){return typeof n<"u"&&typeof n!==null}function Nw(n){return!(!n||typeof n!="object"||!n.code||!uu(n.code,!1)||!n.message||!kt(n.message,!1))}function Rw(n){return!(ar(n)||!kt(n.method,!1))}function Fw(n){return!(ar(n)||ar(n.result)&&ar(n.error)||!uu(n.id,!1)||!kt(n.jsonrpc,!1))}function Uw(n){return!(ar(n)||!kt(n.name,!1))}function Ll(n,t){return!(!hu(t)||!fw(n).includes(t))}function jw(n,t,r){return kt(r,!1)?dw(n,t).includes(r):!1}function $w(n,t,r){return kt(r,!1)?pw(n,t).includes(r):!1}function Ml(n,t,r){let s=null;const o=Lw(n),f=Mw(t),m=Object.keys(o),g=Object.keys(f),w=zl(Object.keys(n)),x=zl(Object.keys(t)),A=w.filter(q=>!x.includes(q));return A.length&&(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${A.toString()}
      Received: ${Object.keys(t).toString()}`)),Ji(m,g)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${m.toString()}
      Approved: ${g.toString()}`)),Object.keys(t).forEach(q=>{if(!q.includes(":")||s)return;const W=xn(t[q].accounts);W.includes(q)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${q}
        Required: ${q}
        Approved: ${W.toString()}`))}),m.forEach(q=>{s||(Ji(o[q].methods,f[q].methods)?Ji(o[q].events,f[q].events)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${q}`)):s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${q}`))}),s}function Lw(n){const t={};return Object.keys(n).forEach(r=>{var s;r.includes(":")?t[r]=n[r]:(s=n[r].chains)==null||s.forEach(o=>{t[o]={methods:n[r].methods,events:n[r].events}})}),t}function zl(n){return[...new Set(n.map(t=>t.includes(":")?t.split(":")[0]:t))]}function Mw(n){const t={};return Object.keys(n).forEach(r=>{if(r.includes(":"))t[r]=n[r];else{const s=xn(n[r].accounts);s==null||s.forEach(o=>{t[o]={accounts:n[r].accounts.filter(f=>f.includes(`${o}:`)),methods:n[r].methods,events:n[r].events}})}}),t}function zw(n,t){return uu(n,!1)&&n<=t.max&&n>=t.min}var Ua={},gd={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var t,r,s,o,f,m,g,w,x,A,q,W,H,$,X,ee,ue,j,M,P,N,S,c;(function(y){var Z=typeof or=="object"?or:typeof self=="object"?self:typeof this=="object"?this:{};y(l(Z,l(n.exports)));function l(d,v){return d!==Z&&(typeof Object.create=="function"?Object.defineProperty(d,"__esModule",{value:!0}):d.__esModule=!0),function(I,b){return d[I]=v?v(I,b):b}}})(function(y){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])};t=function(l,d){Z(l,d);function v(){this.constructor=l}l.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)},r=Object.assign||function(l){for(var d,v=1,I=arguments.length;v<I;v++){d=arguments[v];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(l[b]=d[b])}return l},s=function(l,d){var v={};for(var I in l)Object.prototype.hasOwnProperty.call(l,I)&&d.indexOf(I)<0&&(v[I]=l[I]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,I=Object.getOwnPropertySymbols(l);b<I.length;b++)d.indexOf(I[b])<0&&Object.prototype.propertyIsEnumerable.call(l,I[b])&&(v[I[b]]=l[I[b]]);return v},o=function(l,d,v,I){var b=arguments.length,p=b<3?d:I===null?I=Object.getOwnPropertyDescriptor(d,v):I,F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(l,d,v,I);else for(var L=l.length-1;L>=0;L--)(F=l[L])&&(p=(b<3?F(p):b>3?F(d,v,p):F(d,v))||p);return b>3&&p&&Object.defineProperty(d,v,p),p},f=function(l,d){return function(v,I){d(v,I,l)}},m=function(l,d){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,d)},g=function(l,d,v,I){function b(p){return p instanceof v?p:new v(function(F){F(p)})}return new(v||(v=Promise))(function(p,F){function L(k){try{C(I.next(k))}catch(te){F(te)}}function J(k){try{C(I.throw(k))}catch(te){F(te)}}function C(k){k.done?p(k.value):b(k.value).then(L,J)}C((I=I.apply(l,d||[])).next())})},w=function(l,d){var v={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},I,b,p,F;return F={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function L(C){return function(k){return J([C,k])}}function J(C){if(I)throw new TypeError("Generator is already executing.");for(;v;)try{if(I=1,b&&(p=C[0]&2?b.return:C[0]?b.throw||((p=b.return)&&p.call(b),0):b.next)&&!(p=p.call(b,C[1])).done)return p;switch(b=0,p&&(C=[C[0]&2,p.value]),C[0]){case 0:case 1:p=C;break;case 4:return v.label++,{value:C[1],done:!1};case 5:v.label++,b=C[1],C=[0];continue;case 7:C=v.ops.pop(),v.trys.pop();continue;default:if(p=v.trys,!(p=p.length>0&&p[p.length-1])&&(C[0]===6||C[0]===2)){v=0;continue}if(C[0]===3&&(!p||C[1]>p[0]&&C[1]<p[3])){v.label=C[1];break}if(C[0]===6&&v.label<p[1]){v.label=p[1],p=C;break}if(p&&v.label<p[2]){v.label=p[2],v.ops.push(C);break}p[2]&&v.ops.pop(),v.trys.pop();continue}C=d.call(l,v)}catch(k){C=[6,k],b=0}finally{I=p=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},c=function(l,d,v,I){I===void 0&&(I=v),l[I]=d[v]},x=function(l,d){for(var v in l)v!=="default"&&!d.hasOwnProperty(v)&&(d[v]=l[v])},A=function(l){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&l[d],I=0;if(v)return v.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&I>=l.length&&(l=void 0),{value:l&&l[I++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},q=function(l,d){var v=typeof Symbol=="function"&&l[Symbol.iterator];if(!v)return l;var I=v.call(l),b,p=[],F;try{for(;(d===void 0||d-- >0)&&!(b=I.next()).done;)p.push(b.value)}catch(L){F={error:L}}finally{try{b&&!b.done&&(v=I.return)&&v.call(I)}finally{if(F)throw F.error}}return p},W=function(){for(var l=[],d=0;d<arguments.length;d++)l=l.concat(q(arguments[d]));return l},H=function(){for(var l=0,d=0,v=arguments.length;d<v;d++)l+=arguments[d].length;for(var I=Array(l),b=0,d=0;d<v;d++)for(var p=arguments[d],F=0,L=p.length;F<L;F++,b++)I[b]=p[F];return I},$=function(l){return this instanceof $?(this.v=l,this):new $(l)},X=function(l,d,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=v.apply(l,d||[]),b,p=[];return b={},F("next"),F("throw"),F("return"),b[Symbol.asyncIterator]=function(){return this},b;function F(se){I[se]&&(b[se]=function(ie){return new Promise(function(ye,le){p.push([se,ie,ye,le])>1||L(se,ie)})})}function L(se,ie){try{J(I[se](ie))}catch(ye){te(p[0][3],ye)}}function J(se){se.value instanceof $?Promise.resolve(se.value.v).then(C,k):te(p[0][2],se)}function C(se){L("next",se)}function k(se){L("throw",se)}function te(se,ie){se(ie),p.shift(),p.length&&L(p[0][0],p[0][1])}},ee=function(l){var d,v;return d={},I("next"),I("throw",function(b){throw b}),I("return"),d[Symbol.iterator]=function(){return this},d;function I(b,p){d[b]=l[b]?function(F){return(v=!v)?{value:$(l[b](F)),done:b==="return"}:p?p(F):F}:p}},ue=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=l[Symbol.asyncIterator],v;return d?d.call(l):(l=typeof A=="function"?A(l):l[Symbol.iterator](),v={},I("next"),I("throw"),I("return"),v[Symbol.asyncIterator]=function(){return this},v);function I(p){v[p]=l[p]&&function(F){return new Promise(function(L,J){F=l[p](F),b(L,J,F.done,F.value)})}}function b(p,F,L,J){Promise.resolve(J).then(function(C){p({value:C,done:L})},F)}},j=function(l,d){return Object.defineProperty?Object.defineProperty(l,"raw",{value:d}):l.raw=d,l},M=function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var v in l)Object.hasOwnProperty.call(l,v)&&(d[v]=l[v]);return d.default=l,d},P=function(l){return l&&l.__esModule?l:{default:l}},N=function(l,d){if(!d.has(l))throw new TypeError("attempted to get private field on non-instance");return d.get(l)},S=function(l,d,v){if(!d.has(l))throw new TypeError("attempted to set private field on non-instance");return d.set(l,v),v},y("__extends",t),y("__assign",r),y("__rest",s),y("__decorate",o),y("__param",f),y("__metadata",m),y("__awaiter",g),y("__generator",w),y("__exportStar",x),y("__createBinding",c),y("__values",A),y("__read",q),y("__spread",W),y("__spreadArrays",H),y("__await",$),y("__asyncGenerator",X),y("__asyncDelegator",ee),y("__asyncValues",ue),y("__makeTemplateObject",j),y("__importStar",M),y("__importDefault",P),y("__classPrivateFieldGet",N),y("__classPrivateFieldSet",S)})})(gd);var _d=gd.exports,us={};Object.defineProperty(us,"__esModule",{value:!0});function qw(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}us.safeJsonParse=qw;function Hw(n){return typeof n=="string"?n:JSON.stringify(n,(t,r)=>typeof r>"u"?null:r)}us.safeJsonStringify=Hw;var Yn={exports:{}},ql;function Bw(){return ql||(ql=1,function(){let n;function t(){}n=t,n.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},n.prototype.setItem=function(r,s){this[r]=String(s)},n.prototype.removeItem=function(r){delete this[r]},n.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},n.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof or<"u"&&or.localStorage?Yn.exports=or.localStorage:typeof window<"u"&&window.localStorage?Yn.exports=window.localStorage:Yn.exports=new t}()),Yn.exports}var _c={},Jn={},Hl;function Kw(){if(Hl)return Jn;Hl=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.IKeyValueStorage=void 0;class n{}return Jn.IKeyValueStorage=n,Jn}var Xn={},Bl;function Vw(){if(Bl)return Xn;Bl=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.parseEntry=void 0;const n=us;function t(r){var s;return[r[0],n.safeJsonParse((s=r[1])!==null&&s!==void 0?s:"")]}return Xn.parseEntry=t,Xn}var Kl;function kw(){return Kl||(Kl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=_d;t.__exportStar(Kw(),n),t.__exportStar(Vw(),n)}(_c)),_c}Object.defineProperty(Ua,"__esModule",{value:!0});Ua.KeyValueStorage=void 0;const Dn=_d,Vl=us,Gw=Dn.__importDefault(Bw()),Ww=kw();class yd{constructor(){this.localStorage=Gw.default}getKeys(){return Dn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Dn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(Ww.parseEntry)})}getItem(t){return Dn.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(t);if(r!==null)return Vl.safeJsonParse(r)})}setItem(t,r){return Dn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(t,Vl.safeJsonStringify(r))})}removeItem(t){return Dn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(t)})}}Ua.KeyValueStorage=yd;var Yw=Ua.default=yd,hs={},vd={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var t,r,s,o,f,m,g,w,x,A,q,W,H,$,X,ee,ue,j,M,P,N,S,c;(function(y){var Z=typeof or=="object"?or:typeof self=="object"?self:typeof this=="object"?this:{};y(l(Z,l(n.exports)));function l(d,v){return d!==Z&&(typeof Object.create=="function"?Object.defineProperty(d,"__esModule",{value:!0}):d.__esModule=!0),function(I,b){return d[I]=v?v(I,b):b}}})(function(y){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])};t=function(l,d){Z(l,d);function v(){this.constructor=l}l.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)},r=Object.assign||function(l){for(var d,v=1,I=arguments.length;v<I;v++){d=arguments[v];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(l[b]=d[b])}return l},s=function(l,d){var v={};for(var I in l)Object.prototype.hasOwnProperty.call(l,I)&&d.indexOf(I)<0&&(v[I]=l[I]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,I=Object.getOwnPropertySymbols(l);b<I.length;b++)d.indexOf(I[b])<0&&Object.prototype.propertyIsEnumerable.call(l,I[b])&&(v[I[b]]=l[I[b]]);return v},o=function(l,d,v,I){var b=arguments.length,p=b<3?d:I===null?I=Object.getOwnPropertyDescriptor(d,v):I,F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(l,d,v,I);else for(var L=l.length-1;L>=0;L--)(F=l[L])&&(p=(b<3?F(p):b>3?F(d,v,p):F(d,v))||p);return b>3&&p&&Object.defineProperty(d,v,p),p},f=function(l,d){return function(v,I){d(v,I,l)}},m=function(l,d){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,d)},g=function(l,d,v,I){function b(p){return p instanceof v?p:new v(function(F){F(p)})}return new(v||(v=Promise))(function(p,F){function L(k){try{C(I.next(k))}catch(te){F(te)}}function J(k){try{C(I.throw(k))}catch(te){F(te)}}function C(k){k.done?p(k.value):b(k.value).then(L,J)}C((I=I.apply(l,d||[])).next())})},w=function(l,d){var v={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},I,b,p,F;return F={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function L(C){return function(k){return J([C,k])}}function J(C){if(I)throw new TypeError("Generator is already executing.");for(;v;)try{if(I=1,b&&(p=C[0]&2?b.return:C[0]?b.throw||((p=b.return)&&p.call(b),0):b.next)&&!(p=p.call(b,C[1])).done)return p;switch(b=0,p&&(C=[C[0]&2,p.value]),C[0]){case 0:case 1:p=C;break;case 4:return v.label++,{value:C[1],done:!1};case 5:v.label++,b=C[1],C=[0];continue;case 7:C=v.ops.pop(),v.trys.pop();continue;default:if(p=v.trys,!(p=p.length>0&&p[p.length-1])&&(C[0]===6||C[0]===2)){v=0;continue}if(C[0]===3&&(!p||C[1]>p[0]&&C[1]<p[3])){v.label=C[1];break}if(C[0]===6&&v.label<p[1]){v.label=p[1],p=C;break}if(p&&v.label<p[2]){v.label=p[2],v.ops.push(C);break}p[2]&&v.ops.pop(),v.trys.pop();continue}C=d.call(l,v)}catch(k){C=[6,k],b=0}finally{I=p=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},c=function(l,d,v,I){I===void 0&&(I=v),l[I]=d[v]},x=function(l,d){for(var v in l)v!=="default"&&!d.hasOwnProperty(v)&&(d[v]=l[v])},A=function(l){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&l[d],I=0;if(v)return v.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&I>=l.length&&(l=void 0),{value:l&&l[I++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},q=function(l,d){var v=typeof Symbol=="function"&&l[Symbol.iterator];if(!v)return l;var I=v.call(l),b,p=[],F;try{for(;(d===void 0||d-- >0)&&!(b=I.next()).done;)p.push(b.value)}catch(L){F={error:L}}finally{try{b&&!b.done&&(v=I.return)&&v.call(I)}finally{if(F)throw F.error}}return p},W=function(){for(var l=[],d=0;d<arguments.length;d++)l=l.concat(q(arguments[d]));return l},H=function(){for(var l=0,d=0,v=arguments.length;d<v;d++)l+=arguments[d].length;for(var I=Array(l),b=0,d=0;d<v;d++)for(var p=arguments[d],F=0,L=p.length;F<L;F++,b++)I[b]=p[F];return I},$=function(l){return this instanceof $?(this.v=l,this):new $(l)},X=function(l,d,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=v.apply(l,d||[]),b,p=[];return b={},F("next"),F("throw"),F("return"),b[Symbol.asyncIterator]=function(){return this},b;function F(se){I[se]&&(b[se]=function(ie){return new Promise(function(ye,le){p.push([se,ie,ye,le])>1||L(se,ie)})})}function L(se,ie){try{J(I[se](ie))}catch(ye){te(p[0][3],ye)}}function J(se){se.value instanceof $?Promise.resolve(se.value.v).then(C,k):te(p[0][2],se)}function C(se){L("next",se)}function k(se){L("throw",se)}function te(se,ie){se(ie),p.shift(),p.length&&L(p[0][0],p[0][1])}},ee=function(l){var d,v;return d={},I("next"),I("throw",function(b){throw b}),I("return"),d[Symbol.iterator]=function(){return this},d;function I(b,p){d[b]=l[b]?function(F){return(v=!v)?{value:$(l[b](F)),done:b==="return"}:p?p(F):F}:p}},ue=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=l[Symbol.asyncIterator],v;return d?d.call(l):(l=typeof A=="function"?A(l):l[Symbol.iterator](),v={},I("next"),I("throw"),I("return"),v[Symbol.asyncIterator]=function(){return this},v);function I(p){v[p]=l[p]&&function(F){return new Promise(function(L,J){F=l[p](F),b(L,J,F.done,F.value)})}}function b(p,F,L,J){Promise.resolve(J).then(function(C){p({value:C,done:L})},F)}},j=function(l,d){return Object.defineProperty?Object.defineProperty(l,"raw",{value:d}):l.raw=d,l},M=function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var v in l)Object.hasOwnProperty.call(l,v)&&(d[v]=l[v]);return d.default=l,d},P=function(l){return l&&l.__esModule?l:{default:l}},N=function(l,d){if(!d.has(l))throw new TypeError("attempted to get private field on non-instance");return d.get(l)},S=function(l,d,v){if(!d.has(l))throw new TypeError("attempted to set private field on non-instance");return d.set(l,v),v},y("__extends",t),y("__assign",r),y("__rest",s),y("__decorate",o),y("__param",f),y("__metadata",m),y("__awaiter",g),y("__generator",w),y("__exportStar",x),y("__createBinding",c),y("__values",A),y("__read",q),y("__spread",W),y("__spreadArrays",H),y("__await",$),y("__asyncGenerator",X),y("__asyncDelegator",ee),y("__asyncValues",ue),y("__makeTemplateObject",j),y("__importStar",M),y("__importDefault",P),y("__classPrivateFieldGet",N),y("__classPrivateFieldSet",S)})})(vd);var ja=vd.exports,Zn={},yc={},Qn={};class Qi{}const Jw=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Qi},Symbol.toStringTag,{value:"Module"})),Xw=Ov(Jw);var kl;function Zw(){if(kl)return Qn;kl=1,Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.IHeartBeat=void 0;const n=Xw;class t extends n.IEvents{constructor(s){super()}}return Qn.IHeartBeat=t,Qn}var Gl;function bd(){return Gl||(Gl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),ja.__exportStar(Zw(),n)}(yc)),yc}var vc={},Gi={},Wl;function Qw(){if(Wl)return Gi;Wl=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.HEARTBEAT_EVENTS=Gi.HEARTBEAT_INTERVAL=void 0;const n=me;return Gi.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,Gi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Gi}var Yl;function md(){return Yl||(Yl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),ja.__exportStar(Qw(),n)}(vc)),vc}var Jl;function eE(){if(Jl)return Zn;Jl=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.HeartBeat=void 0;const n=ja,t=Qr,r=me,s=bd(),o=md();class f extends s.IHeartBeat{constructor(g){super(g),this.events=new t.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(g==null?void 0:g.interval)||o.HEARTBEAT_INTERVAL}static init(g){return n.__awaiter(this,void 0,void 0,function*(){const w=new f(g);return yield w.init(),w})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(g,w){this.events.on(g,w)}once(g,w){this.events.once(g,w)}off(g,w){this.events.off(g,w)}removeListener(g,w){this.events.removeListener(g,w)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return Zn.HeartBeat=f,Zn}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const t=ja;t.__exportStar(eE(),n),t.__exportStar(bd(),n),t.__exportStar(md(),n)})(hs);var Qe={},wd={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var t,r,s,o,f,m,g,w,x,A,q,W,H,$,X,ee,ue,j,M,P,N,S,c;(function(y){var Z=typeof or=="object"?or:typeof self=="object"?self:typeof this=="object"?this:{};y(l(Z,l(n.exports)));function l(d,v){return d!==Z&&(typeof Object.create=="function"?Object.defineProperty(d,"__esModule",{value:!0}):d.__esModule=!0),function(I,b){return d[I]=v?v(I,b):b}}})(function(y){var Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var v in d)d.hasOwnProperty(v)&&(l[v]=d[v])};t=function(l,d){Z(l,d);function v(){this.constructor=l}l.prototype=d===null?Object.create(d):(v.prototype=d.prototype,new v)},r=Object.assign||function(l){for(var d,v=1,I=arguments.length;v<I;v++){d=arguments[v];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(l[b]=d[b])}return l},s=function(l,d){var v={};for(var I in l)Object.prototype.hasOwnProperty.call(l,I)&&d.indexOf(I)<0&&(v[I]=l[I]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,I=Object.getOwnPropertySymbols(l);b<I.length;b++)d.indexOf(I[b])<0&&Object.prototype.propertyIsEnumerable.call(l,I[b])&&(v[I[b]]=l[I[b]]);return v},o=function(l,d,v,I){var b=arguments.length,p=b<3?d:I===null?I=Object.getOwnPropertyDescriptor(d,v):I,F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(l,d,v,I);else for(var L=l.length-1;L>=0;L--)(F=l[L])&&(p=(b<3?F(p):b>3?F(d,v,p):F(d,v))||p);return b>3&&p&&Object.defineProperty(d,v,p),p},f=function(l,d){return function(v,I){d(v,I,l)}},m=function(l,d){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,d)},g=function(l,d,v,I){function b(p){return p instanceof v?p:new v(function(F){F(p)})}return new(v||(v=Promise))(function(p,F){function L(k){try{C(I.next(k))}catch(te){F(te)}}function J(k){try{C(I.throw(k))}catch(te){F(te)}}function C(k){k.done?p(k.value):b(k.value).then(L,J)}C((I=I.apply(l,d||[])).next())})},w=function(l,d){var v={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},I,b,p,F;return F={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function L(C){return function(k){return J([C,k])}}function J(C){if(I)throw new TypeError("Generator is already executing.");for(;v;)try{if(I=1,b&&(p=C[0]&2?b.return:C[0]?b.throw||((p=b.return)&&p.call(b),0):b.next)&&!(p=p.call(b,C[1])).done)return p;switch(b=0,p&&(C=[C[0]&2,p.value]),C[0]){case 0:case 1:p=C;break;case 4:return v.label++,{value:C[1],done:!1};case 5:v.label++,b=C[1],C=[0];continue;case 7:C=v.ops.pop(),v.trys.pop();continue;default:if(p=v.trys,!(p=p.length>0&&p[p.length-1])&&(C[0]===6||C[0]===2)){v=0;continue}if(C[0]===3&&(!p||C[1]>p[0]&&C[1]<p[3])){v.label=C[1];break}if(C[0]===6&&v.label<p[1]){v.label=p[1],p=C;break}if(p&&v.label<p[2]){v.label=p[2],v.ops.push(C);break}p[2]&&v.ops.pop(),v.trys.pop();continue}C=d.call(l,v)}catch(k){C=[6,k],b=0}finally{I=p=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},c=function(l,d,v,I){I===void 0&&(I=v),l[I]=d[v]},x=function(l,d){for(var v in l)v!=="default"&&!d.hasOwnProperty(v)&&(d[v]=l[v])},A=function(l){var d=typeof Symbol=="function"&&Symbol.iterator,v=d&&l[d],I=0;if(v)return v.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&I>=l.length&&(l=void 0),{value:l&&l[I++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},q=function(l,d){var v=typeof Symbol=="function"&&l[Symbol.iterator];if(!v)return l;var I=v.call(l),b,p=[],F;try{for(;(d===void 0||d-- >0)&&!(b=I.next()).done;)p.push(b.value)}catch(L){F={error:L}}finally{try{b&&!b.done&&(v=I.return)&&v.call(I)}finally{if(F)throw F.error}}return p},W=function(){for(var l=[],d=0;d<arguments.length;d++)l=l.concat(q(arguments[d]));return l},H=function(){for(var l=0,d=0,v=arguments.length;d<v;d++)l+=arguments[d].length;for(var I=Array(l),b=0,d=0;d<v;d++)for(var p=arguments[d],F=0,L=p.length;F<L;F++,b++)I[b]=p[F];return I},$=function(l){return this instanceof $?(this.v=l,this):new $(l)},X=function(l,d,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=v.apply(l,d||[]),b,p=[];return b={},F("next"),F("throw"),F("return"),b[Symbol.asyncIterator]=function(){return this},b;function F(se){I[se]&&(b[se]=function(ie){return new Promise(function(ye,le){p.push([se,ie,ye,le])>1||L(se,ie)})})}function L(se,ie){try{J(I[se](ie))}catch(ye){te(p[0][3],ye)}}function J(se){se.value instanceof $?Promise.resolve(se.value.v).then(C,k):te(p[0][2],se)}function C(se){L("next",se)}function k(se){L("throw",se)}function te(se,ie){se(ie),p.shift(),p.length&&L(p[0][0],p[0][1])}},ee=function(l){var d,v;return d={},I("next"),I("throw",function(b){throw b}),I("return"),d[Symbol.iterator]=function(){return this},d;function I(b,p){d[b]=l[b]?function(F){return(v=!v)?{value:$(l[b](F)),done:b==="return"}:p?p(F):F}:p}},ue=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=l[Symbol.asyncIterator],v;return d?d.call(l):(l=typeof A=="function"?A(l):l[Symbol.iterator](),v={},I("next"),I("throw"),I("return"),v[Symbol.asyncIterator]=function(){return this},v);function I(p){v[p]=l[p]&&function(F){return new Promise(function(L,J){F=l[p](F),b(L,J,F.done,F.value)})}}function b(p,F,L,J){Promise.resolve(J).then(function(C){p({value:C,done:L})},F)}},j=function(l,d){return Object.defineProperty?Object.defineProperty(l,"raw",{value:d}):l.raw=d,l},M=function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var v in l)Object.hasOwnProperty.call(l,v)&&(d[v]=l[v]);return d.default=l,d},P=function(l){return l&&l.__esModule?l:{default:l}},N=function(l,d){if(!d.has(l))throw new TypeError("attempted to get private field on non-instance");return d.get(l)},S=function(l,d,v){if(!d.has(l))throw new TypeError("attempted to set private field on non-instance");return d.set(l,v),v},y("__extends",t),y("__assign",r),y("__rest",s),y("__decorate",o),y("__param",f),y("__metadata",m),y("__awaiter",g),y("__generator",w),y("__exportStar",x),y("__createBinding",c),y("__values",A),y("__read",q),y("__spread",W),y("__spreadArrays",H),y("__await",$),y("__asyncGenerator",X),y("__asyncDelegator",ee),y("__asyncValues",ue),y("__makeTemplateObject",j),y("__importStar",M),y("__importDefault",P),y("__classPrivateFieldGet",N),y("__classPrivateFieldSet",S)})})(wd);var tE=wd.exports,bc,Xl;function rE(){if(Xl)return bc;Xl=1;function n(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}bc=t;function t(r,s,o){var f=o&&o.stringify||n,m=1;if(typeof r=="object"&&r!==null){var g=s.length+m;if(g===1)return r;var w=new Array(g);w[0]=f(r);for(var x=1;x<g;x++)w[x]=f(s[x]);return w.join(" ")}if(typeof r!="string")return r;var A=s.length;if(A===0)return r;for(var q="",W=1-m,H=-1,$=r&&r.length||0,X=0;X<$;){if(r.charCodeAt(X)===37&&X+1<$){switch(H=H>-1?H:0,r.charCodeAt(X+1)){case 100:case 102:if(W>=A||s[W]==null)break;H<X&&(q+=r.slice(H,X)),q+=Number(s[W]),H=X+2,X++;break;case 105:if(W>=A||s[W]==null)break;H<X&&(q+=r.slice(H,X)),q+=Math.floor(Number(s[W])),H=X+2,X++;break;case 79:case 111:case 106:if(W>=A||s[W]===void 0)break;H<X&&(q+=r.slice(H,X));var ee=typeof s[W];if(ee==="string"){q+="'"+s[W]+"'",H=X+2,X++;break}if(ee==="function"){q+=s[W].name||"<anonymous>",H=X+2,X++;break}q+=f(s[W]),H=X+2,X++;break;case 115:if(W>=A)break;H<X&&(q+=r.slice(H,X)),q+=String(s[W]),H=X+2,X++;break;case 37:H<X&&(q+=r.slice(H,X)),q+="%",H=X+2,X++,W--;break}++W}++X}return H===-1?r:(H<$&&(q+=r.slice(H)),q)}return bc}var mc,Zl;function iE(){if(Zl)return mc;Zl=1;const n=rE();mc=o;const t=N().console||{},r={mapHttpRequest:$,mapHttpResponse:$,wrapRequestSerializer:X,wrapResponseSerializer:X,wrapErrorSerializer:X,req:$,res:$,err:W};function s(S,c){return Array.isArray(S)?S.filter(function(Z){return Z!=="!stdSerializers.err"}):S===!0?Object.keys(c):!1}function o(S){S=S||{},S.browser=S.browser||{};const c=S.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const y=S.browser.write||t;S.browser.write&&(S.browser.asObject=!0);const Z=S.serializers||{},l=s(S.browser.serialize,Z);let d=S.browser.serialize;Array.isArray(S.browser.serialize)&&S.browser.serialize.indexOf("!stdSerializers.err")>-1&&(d=!1);const v=["error","fatal","warn","info","debug","trace"];typeof y=="function"&&(y.error=y.fatal=y.warn=y.info=y.debug=y.trace=y),S.enabled===!1&&(S.level="silent");const I=S.level||"info",b=Object.create(y);b.log||(b.log=ee),Object.defineProperty(b,"levelVal",{get:F}),Object.defineProperty(b,"level",{get:L,set:J});const p={transmit:c,serialize:l,asObject:S.browser.asObject,levels:v,timestamp:H(S)};b.levels=o.levels,b.level=I,b.setMaxListeners=b.getMaxListeners=b.emit=b.addListener=b.on=b.prependListener=b.once=b.prependOnceListener=b.removeListener=b.removeAllListeners=b.listeners=b.listenerCount=b.eventNames=b.write=b.flush=ee,b.serializers=Z,b._serialize=l,b._stdErrSerialize=d,b.child=C,c&&(b._logEvent=q());function F(){return this.level==="silent"?1/0:this.levels.values[this.level]}function L(){return this._level}function J(k){if(k!=="silent"&&!this.levels.values[k])throw Error("unknown level "+k);this._level=k,f(p,b,"error","log"),f(p,b,"fatal","error"),f(p,b,"warn","error"),f(p,b,"info","log"),f(p,b,"debug","log"),f(p,b,"trace","log")}function C(k,te){if(!k)throw new Error("missing bindings for child Pino");te=te||{},l&&k.serializers&&(te.serializers=k.serializers);const se=te.serializers;if(l&&se){var ie=Object.assign({},Z,se),ye=S.browser.serialize===!0?Object.keys(ie):l;delete k.serializers,w([k],ye,ie,this._stdErrSerialize)}function le(be){this._childLevel=(be._childLevel|0)+1,this.error=x(be,k,"error"),this.fatal=x(be,k,"fatal"),this.warn=x(be,k,"warn"),this.info=x(be,k,"info"),this.debug=x(be,k,"debug"),this.trace=x(be,k,"trace"),ie&&(this.serializers=ie,this._serialize=ye),c&&(this._logEvent=q([].concat(be._logEvent.bindings,k)))}return le.prototype=this,new le(this)}return b}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=r,o.stdTimeFunctions=Object.assign({},{nullTime:ue,epochTime:j,unixTime:M,isoTime:P});function f(S,c,y,Z){const l=Object.getPrototypeOf(c);c[y]=c.levelVal>c.levels.values[y]?ee:l[y]?l[y]:t[y]||t[Z]||ee,m(S,c,y)}function m(S,c,y){!S.transmit&&c[y]===ee||(c[y]=function(Z){return function(){const d=S.timestamp(),v=new Array(arguments.length),I=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var b=0;b<v.length;b++)v[b]=arguments[b];if(S.serialize&&!S.asObject&&w(v,this._serialize,this.serializers,this._stdErrSerialize),S.asObject?Z.call(I,g(this,y,v,d)):Z.apply(I,v),S.transmit){const p=S.transmit.level||c.level,F=o.levels.values[p],L=o.levels.values[y];if(L<F)return;A(this,{ts:d,methodLevel:y,methodValue:L,transmitLevel:p,transmitValue:o.levels.values[S.transmit.level||c.level],send:S.transmit.send,val:c.levelVal},v)}}}(c[y]))}function g(S,c,y,Z){S._serialize&&w(y,S._serialize,S.serializers,S._stdErrSerialize);const l=y.slice();let d=l[0];const v={};Z&&(v.time=Z),v.level=o.levels.values[c];let I=(S._childLevel|0)+1;if(I<1&&(I=1),d!==null&&typeof d=="object"){for(;I--&&typeof l[0]=="object";)Object.assign(v,l.shift());d=l.length?n(l.shift(),l):void 0}else typeof d=="string"&&(d=n(l.shift(),l));return d!==void 0&&(v.msg=d),v}function w(S,c,y,Z){for(const l in S)if(Z&&S[l]instanceof Error)S[l]=o.stdSerializers.err(S[l]);else if(typeof S[l]=="object"&&!Array.isArray(S[l]))for(const d in S[l])c&&c.indexOf(d)>-1&&d in y&&(S[l][d]=y[d](S[l][d]))}function x(S,c,y){return function(){const Z=new Array(1+arguments.length);Z[0]=c;for(var l=1;l<Z.length;l++)Z[l]=arguments[l-1];return S[y].apply(this,Z)}}function A(S,c,y){const Z=c.send,l=c.ts,d=c.methodLevel,v=c.methodValue,I=c.val,b=S._logEvent.bindings;w(y,S._serialize||Object.keys(S.serializers),S.serializers,S._stdErrSerialize===void 0?!0:S._stdErrSerialize),S._logEvent.ts=l,S._logEvent.messages=y.filter(function(p){return b.indexOf(p)===-1}),S._logEvent.level.label=d,S._logEvent.level.value=v,Z(d,S._logEvent,I),S._logEvent=q(b)}function q(S){return{ts:0,messages:[],bindings:S||[],level:{label:"",value:0}}}function W(S){const c={type:S.constructor.name,msg:S.message,stack:S.stack};for(const y in S)c[y]===void 0&&(c[y]=S[y]);return c}function H(S){return typeof S.timestamp=="function"?S.timestamp:S.timestamp===!1?ue:j}function $(){return{}}function X(S){return S}function ee(){}function ue(){return!1}function j(){return Date.now()}function M(){return Math.round(Date.now()/1e3)}function P(){return new Date(Date.now()).toISOString()}function N(){function S(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return S(self)||S(window)||S(this)||{}}}return mc}var Wi={},Ql;function Ed(){return Ql||(Ql=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.PINO_CUSTOM_CONTEXT_KEY=Wi.PINO_LOGGER_DEFAULTS=void 0,Wi.PINO_LOGGER_DEFAULTS={level:"info"},Wi.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Wi}var sr={},ef;function nE(){if(ef)return sr;ef=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.generateChildLogger=sr.formatChildLoggerContext=sr.getLoggerContext=sr.setBrowserLoggerContext=sr.getBrowserLoggerContext=sr.getDefaultLoggerOptions=void 0;const n=Ed();function t(g){return Object.assign(Object.assign({},g),{level:(g==null?void 0:g.level)||n.PINO_LOGGER_DEFAULTS.level})}sr.getDefaultLoggerOptions=t;function r(g,w=n.PINO_CUSTOM_CONTEXT_KEY){return g[w]||""}sr.getBrowserLoggerContext=r;function s(g,w,x=n.PINO_CUSTOM_CONTEXT_KEY){return g[x]=w,g}sr.setBrowserLoggerContext=s;function o(g,w=n.PINO_CUSTOM_CONTEXT_KEY){let x="";return typeof g.bindings>"u"?x=r(g,w):x=g.bindings().context||"",x}sr.getLoggerContext=o;function f(g,w,x=n.PINO_CUSTOM_CONTEXT_KEY){const A=o(g,x);return A.trim()?`${A}/${w}`:w}sr.formatChildLoggerContext=f;function m(g,w,x=n.PINO_CUSTOM_CONTEXT_KEY){const A=f(g,w,x),q=g.child({context:A});return s(q,A,x)}return sr.generateChildLogger=m,sr}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const t=tE,r=t.__importDefault(iE());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return r.default}}),t.__exportStar(Ed(),n),t.__exportStar(nE(),n)})(Qe);class sE extends Qi{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class aE extends Qi{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}}class oE{constructor(t,r){this.logger=t,this.core=r}}let cE=class extends Qi{constructor(t,r){super(),this.relayer=t,this.logger=r}},uE=class extends Qi{constructor(t){super()}},hE=class{constructor(t,r,s,o){this.core=t,this.logger=r,this.name=s}};class lE extends Qi{constructor(t,r){super(),this.relayer=t,this.logger=r}}class fE extends Qi{constructor(t,r){super(),this.core=t,this.logger=r}}let dE=class{constructor(t,r){this.projectId=t,this.logger=r}},pE=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}};class gE{constructor(t){this.client=t}}var lu={},Dd={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=je,r=Sr;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function g(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return g.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},g.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},g.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},g.prototype.update=function(w,x){if(x===void 0&&(x=w.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var A=0;if(this._bytesHashed+=x,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&x>0;)this._buffer[this._bufferLength++]=w[A++],x--;this._bufferLength===this.blockSize&&(f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(x>=this.blockSize&&(A=f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,w,A,x),x%=this.blockSize);x>0;)this._buffer[this._bufferLength++]=w[A++],x--;return this},g.prototype.finish=function(w){if(!this._finished){var x=this._bytesHashed,A=this._bufferLength,q=x/536870912|0,W=x<<3,H=x%128<112?128:256;this._buffer[A]=128;for(var $=A+1;$<H-8;$++)this._buffer[$]=0;t.writeUint32BE(q,this._buffer,H-8),t.writeUint32BE(W,this._buffer,H-4),f(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,H),this._finished=!0}for(var $=0;$<this.digestLength/8;$++)t.writeUint32BE(this._stateHi[$],w,$*8),t.writeUint32BE(this._stateLo[$],w,$*8+4);return this},g.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},g.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},g.prototype.restoreState=function(w){return this._stateHi.set(w.stateHi),this._stateLo.set(w.stateLo),this._bufferLength=w.bufferLength,w.buffer&&this._buffer.set(w.buffer),this._bytesHashed=w.bytesHashed,this._finished=!1,this},g.prototype.cleanSavedState=function(w){r.wipe(w.stateHi),r.wipe(w.stateLo),w.buffer&&r.wipe(w.buffer),w.bufferLength=0,w.bytesHashed=0},g}();n.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function f(g,w,x,A,q,W,H){for(var $=x[0],X=x[1],ee=x[2],ue=x[3],j=x[4],M=x[5],P=x[6],N=x[7],S=A[0],c=A[1],y=A[2],Z=A[3],l=A[4],d=A[5],v=A[6],I=A[7],b,p,F,L,J,C,k,te;H>=128;){for(var se=0;se<16;se++){var ie=8*se+W;g[se]=t.readUint32BE(q,ie),w[se]=t.readUint32BE(q,ie+4)}for(var se=0;se<80;se++){var ye=$,le=X,be=ee,Y=ue,G=j,z=M,h=P,R=N,he=S,pe=c,Ie=y,He=Z,Ve=l,$e=d,dt=v,pt=I;if(b=N,p=I,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=(j>>>14|l<<32-14)^(j>>>18|l<<32-18)^(l>>>41-32|j<<32-(41-32)),p=(l>>>14|j<<32-14)^(l>>>18|j<<32-18)^(j>>>41-32|l<<32-(41-32)),J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,b=j&M^~j&P,p=l&d^~l&v,J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,b=o[se*2],p=o[se*2+1],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,b=g[se%16],p=w[se%16],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,F=k&65535|te<<16,L=J&65535|C<<16,b=F,p=L,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=($>>>28|S<<32-28)^(S>>>34-32|$<<32-(34-32))^(S>>>39-32|$<<32-(39-32)),p=(S>>>28|$<<32-28)^($>>>34-32|S<<32-(34-32))^($>>>39-32|S<<32-(39-32)),J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,b=$&X^$&ee^X&ee,p=S&c^S&y^c&y,J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,R=k&65535|te<<16,pt=J&65535|C<<16,b=Y,p=He,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=F,p=L,J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,Y=k&65535|te<<16,He=J&65535|C<<16,X=ye,ee=le,ue=be,j=Y,M=G,P=z,N=h,$=R,c=he,y=pe,Z=Ie,l=He,d=Ve,v=$e,I=dt,S=pt,se%16===15)for(var ie=0;ie<16;ie++)b=g[ie],p=w[ie],J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=g[(ie+9)%16],p=w[(ie+9)%16],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,F=g[(ie+1)%16],L=w[(ie+1)%16],b=(F>>>1|L<<32-1)^(F>>>8|L<<32-8)^F>>>7,p=(L>>>1|F<<32-1)^(L>>>8|F<<32-8)^(L>>>7|F<<32-7),J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,F=g[(ie+14)%16],L=w[(ie+14)%16],b=(F>>>19|L<<32-19)^(L>>>61-32|F<<32-(61-32))^F>>>6,p=(L>>>19|F<<32-19)^(F>>>61-32|L<<32-(61-32))^(L>>>6|F<<32-6),J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,g[ie]=k&65535|te<<16,w[ie]=J&65535|C<<16}b=$,p=S,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=x[0],p=A[0],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,x[0]=$=k&65535|te<<16,A[0]=S=J&65535|C<<16,b=X,p=c,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=x[1],p=A[1],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,x[1]=X=k&65535|te<<16,A[1]=c=J&65535|C<<16,b=ee,p=y,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=x[2],p=A[2],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,x[2]=ee=k&65535|te<<16,A[2]=y=J&65535|C<<16,b=ue,p=Z,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=x[3],p=A[3],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,x[3]=ue=k&65535|te<<16,A[3]=Z=J&65535|C<<16,b=j,p=l,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=x[4],p=A[4],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,x[4]=j=k&65535|te<<16,A[4]=l=J&65535|C<<16,b=M,p=d,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=x[5],p=A[5],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,x[5]=M=k&65535|te<<16,A[5]=d=J&65535|C<<16,b=P,p=v,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=x[6],p=A[6],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,x[6]=P=k&65535|te<<16,A[6]=v=J&65535|C<<16,b=N,p=I,J=p&65535,C=p>>>16,k=b&65535,te=b>>>16,b=x[7],p=A[7],J+=p&65535,C+=p>>>16,k+=b&65535,te+=b>>>16,C+=J>>>16,k+=C>>>16,te+=k>>>16,x[7]=N=k&65535|te<<16,A[7]=I=J&65535|C<<16,W+=128,H-=128}return W}function m(g){var w=new s;w.update(g);var x=w.digest();return w.clean(),x}n.hash=m})(Dd);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const t=On,r=Dd,s=Sr;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function o(Y){const G=new Float64Array(16);if(Y)for(let z=0;z<Y.length;z++)G[z]=Y[z];return G}const f=new Uint8Array(32);f[0]=9;const m=o(),g=o([1]),w=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),x=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),A=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),q=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),W=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function H(Y,G){for(let z=0;z<16;z++)Y[z]=G[z]|0}function $(Y){let G=1;for(let z=0;z<16;z++){let h=Y[z]+G+65535;G=Math.floor(h/65536),Y[z]=h-G*65536}Y[0]+=G-1+37*(G-1)}function X(Y,G,z){const h=~(z-1);for(let R=0;R<16;R++){const he=h&(Y[R]^G[R]);Y[R]^=he,G[R]^=he}}function ee(Y,G){const z=o(),h=o();for(let R=0;R<16;R++)h[R]=G[R];$(h),$(h),$(h);for(let R=0;R<2;R++){z[0]=h[0]-65517;for(let pe=1;pe<15;pe++)z[pe]=h[pe]-65535-(z[pe-1]>>16&1),z[pe-1]&=65535;z[15]=h[15]-32767-(z[14]>>16&1);const he=z[15]>>16&1;z[14]&=65535,X(h,z,1-he)}for(let R=0;R<16;R++)Y[2*R]=h[R]&255,Y[2*R+1]=h[R]>>8}function ue(Y,G){let z=0;for(let h=0;h<32;h++)z|=Y[h]^G[h];return(1&z-1>>>8)-1}function j(Y,G){const z=new Uint8Array(32),h=new Uint8Array(32);return ee(z,Y),ee(h,G),ue(z,h)}function M(Y){const G=new Uint8Array(32);return ee(G,Y),G[0]&1}function P(Y,G){for(let z=0;z<16;z++)Y[z]=G[2*z]+(G[2*z+1]<<8);Y[15]&=32767}function N(Y,G,z){for(let h=0;h<16;h++)Y[h]=G[h]+z[h]}function S(Y,G,z){for(let h=0;h<16;h++)Y[h]=G[h]-z[h]}function c(Y,G,z){let h,R,he=0,pe=0,Ie=0,He=0,Ve=0,$e=0,dt=0,pt=0,Me=0,Oe=0,Re=0,Fe=0,ze=0,Pe=0,Ue=0,Se=0,Ce=0,Be=0,xe=0,ke=0,We=0,et=0,tt=0,Je=0,Qt=0,hr=0,Br=0,er=0,ei=0,pi=0,Ti=0,mt=z[0],gt=z[1],wt=z[2],Et=z[3],vt=z[4],_t=z[5],Ft=z[6],Ut=z[7],Dt=z[8],jt=z[9],St=z[10],Pt=z[11],It=z[12],ht=z[13],$t=z[14],Lt=z[15];h=G[0],he+=h*mt,pe+=h*gt,Ie+=h*wt,He+=h*Et,Ve+=h*vt,$e+=h*_t,dt+=h*Ft,pt+=h*Ut,Me+=h*Dt,Oe+=h*jt,Re+=h*St,Fe+=h*Pt,ze+=h*It,Pe+=h*ht,Ue+=h*$t,Se+=h*Lt,h=G[1],pe+=h*mt,Ie+=h*gt,He+=h*wt,Ve+=h*Et,$e+=h*vt,dt+=h*_t,pt+=h*Ft,Me+=h*Ut,Oe+=h*Dt,Re+=h*jt,Fe+=h*St,ze+=h*Pt,Pe+=h*It,Ue+=h*ht,Se+=h*$t,Ce+=h*Lt,h=G[2],Ie+=h*mt,He+=h*gt,Ve+=h*wt,$e+=h*Et,dt+=h*vt,pt+=h*_t,Me+=h*Ft,Oe+=h*Ut,Re+=h*Dt,Fe+=h*jt,ze+=h*St,Pe+=h*Pt,Ue+=h*It,Se+=h*ht,Ce+=h*$t,Be+=h*Lt,h=G[3],He+=h*mt,Ve+=h*gt,$e+=h*wt,dt+=h*Et,pt+=h*vt,Me+=h*_t,Oe+=h*Ft,Re+=h*Ut,Fe+=h*Dt,ze+=h*jt,Pe+=h*St,Ue+=h*Pt,Se+=h*It,Ce+=h*ht,Be+=h*$t,xe+=h*Lt,h=G[4],Ve+=h*mt,$e+=h*gt,dt+=h*wt,pt+=h*Et,Me+=h*vt,Oe+=h*_t,Re+=h*Ft,Fe+=h*Ut,ze+=h*Dt,Pe+=h*jt,Ue+=h*St,Se+=h*Pt,Ce+=h*It,Be+=h*ht,xe+=h*$t,ke+=h*Lt,h=G[5],$e+=h*mt,dt+=h*gt,pt+=h*wt,Me+=h*Et,Oe+=h*vt,Re+=h*_t,Fe+=h*Ft,ze+=h*Ut,Pe+=h*Dt,Ue+=h*jt,Se+=h*St,Ce+=h*Pt,Be+=h*It,xe+=h*ht,ke+=h*$t,We+=h*Lt,h=G[6],dt+=h*mt,pt+=h*gt,Me+=h*wt,Oe+=h*Et,Re+=h*vt,Fe+=h*_t,ze+=h*Ft,Pe+=h*Ut,Ue+=h*Dt,Se+=h*jt,Ce+=h*St,Be+=h*Pt,xe+=h*It,ke+=h*ht,We+=h*$t,et+=h*Lt,h=G[7],pt+=h*mt,Me+=h*gt,Oe+=h*wt,Re+=h*Et,Fe+=h*vt,ze+=h*_t,Pe+=h*Ft,Ue+=h*Ut,Se+=h*Dt,Ce+=h*jt,Be+=h*St,xe+=h*Pt,ke+=h*It,We+=h*ht,et+=h*$t,tt+=h*Lt,h=G[8],Me+=h*mt,Oe+=h*gt,Re+=h*wt,Fe+=h*Et,ze+=h*vt,Pe+=h*_t,Ue+=h*Ft,Se+=h*Ut,Ce+=h*Dt,Be+=h*jt,xe+=h*St,ke+=h*Pt,We+=h*It,et+=h*ht,tt+=h*$t,Je+=h*Lt,h=G[9],Oe+=h*mt,Re+=h*gt,Fe+=h*wt,ze+=h*Et,Pe+=h*vt,Ue+=h*_t,Se+=h*Ft,Ce+=h*Ut,Be+=h*Dt,xe+=h*jt,ke+=h*St,We+=h*Pt,et+=h*It,tt+=h*ht,Je+=h*$t,Qt+=h*Lt,h=G[10],Re+=h*mt,Fe+=h*gt,ze+=h*wt,Pe+=h*Et,Ue+=h*vt,Se+=h*_t,Ce+=h*Ft,Be+=h*Ut,xe+=h*Dt,ke+=h*jt,We+=h*St,et+=h*Pt,tt+=h*It,Je+=h*ht,Qt+=h*$t,hr+=h*Lt,h=G[11],Fe+=h*mt,ze+=h*gt,Pe+=h*wt,Ue+=h*Et,Se+=h*vt,Ce+=h*_t,Be+=h*Ft,xe+=h*Ut,ke+=h*Dt,We+=h*jt,et+=h*St,tt+=h*Pt,Je+=h*It,Qt+=h*ht,hr+=h*$t,Br+=h*Lt,h=G[12],ze+=h*mt,Pe+=h*gt,Ue+=h*wt,Se+=h*Et,Ce+=h*vt,Be+=h*_t,xe+=h*Ft,ke+=h*Ut,We+=h*Dt,et+=h*jt,tt+=h*St,Je+=h*Pt,Qt+=h*It,hr+=h*ht,Br+=h*$t,er+=h*Lt,h=G[13],Pe+=h*mt,Ue+=h*gt,Se+=h*wt,Ce+=h*Et,Be+=h*vt,xe+=h*_t,ke+=h*Ft,We+=h*Ut,et+=h*Dt,tt+=h*jt,Je+=h*St,Qt+=h*Pt,hr+=h*It,Br+=h*ht,er+=h*$t,ei+=h*Lt,h=G[14],Ue+=h*mt,Se+=h*gt,Ce+=h*wt,Be+=h*Et,xe+=h*vt,ke+=h*_t,We+=h*Ft,et+=h*Ut,tt+=h*Dt,Je+=h*jt,Qt+=h*St,hr+=h*Pt,Br+=h*It,er+=h*ht,ei+=h*$t,pi+=h*Lt,h=G[15],Se+=h*mt,Ce+=h*gt,Be+=h*wt,xe+=h*Et,ke+=h*vt,We+=h*_t,et+=h*Ft,tt+=h*Ut,Je+=h*Dt,Qt+=h*jt,hr+=h*St,Br+=h*Pt,er+=h*It,ei+=h*ht,pi+=h*$t,Ti+=h*Lt,he+=38*Ce,pe+=38*Be,Ie+=38*xe,He+=38*ke,Ve+=38*We,$e+=38*et,dt+=38*tt,pt+=38*Je,Me+=38*Qt,Oe+=38*hr,Re+=38*Br,Fe+=38*er,ze+=38*ei,Pe+=38*pi,Ue+=38*Ti,R=1,h=he+R+65535,R=Math.floor(h/65536),he=h-R*65536,h=pe+R+65535,R=Math.floor(h/65536),pe=h-R*65536,h=Ie+R+65535,R=Math.floor(h/65536),Ie=h-R*65536,h=He+R+65535,R=Math.floor(h/65536),He=h-R*65536,h=Ve+R+65535,R=Math.floor(h/65536),Ve=h-R*65536,h=$e+R+65535,R=Math.floor(h/65536),$e=h-R*65536,h=dt+R+65535,R=Math.floor(h/65536),dt=h-R*65536,h=pt+R+65535,R=Math.floor(h/65536),pt=h-R*65536,h=Me+R+65535,R=Math.floor(h/65536),Me=h-R*65536,h=Oe+R+65535,R=Math.floor(h/65536),Oe=h-R*65536,h=Re+R+65535,R=Math.floor(h/65536),Re=h-R*65536,h=Fe+R+65535,R=Math.floor(h/65536),Fe=h-R*65536,h=ze+R+65535,R=Math.floor(h/65536),ze=h-R*65536,h=Pe+R+65535,R=Math.floor(h/65536),Pe=h-R*65536,h=Ue+R+65535,R=Math.floor(h/65536),Ue=h-R*65536,h=Se+R+65535,R=Math.floor(h/65536),Se=h-R*65536,he+=R-1+37*(R-1),R=1,h=he+R+65535,R=Math.floor(h/65536),he=h-R*65536,h=pe+R+65535,R=Math.floor(h/65536),pe=h-R*65536,h=Ie+R+65535,R=Math.floor(h/65536),Ie=h-R*65536,h=He+R+65535,R=Math.floor(h/65536),He=h-R*65536,h=Ve+R+65535,R=Math.floor(h/65536),Ve=h-R*65536,h=$e+R+65535,R=Math.floor(h/65536),$e=h-R*65536,h=dt+R+65535,R=Math.floor(h/65536),dt=h-R*65536,h=pt+R+65535,R=Math.floor(h/65536),pt=h-R*65536,h=Me+R+65535,R=Math.floor(h/65536),Me=h-R*65536,h=Oe+R+65535,R=Math.floor(h/65536),Oe=h-R*65536,h=Re+R+65535,R=Math.floor(h/65536),Re=h-R*65536,h=Fe+R+65535,R=Math.floor(h/65536),Fe=h-R*65536,h=ze+R+65535,R=Math.floor(h/65536),ze=h-R*65536,h=Pe+R+65535,R=Math.floor(h/65536),Pe=h-R*65536,h=Ue+R+65535,R=Math.floor(h/65536),Ue=h-R*65536,h=Se+R+65535,R=Math.floor(h/65536),Se=h-R*65536,he+=R-1+37*(R-1),Y[0]=he,Y[1]=pe,Y[2]=Ie,Y[3]=He,Y[4]=Ve,Y[5]=$e,Y[6]=dt,Y[7]=pt,Y[8]=Me,Y[9]=Oe,Y[10]=Re,Y[11]=Fe,Y[12]=ze,Y[13]=Pe,Y[14]=Ue,Y[15]=Se}function y(Y,G){c(Y,G,G)}function Z(Y,G){const z=o();let h;for(h=0;h<16;h++)z[h]=G[h];for(h=253;h>=0;h--)y(z,z),h!==2&&h!==4&&c(z,z,G);for(h=0;h<16;h++)Y[h]=z[h]}function l(Y,G){const z=o();let h;for(h=0;h<16;h++)z[h]=G[h];for(h=250;h>=0;h--)y(z,z),h!==1&&c(z,z,G);for(h=0;h<16;h++)Y[h]=z[h]}function d(Y,G){const z=o(),h=o(),R=o(),he=o(),pe=o(),Ie=o(),He=o(),Ve=o(),$e=o();S(z,Y[1],Y[0]),S($e,G[1],G[0]),c(z,z,$e),N(h,Y[0],Y[1]),N($e,G[0],G[1]),c(h,h,$e),c(R,Y[3],G[3]),c(R,R,x),c(he,Y[2],G[2]),N(he,he,he),S(pe,h,z),S(Ie,he,R),N(He,he,R),N(Ve,h,z),c(Y[0],pe,Ie),c(Y[1],Ve,He),c(Y[2],He,Ie),c(Y[3],pe,Ve)}function v(Y,G,z){for(let h=0;h<4;h++)X(Y[h],G[h],z)}function I(Y,G){const z=o(),h=o(),R=o();Z(R,G[2]),c(z,G[0],R),c(h,G[1],R),ee(Y,h),Y[31]^=M(z)<<7}function b(Y,G,z){H(Y[0],m),H(Y[1],g),H(Y[2],g),H(Y[3],m);for(let h=255;h>=0;--h){const R=z[h/8|0]>>(h&7)&1;v(Y,G,R),d(G,Y),d(Y,Y),v(Y,G,R)}}function p(Y,G){const z=[o(),o(),o(),o()];H(z[0],A),H(z[1],q),H(z[2],g),c(z[3],A,q),b(Y,z,G)}function F(Y){if(Y.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const G=(0,r.hash)(Y);G[0]&=248,G[31]&=127,G[31]|=64;const z=new Uint8Array(32),h=[o(),o(),o(),o()];p(h,G),I(z,h);const R=new Uint8Array(64);return R.set(Y),R.set(z,32),{publicKey:z,secretKey:R}}n.generateKeyPairFromSeed=F;function L(Y){const G=(0,t.randomBytes)(32,Y),z=F(G);return(0,s.wipe)(G),z}n.generateKeyPair=L;function J(Y){if(Y.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(Y.subarray(32))}n.extractPublicKeyFromSecretKey=J;const C=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function k(Y,G){let z,h,R,he;for(h=63;h>=32;--h){for(z=0,R=h-32,he=h-12;R<he;++R)G[R]+=z-16*G[h]*C[R-(h-32)],z=Math.floor((G[R]+128)/256),G[R]-=z*256;G[R]+=z,G[h]=0}for(z=0,R=0;R<32;R++)G[R]+=z-(G[31]>>4)*C[R],z=G[R]>>8,G[R]&=255;for(R=0;R<32;R++)G[R]-=z*C[R];for(h=0;h<32;h++)G[h+1]+=G[h]>>8,Y[h]=G[h]&255}function te(Y){const G=new Float64Array(64);for(let z=0;z<64;z++)G[z]=Y[z];for(let z=0;z<64;z++)Y[z]=0;k(Y,G)}function se(Y,G){const z=new Float64Array(64),h=[o(),o(),o(),o()],R=(0,r.hash)(Y.subarray(0,32));R[0]&=248,R[31]&=127,R[31]|=64;const he=new Uint8Array(64);he.set(R.subarray(32),32);const pe=new r.SHA512;pe.update(he.subarray(32)),pe.update(G);const Ie=pe.digest();pe.clean(),te(Ie),p(h,Ie),I(he,h),pe.reset(),pe.update(he.subarray(0,32)),pe.update(Y.subarray(32)),pe.update(G);const He=pe.digest();te(He);for(let Ve=0;Ve<32;Ve++)z[Ve]=Ie[Ve];for(let Ve=0;Ve<32;Ve++)for(let $e=0;$e<32;$e++)z[Ve+$e]+=He[Ve]*R[$e];return k(he.subarray(32),z),he}n.sign=se;function ie(Y,G){const z=o(),h=o(),R=o(),he=o(),pe=o(),Ie=o(),He=o();return H(Y[2],g),P(Y[1],G),y(R,Y[1]),c(he,R,w),S(R,R,Y[2]),N(he,Y[2],he),y(pe,he),y(Ie,pe),c(He,Ie,pe),c(z,He,R),c(z,z,he),l(z,z),c(z,z,R),c(z,z,he),c(z,z,he),c(Y[0],z,he),y(h,Y[0]),c(h,h,he),j(h,R)&&c(Y[0],Y[0],W),y(h,Y[0]),c(h,h,he),j(h,R)?-1:(M(Y[0])===G[31]>>7&&S(Y[0],m,Y[0]),c(Y[3],Y[0],Y[1]),0)}function ye(Y,G,z){const h=new Uint8Array(32),R=[o(),o(),o(),o()],he=[o(),o(),o(),o()];if(z.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(ie(he,Y))return!1;const pe=new r.SHA512;pe.update(z.subarray(0,32)),pe.update(Y),pe.update(G);const Ie=pe.digest();return te(Ie),b(R,he,Ie),p(he,z.subarray(32)),d(R,he),I(h,R),!ue(z,h)}n.verify=ye;function le(Y){let G=[o(),o(),o(),o()];if(ie(G,Y))throw new Error("Ed25519: invalid public key");let z=o(),h=o(),R=G[1];N(z,g,R),S(h,g,R),Z(h,h),c(z,z,h);let he=new Uint8Array(32);return ee(he,z),he}n.convertPublicKeyToX25519=le;function be(Y){const G=(0,r.hash)(Y.subarray(0,32));G[0]&=248,G[31]&=127,G[31]|=64;const z=new Uint8Array(G.subarray(0,32));return(0,s.wipe)(G),z}n.convertSecretKeyToX25519=be})(lu);const _E="EdDSA",yE="JWT",Sd=".",Id="base64url",vE="utf8",bE="utf8",mE=":",wE="did",EE="key",tf="base58btc",DE="z",SE="K36",IE=32;function Oa(n){return ur(yr(Yc(n),vE),Id)}function Od(n){const t=yr(SE,tf),r=DE+ur(jc([t,n]),tf);return[wE,EE,r].join(mE)}function OE(n){return ur(n,Id)}function xE(n){return yr([Oa(n.header),Oa(n.payload)].join(Sd),bE)}function PE(n){return[Oa(n.header),Oa(n.payload),OE(n.signature)].join(Sd)}function rf(n=On.randomBytes(IE)){return lu.generateKeyPairFromSeed(n)}async function CE(n,t,r,s,o=me.fromMiliseconds(Date.now())){const f={alg:_E,typ:yE},m=Od(s.publicKey),g=o+r,w={iss:m,sub:n,aud:t,iat:o,exp:g},x=xE({header:f,payload:w}),A=lu.sign(s.secretKey,x);return PE({header:f,payload:w,signature:A})}const nf=10,AE=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),TE=()=>typeof window<"u",NE=AE();class RE{constructor(t){if(this.url=t,this.events=new Qr.EventEmitter,this.registering=!1,!gl(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),t()},this.socket.close()})}async send(t,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Yc(t))}catch(s){this.onError(t.id,s)}}register(t=this.url){if(!gl(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,o)=>{this.events.once("register_error",f=>{this.resetMaxListeners(),o(f)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,s)=>{const o=$v.isReactNative()?void 0:{rejectUnauthorized:!Lv(t)},f=new NE(t,[],o);TE()?f.onerror=m=>{const g=m;s(this.emitError(g.error))}:f.on("error",m=>{s(this.emitError(m))}),f.onopen=()=>{this.onOpen(f),r(f)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?jf(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const s=this.parseError(r),o=s.message||s.toString(),f=Jc(t,o);this.events.emit("payload",f)}parseError(t,r=this.url){return Mv(t,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>nf&&this.events.setMaxListeners(nf)}emitError(t){const r=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var xa={exports:{}};xa.exports;(function(n,t){var r=200,s="__lodash_hash_undefined__",o=1,f=2,m=9007199254740991,g="[object Arguments]",w="[object Array]",x="[object AsyncFunction]",A="[object Boolean]",q="[object Date]",W="[object Error]",H="[object Function]",$="[object GeneratorFunction]",X="[object Map]",ee="[object Number]",ue="[object Null]",j="[object Object]",M="[object Promise]",P="[object Proxy]",N="[object RegExp]",S="[object Set]",c="[object String]",y="[object Symbol]",Z="[object Undefined]",l="[object WeakMap]",d="[object ArrayBuffer]",v="[object DataView]",I="[object Float32Array]",b="[object Float64Array]",p="[object Int8Array]",F="[object Int16Array]",L="[object Int32Array]",J="[object Uint8Array]",C="[object Uint8ClampedArray]",k="[object Uint16Array]",te="[object Uint32Array]",se=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,ye=/^(?:0|[1-9]\d*)$/,le={};le[I]=le[b]=le[p]=le[F]=le[L]=le[J]=le[C]=le[k]=le[te]=!0,le[g]=le[w]=le[d]=le[A]=le[v]=le[q]=le[W]=le[H]=le[X]=le[ee]=le[j]=le[N]=le[S]=le[c]=le[l]=!1;var be=typeof or=="object"&&or&&or.Object===Object&&or,Y=typeof self=="object"&&self&&self.Object===Object&&self,G=be||Y||Function("return this")(),z=t&&!t.nodeType&&t,h=z&&!0&&n&&!n.nodeType&&n,R=h&&h.exports===z,he=R&&be.process,pe=function(){try{return he&&he.binding&&he.binding("util")}catch{}}(),Ie=pe&&pe.isTypedArray;function He(O,B){for(var oe=-1,ge=O==null?0:O.length,ot=0,Te=[];++oe<ge;){var lt=O[oe];B(lt,oe,O)&&(Te[ot++]=lt)}return Te}function Ve(O,B){for(var oe=-1,ge=B.length,ot=O.length;++oe<ge;)O[ot+oe]=B[oe];return O}function $e(O,B){for(var oe=-1,ge=O==null?0:O.length;++oe<ge;)if(B(O[oe],oe,O))return!0;return!1}function dt(O,B){for(var oe=-1,ge=Array(O);++oe<O;)ge[oe]=B(oe);return ge}function pt(O){return function(B){return O(B)}}function Me(O,B){return O.has(B)}function Oe(O,B){return O==null?void 0:O[B]}function Re(O){var B=-1,oe=Array(O.size);return O.forEach(function(ge,ot){oe[++B]=[ot,ge]}),oe}function Fe(O,B){return function(oe){return O(B(oe))}}function ze(O){var B=-1,oe=Array(O.size);return O.forEach(function(ge){oe[++B]=ge}),oe}var Pe=Array.prototype,Ue=Function.prototype,Se=Object.prototype,Ce=G["__core-js_shared__"],Be=Ue.toString,xe=Se.hasOwnProperty,ke=function(){var O=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return O?"Symbol(src)_1."+O:""}(),We=Se.toString,et=RegExp("^"+Be.call(xe).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=R?G.Buffer:void 0,Je=G.Symbol,Qt=G.Uint8Array,hr=Se.propertyIsEnumerable,Br=Pe.splice,er=Je?Je.toStringTag:void 0,ei=Object.getOwnPropertySymbols,pi=tt?tt.isBuffer:void 0,Ti=Fe(Object.keys,Object),mt=vr(G,"DataView"),gt=vr(G,"Map"),wt=vr(G,"Promise"),Et=vr(G,"Set"),vt=vr(G,"WeakMap"),_t=vr(Object,"create"),Ft=ri(mt),Ut=ri(gt),Dt=ri(wt),jt=ri(Et),St=ri(vt),Pt=Je?Je.prototype:void 0,It=Pt?Pt.valueOf:void 0;function ht(O){var B=-1,oe=O==null?0:O.length;for(this.clear();++B<oe;){var ge=O[B];this.set(ge[0],ge[1])}}function $t(){this.__data__=_t?_t(null):{},this.size=0}function Lt(O){var B=this.has(O)&&delete this.__data__[O];return this.size-=B?1:0,B}function Ma(O){var B=this.__data__;if(_t){var oe=B[O];return oe===s?void 0:oe}return xe.call(B,O)?B[O]:void 0}function za(O){var B=this.__data__;return _t?B[O]!==void 0:xe.call(B,O)}function qa(O,B){var oe=this.__data__;return this.size+=this.has(O)?0:1,oe[O]=_t&&B===void 0?s:B,this}ht.prototype.clear=$t,ht.prototype.delete=Lt,ht.prototype.get=Ma,ht.prototype.has=za,ht.prototype.set=qa;function Ir(O){var B=-1,oe=O==null?0:O.length;for(this.clear();++B<oe;){var ge=O[B];this.set(ge[0],ge[1])}}function Ha(){this.__data__=[],this.size=0}function Ba(O){var B=this.__data__,oe=Ni(B,O);if(oe<0)return!1;var ge=B.length-1;return oe==ge?B.pop():Br.call(B,oe,1),--this.size,!0}function Ka(O){var B=this.__data__,oe=Ni(B,O);return oe<0?void 0:B[oe][1]}function Va(O){return Ni(this.__data__,O)>-1}function ka(O,B){var oe=this.__data__,ge=Ni(oe,O);return ge<0?(++this.size,oe.push([O,B])):oe[ge][1]=B,this}Ir.prototype.clear=Ha,Ir.prototype.delete=Ba,Ir.prototype.get=Ka,Ir.prototype.has=Va,Ir.prototype.set=ka;function ti(O){var B=-1,oe=O==null?0:O.length;for(this.clear();++B<oe;){var ge=O[B];this.set(ge[0],ge[1])}}function en(){this.size=0,this.__data__={hash:new ht,map:new(gt||Ir),string:new ht}}function Ga(O){var B=gi(this,O).delete(O);return this.size-=B?1:0,B}function tn(O){return gi(this,O).get(O)}function Wa(O){return gi(this,O).has(O)}function Ya(O,B){var oe=gi(this,O),ge=oe.size;return oe.set(O,B),this.size+=oe.size==ge?0:1,this}ti.prototype.clear=en,ti.prototype.delete=Ga,ti.prototype.get=tn,ti.prototype.has=Wa,ti.prototype.set=Ya;function rn(O){var B=-1,oe=O==null?0:O.length;for(this.__data__=new ti;++B<oe;)this.add(O[B])}function fs(O){return this.__data__.set(O,s),this}function ds(O){return this.__data__.has(O)}rn.prototype.add=rn.prototype.push=fs,rn.prototype.has=ds;function $r(O){var B=this.__data__=new Ir(O);this.size=B.size}function Ja(){this.__data__=new Ir,this.size=0}function Xa(O){var B=this.__data__,oe=B.delete(O);return this.size=B.size,oe}function Za(O){return this.__data__.get(O)}function Qa(O){return this.__data__.has(O)}function ps(O,B){var oe=this.__data__;if(oe instanceof Ir){var ge=oe.__data__;if(!gt||ge.length<r-1)return ge.push([O,B]),this.size=++oe.size,this;oe=this.__data__=new ti(ge)}return oe.set(O,B),this.size=oe.size,this}$r.prototype.clear=Ja,$r.prototype.delete=Xa,$r.prototype.get=Za,$r.prototype.has=Qa,$r.prototype.set=ps;function gs(O,B){var oe=an(O),ge=!oe&&xs(O),ot=!oe&&!ge&&An(O),Te=!oe&&!ge&&!ot&&As(O),lt=oe||ge||ot||Te,Mt=lt?dt(O.length,String):[],Xe=Mt.length;for(var ct in O)(B||xe.call(O,ct))&&!(lt&&(ct=="length"||ot&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Es(ct,Xe)))&&Mt.push(ct);return Mt}function Ni(O,B){for(var oe=O.length;oe--;)if(Os(O[oe][0],B))return oe;return-1}function Pn(O,B,oe){var ge=B(O);return an(O)?ge:Ve(ge,oe(O))}function Ri(O){return O==null?O===void 0?Z:ue:er&&er in Object(O)?ms(O):ro(O)}function Cn(O){return Ui(O)&&Ri(O)==g}function Fi(O,B,oe,ge,ot){return O===B?!0:O==null||B==null||!Ui(O)&&!Ui(B)?O!==O&&B!==B:_s(O,B,oe,ge,Fi,ot)}function _s(O,B,oe,ge,ot,Te){var lt=an(O),Mt=an(B),Xe=lt?w:Kr(O),ct=Mt?w:Kr(B);Xe=Xe==g?j:Xe,ct=ct==g?j:ct;var Ct=Xe==j,lr=ct==j,zt=Xe==ct;if(zt&&An(O)){if(!An(B))return!1;lt=!0,Ct=!1}if(zt&&!Ct)return Te||(Te=new $r),lt||As(O)?nn(O,B,oe,ge,ot,Te):to(O,B,Xe,oe,ge,ot,Te);if(!(oe&o)){var ft=Ct&&xe.call(O,"__wrapped__"),tr=lr&&xe.call(B,"__wrapped__");if(ft||tr){var Lr=ft?O.value():O,Or=tr?B.value():B;return Te||(Te=new $r),ot(Lr,Or,oe,ge,Te)}}return zt?(Te||(Te=new $r),bs(O,B,oe,ge,ot,Te)):!1}function eo(O){if(!Cs(O)||Ss(O))return!1;var B=on(O)?et:ie;return B.test(ri(O))}function ys(O){return Ui(O)&&Ps(O.length)&&!!le[Ri(O)]}function vs(O){if(!Is(O))return Ti(O);var B=[];for(var oe in Object(O))xe.call(O,oe)&&oe!="constructor"&&B.push(oe);return B}function nn(O,B,oe,ge,ot,Te){var lt=oe&o,Mt=O.length,Xe=B.length;if(Mt!=Xe&&!(lt&&Xe>Mt))return!1;var ct=Te.get(O);if(ct&&Te.get(B))return ct==B;var Ct=-1,lr=!0,zt=oe&f?new rn:void 0;for(Te.set(O,B),Te.set(B,O);++Ct<Mt;){var ft=O[Ct],tr=B[Ct];if(ge)var Lr=lt?ge(tr,ft,Ct,B,O,Te):ge(ft,tr,Ct,O,B,Te);if(Lr!==void 0){if(Lr)continue;lr=!1;break}if(zt){if(!$e(B,function(Or,Vr){if(!Me(zt,Vr)&&(ft===Or||ot(ft,Or,oe,ge,Te)))return zt.push(Vr)})){lr=!1;break}}else if(!(ft===tr||ot(ft,tr,oe,ge,Te))){lr=!1;break}}return Te.delete(O),Te.delete(B),lr}function to(O,B,oe,ge,ot,Te,lt){switch(oe){case v:if(O.byteLength!=B.byteLength||O.byteOffset!=B.byteOffset)return!1;O=O.buffer,B=B.buffer;case d:return!(O.byteLength!=B.byteLength||!Te(new Qt(O),new Qt(B)));case A:case q:case ee:return Os(+O,+B);case W:return O.name==B.name&&O.message==B.message;case N:case c:return O==B+"";case X:var Mt=Re;case S:var Xe=ge&o;if(Mt||(Mt=ze),O.size!=B.size&&!Xe)return!1;var ct=lt.get(O);if(ct)return ct==B;ge|=f,lt.set(O,B);var Ct=nn(Mt(O),Mt(B),ge,ot,Te,lt);return lt.delete(O),Ct;case y:if(It)return It.call(O)==It.call(B)}return!1}function bs(O,B,oe,ge,ot,Te){var lt=oe&o,Mt=sn(O),Xe=Mt.length,ct=sn(B),Ct=ct.length;if(Xe!=Ct&&!lt)return!1;for(var lr=Xe;lr--;){var zt=Mt[lr];if(!(lt?zt in B:xe.call(B,zt)))return!1}var ft=Te.get(O);if(ft&&Te.get(B))return ft==B;var tr=!0;Te.set(O,B),Te.set(B,O);for(var Lr=lt;++lr<Xe;){zt=Mt[lr];var Or=O[zt],Vr=B[zt];if(ge)var Tn=lt?ge(Vr,Or,zt,B,O,Te):ge(Or,Vr,zt,O,B,Te);if(!(Tn===void 0?Or===Vr||ot(Or,Vr,oe,ge,Te):Tn)){tr=!1;break}Lr||(Lr=zt=="constructor")}if(tr&&!Lr){var ji=O.constructor,Kt=B.constructor;ji!=Kt&&"constructor"in O&&"constructor"in B&&!(typeof ji=="function"&&ji instanceof ji&&typeof Kt=="function"&&Kt instanceof Kt)&&(tr=!1)}return Te.delete(O),Te.delete(B),tr}function sn(O){return Pn(O,so,ws)}function gi(O,B){var oe=O.__data__;return Ds(B)?oe[typeof B=="string"?"string":"hash"]:oe.map}function vr(O,B){var oe=Oe(O,B);return eo(oe)?oe:void 0}function ms(O){var B=xe.call(O,er),oe=O[er];try{O[er]=void 0;var ge=!0}catch{}var ot=We.call(O);return ge&&(B?O[er]=oe:delete O[er]),ot}var ws=ei?function(O){return O==null?[]:(O=Object(O),He(ei(O),function(B){return hr.call(O,B)}))}:at,Kr=Ri;(mt&&Kr(new mt(new ArrayBuffer(1)))!=v||gt&&Kr(new gt)!=X||wt&&Kr(wt.resolve())!=M||Et&&Kr(new Et)!=S||vt&&Kr(new vt)!=l)&&(Kr=function(O){var B=Ri(O),oe=B==j?O.constructor:void 0,ge=oe?ri(oe):"";if(ge)switch(ge){case Ft:return v;case Ut:return X;case Dt:return M;case jt:return S;case St:return l}return B});function Es(O,B){return B=B??m,!!B&&(typeof O=="number"||ye.test(O))&&O>-1&&O%1==0&&O<B}function Ds(O){var B=typeof O;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?O!=="__proto__":O===null}function Ss(O){return!!ke&&ke in O}function Is(O){var B=O&&O.constructor,oe=typeof B=="function"&&B.prototype||Se;return O===oe}function ro(O){return We.call(O)}function ri(O){if(O!=null){try{return Be.call(O)}catch{}try{return O+""}catch{}}return""}function Os(O,B){return O===B||O!==O&&B!==B}var xs=Cn(function(){return arguments}())?Cn:function(O){return Ui(O)&&xe.call(O,"callee")&&!hr.call(O,"callee")},an=Array.isArray;function io(O){return O!=null&&Ps(O.length)&&!on(O)}var An=pi||st;function no(O,B){return Fi(O,B)}function on(O){if(!Cs(O))return!1;var B=Ri(O);return B==H||B==$||B==x||B==P}function Ps(O){return typeof O=="number"&&O>-1&&O%1==0&&O<=m}function Cs(O){var B=typeof O;return O!=null&&(B=="object"||B=="function")}function Ui(O){return O!=null&&typeof O=="object"}var As=Ie?pt(Ie):ys;function so(O){return io(O)?gs(O):vs(O)}function at(){return[]}function st(){return!1}n.exports=no})(xa,xa.exports);var FE=xa.exports;const UE=xv(FE);function jE(n,t){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<n.length;o++){var f=n.charAt(o),m=f.charCodeAt(0);if(r[m]!==255)throw new TypeError(f+" is ambiguous");r[m]=o}var g=n.length,w=n.charAt(0),x=Math.log(g)/Math.log(256),A=Math.log(256)/Math.log(g);function q($){if($ instanceof Uint8Array||(ArrayBuffer.isView($)?$=new Uint8Array($.buffer,$.byteOffset,$.byteLength):Array.isArray($)&&($=Uint8Array.from($))),!($ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if($.length===0)return"";for(var X=0,ee=0,ue=0,j=$.length;ue!==j&&$[ue]===0;)ue++,X++;for(var M=(j-ue)*A+1>>>0,P=new Uint8Array(M);ue!==j;){for(var N=$[ue],S=0,c=M-1;(N!==0||S<ee)&&c!==-1;c--,S++)N+=256*P[c]>>>0,P[c]=N%g>>>0,N=N/g>>>0;if(N!==0)throw new Error("Non-zero carry");ee=S,ue++}for(var y=M-ee;y!==M&&P[y]===0;)y++;for(var Z=w.repeat(X);y<M;++y)Z+=n.charAt(P[y]);return Z}function W($){if(typeof $!="string")throw new TypeError("Expected String");if($.length===0)return new Uint8Array;var X=0;if($[X]!==" "){for(var ee=0,ue=0;$[X]===w;)ee++,X++;for(var j=($.length-X)*x+1>>>0,M=new Uint8Array(j);$[X];){var P=r[$.charCodeAt(X)];if(P===255)return;for(var N=0,S=j-1;(P!==0||N<ue)&&S!==-1;S--,N++)P+=g*M[S]>>>0,M[S]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");ue=N,X++}if($[X]!==" "){for(var c=j-ue;c!==j&&M[c]===0;)c++;for(var y=new Uint8Array(ee+(j-c)),Z=ee;c!==j;)y[Z++]=M[c++];return y}}}function H($){var X=W($);if(X)return X;throw new Error(`Non-${t} character`)}return{encode:q,decodeUnsafe:W,decode:H}}var $E=jE,LE=$E;const xd=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},ME=n=>new TextEncoder().encode(n),zE=n=>new TextDecoder().decode(n);class qE{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class HE{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Pd(this,t)}}class BE{constructor(t){this.decoders=t}or(t){return Pd(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Pd=(n,t)=>new BE({...n.decoders||{[n.prefix]:n},...t.decoders||{[t.prefix]:t}});class KE{constructor(t,r,s,o){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new qE(t,r,s),this.decoder=new HE(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const $a=({name:n,prefix:t,encode:r,decode:s})=>new KE(n,t,r,s),ls=({prefix:n,name:t,alphabet:r})=>{const{encode:s,decode:o}=LE(r,t);return $a({prefix:n,name:t,encode:s,decode:f=>xd(o(f))})},VE=(n,t,r,s)=>{const o={};for(let A=0;A<t.length;++A)o[t[A]]=A;let f=n.length;for(;n[f-1]==="=";)--f;const m=new Uint8Array(f*r/8|0);let g=0,w=0,x=0;for(let A=0;A<f;++A){const q=o[n[A]];if(q===void 0)throw new SyntaxError(`Non-${s} character`);w=w<<r|q,g+=r,g>=8&&(g-=8,m[x++]=255&w>>g)}if(g>=r||255&w<<8-g)throw new SyntaxError("Unexpected end of data");return m},kE=(n,t,r)=>{const s=t[t.length-1]==="=",o=(1<<r)-1;let f="",m=0,g=0;for(let w=0;w<n.length;++w)for(g=g<<8|n[w],m+=8;m>r;)m-=r,f+=t[o&g>>m];if(m&&(f+=t[o&g<<r-m]),s)for(;f.length*r&7;)f+="=";return f},Yt=({name:n,prefix:t,bitsPerChar:r,alphabet:s})=>$a({prefix:t,name:n,encode(o){return kE(o,s,r)},decode(o){return VE(o,s,r,n)}}),GE=$a({prefix:"\0",name:"identity",encode:n=>zE(n),decode:n=>ME(n)});var WE=Object.freeze({__proto__:null,identity:GE});const YE=Yt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var JE=Object.freeze({__proto__:null,base2:YE});const XE=Yt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ZE=Object.freeze({__proto__:null,base8:XE});const QE=ls({prefix:"9",name:"base10",alphabet:"0123456789"});var e3=Object.freeze({__proto__:null,base10:QE});const t3=Yt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),r3=Yt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var i3=Object.freeze({__proto__:null,base16:t3,base16upper:r3});const n3=Yt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s3=Yt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),a3=Yt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),o3=Yt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c3=Yt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),u3=Yt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),h3=Yt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),l3=Yt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),f3=Yt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var d3=Object.freeze({__proto__:null,base32:n3,base32upper:s3,base32pad:a3,base32padupper:o3,base32hex:c3,base32hexupper:u3,base32hexpad:h3,base32hexpadupper:l3,base32z:f3});const p3=ls({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),g3=ls({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var _3=Object.freeze({__proto__:null,base36:p3,base36upper:g3});const y3=ls({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),v3=ls({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var b3=Object.freeze({__proto__:null,base58btc:y3,base58flickr:v3});const m3=Yt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),w3=Yt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),E3=Yt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),D3=Yt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var S3=Object.freeze({__proto__:null,base64:m3,base64pad:w3,base64url:E3,base64urlpad:D3});const Cd=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),I3=Cd.reduce((n,t,r)=>(n[r]=t,n),[]),O3=Cd.reduce((n,t,r)=>(n[t.codePointAt(0)]=r,n),[]);function x3(n){return n.reduce((t,r)=>(t+=I3[r],t),"")}function P3(n){const t=[];for(const r of n){const s=O3[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const C3=$a({prefix:"ðŸš€",name:"base256emoji",encode:x3,decode:P3});var A3=Object.freeze({__proto__:null,base256emoji:C3}),T3=Ad,sf=128,N3=127,R3=~N3,F3=Math.pow(2,31);function Ad(n,t,r){t=t||[],r=r||0;for(var s=r;n>=F3;)t[r++]=n&255|sf,n/=128;for(;n&R3;)t[r++]=n&255|sf,n>>>=7;return t[r]=n|0,Ad.bytes=r-s+1,t}var U3=qc,j3=128,af=127;function qc(n,s){var r=0,s=s||0,o=0,f=s,m,g=n.length;do{if(f>=g)throw qc.bytes=0,new RangeError("Could not decode varint");m=n[f++],r+=o<28?(m&af)<<o:(m&af)*Math.pow(2,o),o+=7}while(m>=j3);return qc.bytes=f-s,r}var $3=Math.pow(2,7),L3=Math.pow(2,14),M3=Math.pow(2,21),z3=Math.pow(2,28),q3=Math.pow(2,35),H3=Math.pow(2,42),B3=Math.pow(2,49),K3=Math.pow(2,56),V3=Math.pow(2,63),k3=function(n){return n<$3?1:n<L3?2:n<M3?3:n<z3?4:n<q3?5:n<H3?6:n<B3?7:n<K3?8:n<V3?9:10},G3={encode:T3,decode:U3,encodingLength:k3},Td=G3;const of=(n,t,r=0)=>(Td.encode(n,t,r),t),cf=n=>Td.encodingLength(n),Hc=(n,t)=>{const r=t.byteLength,s=cf(n),o=s+cf(r),f=new Uint8Array(o+r);return of(n,f,0),of(r,f,s),f.set(t,o),new W3(n,r,t,f)};class W3{constructor(t,r,s,o){this.code=t,this.size=r,this.digest=s,this.bytes=o}}const Nd=({name:n,code:t,encode:r})=>new Y3(n,t,r);class Y3{constructor(t,r,s){this.name=t,this.code=r,this.encode=s}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Hc(this.code,r):r.then(s=>Hc(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Rd=n=>async t=>new Uint8Array(await crypto.subtle.digest(n,t)),J3=Nd({name:"sha2-256",code:18,encode:Rd("SHA-256")}),X3=Nd({name:"sha2-512",code:19,encode:Rd("SHA-512")});var Z3=Object.freeze({__proto__:null,sha256:J3,sha512:X3});const Fd=0,Q3="identity",Ud=xd,e6=n=>Hc(Fd,Ud(n)),t6={code:Fd,name:Q3,encode:Ud,digest:e6};var r6=Object.freeze({__proto__:null,identity:t6});new TextEncoder,new TextDecoder;const uf={...WE,...JE,...ZE,...e3,...i3,...d3,..._3,...b3,...S3,...A3};({...Z3,...r6});function jd(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function i6(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?jd(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function $d(n,t,r,s){return{name:n,prefix:t,encoder:{name:n,prefix:t,encode:r},decoder:{decode:s}}}const hf=$d("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),wc=$d("ascii","a",n=>{let t="a";for(let r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},n=>{n=n.substring(1);const t=i6(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}),n6={utf8:hf,"utf-8":hf,hex:uf.base16,latin1:wc,ascii:wc,binary:wc,...uf};function s6(n,t="utf8"){const r=n6[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?jd(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}const Ld="wc",a6=2,fu="core",xi=`${Ld}@2:${fu}:`,o6={name:fu,logger:"error"},c6={database:":memory:"},u6="crypto",lf="client_ed25519_seed",h6=me.ONE_DAY,l6="keychain",f6="0.3",d6="messages",p6="0.3",g6=me.SIX_HOURS,_6="publisher",Md="irn",y6="error",zd="wss://relay.walletconnect.com",v6="relayer",xt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},b6="_subscription",es={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},m6=me.ONE_SECOND/2,w6="2.8.1",E6=1e4,D6="0.3",S6="WALLETCONNECT_CLIENT_ID",Xr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},I6="subscription",O6="0.3",x6=me.FIVE_SECONDS*1e3,P6="pairing",C6="0.3",ts={wc_pairingDelete:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:me.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:me.ONE_DAY,prompt:!1,tag:0},res:{ttl:me.ONE_DAY,prompt:!1,tag:0}}},Jr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},A6="history",T6="0.3",N6="expirer",Ur={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},R6="0.3",Ec="verify-api",ff="https://verify.walletconnect.com";class F6{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=l6,this.version=f6,this.initialized=!1,this.storagePrefix=xi,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:f}=de("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(f)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=t,this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,cd(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?ud(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class U6{constructor(t,r,s){this.core=t,this.logger=r,this.name=u6,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),f=rf(o);return Od(f.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=Fm();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const f=await this.getClientSeed(),m=rf(f),g=Mc();return await CE(g,o,h6,m)},this.generateSharedKey=(o,f,m)=>{this.isInitialized();const g=this.getPrivateKey(o),w=Um(g,f);return this.setSymKey(w,m)},this.setSymKey=async(o,f)=>{this.isInitialized();const m=f||jm(o);return await this.keychain.set(m,o),m},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,f,m)=>{this.isInitialized();const g=sd(m),w=Yc(f);if(Tl(g)){const W=g.senderPublicKey,H=g.receiverPublicKey;o=await this.generateSharedKey(W,H)}const x=this.getSymKey(o),{type:A,senderPublicKey:q}=g;return Lm({type:A,symKey:x,message:w,senderPublicKey:q})},this.decode=async(o,f,m)=>{this.isInitialized();const g=qm(f,m);if(Tl(g)){const A=g.receiverPublicKey,q=g.senderPublicKey;o=await this.generateSharedKey(A,q)}const w=this.getSymKey(o),x=Mm({symKey:w,encoded:f});return jf(x)},this.getPayloadType=o=>{const f=Sa(o);return cs(f.type)},this.getPayloadSenderPublicKey=o=>{const f=Sa(o);return f.senderPublicKey?ur(f.senderPublicKey,cr):void 0},this.core=t,this.logger=Qe.generateChildLogger(r,this.name),this.keychain=s||new F6(this.core,this.logger)}get context(){return Qe.getLoggerContext(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(lf)}catch{t=Mc(),await this.keychain.set(lf,t)}return s6(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class j6 extends oE{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=d6,this.version=p6,this.initialized=!1,this.storagePrefix=xi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const f=Sn(o);let m=this.messages.get(s);return typeof m>"u"&&(m={}),typeof m[f]<"u"||(m[f]=o,this.messages.set(s,m),await this.persist()),f},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const f=this.get(s),m=Sn(o);return typeof f[m]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Qe.generateChildLogger(t,this.name),this.core=r}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,cd(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?ud(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}let $6=class extends cE{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new Qr.EventEmitter,this.name=_6,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(s,o,f)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:f}});try{const m=(f==null?void 0:f.ttl)||g6,g=zc(f),w=(f==null?void 0:f.prompt)||!1,x=(f==null?void 0:f.tag)||0,A=(f==null?void 0:f.id)||$f().toString(),q={topic:s,message:o,opts:{ttl:m,relay:g,prompt:w,tag:x,id:A}};this.queue.set(A,q);try{await await Ia(this.rpcPublish(s,o,m,g,w,x,A),this.publishTimeout),this.relayer.events.emit(xt.publish,q)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(xt.connection_stalled);return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:f}})}catch(m){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(m),m}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=t,this.logger=Qe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Qe.getLoggerContext(this.logger)}rpcPublish(t,r,s,o,f,m,g){var w,x,A,q;const W={method:ba(o.protocol).publish,params:{topic:t,message:r,ttl:s,prompt:f,tag:m},id:g};return ar((w=W.params)==null?void 0:w.prompt)&&((x=W.params)==null||delete x.prompt),ar((A=W.params)==null?void 0:A.tag)&&((q=W.params)==null||delete q.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:W}),this.relayer.request(W)}onPublish(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:r,message:s,opts:o}=t;await this.publish(r,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(hs.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()}),this.relayer.on(xt.message_ack,t=>{this.onPublish(t.id.toString())})}};class L6{constructor(){this.map=new Map,this.set=(t,r)=>{const s=this.get(t);this.exists(t,r)||this.map.set(t,[...s,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const s=this.get(t);if(!this.exists(t,r))return;const o=s.filter(f=>f!==r);if(!o.length){this.map.delete(t);return}this.map.set(t,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var M6=Object.defineProperty,z6=Object.defineProperties,q6=Object.getOwnPropertyDescriptors,df=Object.getOwnPropertySymbols,H6=Object.prototype.hasOwnProperty,B6=Object.prototype.propertyIsEnumerable,pf=(n,t,r)=>t in n?M6(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,rs=(n,t)=>{for(var r in t||(t={}))H6.call(t,r)&&pf(n,r,t[r]);if(df)for(var r of df(t))B6.call(t,r)&&pf(n,r,t[r]);return n},Dc=(n,t)=>z6(n,q6(t));class K6 extends lE{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new L6,this.events=new Qr.EventEmitter,this.name=I6,this.version=O6,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=xi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const f=zc(o),m={topic:s,relay:f};this.pending.set(s,m);const g=await this.rpcSubscribe(s,f);return this.onSubscribe(g,m),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),g}catch(f){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(f),f}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,f)=>{const m=new me.Watch;m.start(this.pendingSubscriptionWatchLabel);const g=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(g),m.stop(this.pendingSubscriptionWatchLabel),o(!0)),m.elapsed(this.pendingSubscriptionWatchLabel)>=x6&&(clearInterval(g),m.stop(this.pendingSubscriptionWatchLabel),f(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Qe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let s=!1;try{s=this.getSubscription(t).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const s=this.topicMap.get(t);await Promise.all(s.map(async o=>await this.unsubscribeById(t,o,r)))}async unsubscribeById(t,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}});try{const o=zc(s);await this.rpcUnsubscribe(t,r,o);const f=Nt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,f),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(t,r){const s={method:ba(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Ia(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(xt.connection_stalled)}return Sn(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,s={method:ba(r.protocol).batchSubscribe,params:{topics:t.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Ia(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(xt.connection_stalled)}}rpcUnsubscribe(t,r,s){const o={method:ba(s.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(t,r){this.setSubscription(t,Dc(rs({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,rs({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,s),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,rs({},r)),this.topicMap.set(r.topic,t),this.events.emit(Xr.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const s=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(s.topic,t),this.events.emit(Xr.deleted,Dc(rs({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Xr.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Xr.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);di(r)&&this.onBatchSubscribe(r.map((s,o)=>Dc(rs({},t[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(hs.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(xt.connect,async()=>{await this.onConnect()}),this.relayer.on(xt.disconnect,()=>{this.onDisconnect()}),this.events.on(Xr.created,async t=>{const r=Xr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(Xr.deleted,async t=>{const r=Xr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}}var V6=Object.defineProperty,gf=Object.getOwnPropertySymbols,k6=Object.prototype.hasOwnProperty,G6=Object.prototype.propertyIsEnumerable,_f=(n,t,r)=>t in n?V6(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,W6=(n,t)=>{for(var r in t||(t={}))k6.call(t,r)&&_f(n,r,t[r]);if(gf)for(var r of gf(t))G6.call(t,r)&&_f(n,r,t[r]);return n};class Y6 extends uE{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new Qr.EventEmitter,this.name=v6,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Qe.generateChildLogger(t.logger,this.name):Qe.pino(Qe.getDefaultLoggerOptions({level:t.logger||y6})),this.messages=new j6(this.logger,t.core),this.subscriber=new K6(this,this.logger),this.publisher=new $6(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||zd,this.projectId=t.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribted to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},E6)}get context(){return Qe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,r,s){this.isInitialized(),await this.publisher.publish(t,r,s),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(t))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(f=>{this.subscriber.once(Xr.created,m=>{m.topic===t&&f()})}),new Promise(async f=>{o=await this.subscriber.subscribe(t,r),f()})]),o)}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(xt.transport_closed))}async transportOpen(t){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=t||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(Xr.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,s)=>{await Ia(this.provider.connect(),5e3,"socket stalled").catch(o=>s(o)).then(()=>r()).finally(()=>this.removeListener(xt.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(xt.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.events.emit(xt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(t){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=t||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(es.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Pi(new RE(Zm({sdkVersion:w6,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:s}=t;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(t){const{topic:r,message:s}=t;return await this.subscriber.isSubscribed(r)?this.messages.has(r,s):!0}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Xc(t)){if(!t.method.endsWith(b6))return;const r=t.params,{topic:s,message:o,publishedAt:f}=r.data,m={topic:s,message:o,publishedAt:f};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(W6({type:"event",event:r.id},m)),this.events.emit(r.id,m),await this.acknowledgePayload(t),await this.onMessageEvent(m)}else Zc(t)&&this.events.emit(xt.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(xt.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=Qc(t.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(es.payload,t=>this.onProviderPayload(t)),this.provider.on(es.connect,()=>{this.events.emit(xt.connect)}),this.provider.on(es.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(es.error,t=>{this.logger.error(t),this.events.emit(xt.error,t)})}registerEventListeners(){this.events.on(xt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(xt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},me.toMiliseconds(m6))}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(t=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var J6=Object.defineProperty,yf=Object.getOwnPropertySymbols,X6=Object.prototype.hasOwnProperty,Z6=Object.prototype.propertyIsEnumerable,vf=(n,t,r)=>t in n?J6(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,bf=(n,t)=>{for(var r in t||(t={}))X6.call(t,r)&&vf(n,r,t[r]);if(yf)for(var r of yf(t))Z6.call(t,r)&&vf(n,r,t[r]);return n};class La extends hE{constructor(t,r,s,o=xi,f=void 0){super(t,r,s,o),this.core=t,this.logger=r,this.name=s,this.map=new Map,this.version=D6,this.cached=[],this.initialized=!1,this.storagePrefix=xi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(m=>{this.getKey&&m!==null&&!ar(m)?this.map.set(this.getKey(m),m):ww(m)?this.map.set(m.id,m):Ew(m)&&this.map.set(m.topic,m)}),this.cached=[],this.initialized=!0)},this.set=async(m,g)=>{this.isInitialized(),this.map.has(m)?await this.update(m,g):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:m,value:g}),this.map.set(m,g),await this.persist())},this.get=m=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:m}),this.getData(m)),this.getAll=m=>(this.isInitialized(),m?this.values.filter(g=>Object.keys(m).every(w=>UE(g[w],m[w]))):this.values),this.update=async(m,g)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:m,update:g});const w=bf(bf({},this.getData(m)),g);this.map.set(m,w),await this.persist()},this.delete=async(m,g)=>{this.isInitialized(),this.map.has(m)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:m,reason:g}),this.map.delete(m),await this.persist())},this.logger=Qe.generateChildLogger(r,this.name),this.storagePrefix=o,this.getKey=f}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Q6{constructor(t,r){this.core=t,this.logger=r,this.name=P6,this.version=C6,this.events=new Wc,this.initialized=!1,this.storagePrefix=xi,this.ignoredPayloadTypes=[Zi],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Mc(),o=await this.core.crypto.setSymKey(s),f=Zr(me.FIVE_MINUTES),m={protocol:Md},g={topic:o,expiry:f,relay:m,active:!1},w=lw({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:m});return await this.pairings.set(o,g),await this.core.relayer.subscribe(o),this.core.expirer.set(o,f),{topic:o,uri:w}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:f,relay:m}=cw(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const g=Zr(me.FIVE_MINUTES),w={topic:o,relay:m,expiry:g,active:!1};return await this.pairings.set(o,w),await this.core.crypto.setSymKey(f,o),await this.core.relayer.subscribe(o,{relay:m}),this.core.expirer.set(o,g),s.activatePairing&&await this.activate({topic:o}),w},this.activate=async({topic:s})=>{this.isInitialized();const o=Zr(me.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const f=await this.sendRequest(o,"wc_pairingPing",{}),{done:m,resolve:g,reject:w}=En();this.events.once(qt("pairing_ping",f),({error:x})=>{x?w(x):g()}),await m()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Nt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,f)=>{const m=eu(o,f),g=await this.core.crypto.encode(s,m),w=ts[o].req;return this.core.history.set(s,m),this.core.relayer.publish(s,g,w),m.id},this.sendResult=async(s,o,f)=>{const m=Qc(s,f),g=await this.core.crypto.encode(o,m),w=await this.core.history.get(o,s),x=ts[w.request.method].res;await this.core.relayer.publish(o,g,x),await this.core.history.resolve(m)},this.sendError=async(s,o,f)=>{const m=Jc(s,f),g=await this.core.crypto.encode(o,m),w=await this.core.history.get(o,s),x=ts[w.request.method]?ts[w.request.method].res:ts.unregistered_method.res;await this.core.relayer.publish(o,g,x),await this.core.history.resolve(m)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Nt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>Oi(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:f}=s,m=f.method;if(this.pairings.keys.includes(o))switch(m){case"wc_pairingPing":return this.onPairingPingRequest(o,f);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,f);default:return this.onUnknownRpcMethodRequest(o,f)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:f}=s,m=(await this.core.history.get(o,f.id)).request.method;if(this.pairings.keys.includes(o))switch(m){case"wc_pairingPing":return this.onPairingPingResponse(o,f);default:return this.onUnknownRpcMethodResponse(m)}},this.onPairingPingRequest=async(s,o)=>{const{id:f}=o;try{this.isValidPing({topic:s}),await this.sendResult(f,s,!0),this.events.emit("pairing_ping",{id:f,topic:s})}catch(m){await this.sendError(f,s,m),this.logger.error(m)}},this.onPairingPingResponse=(s,o)=>{const{id:f}=o;setTimeout(()=>{Ii(o)?this.events.emit(qt("pairing_ping",f),{}):fi(o)&&this.events.emit(qt("pairing_ping",f),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:f}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:f,topic:s})}catch(m){await this.sendError(f,s,m),this.logger.error(m)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:f,method:m}=o;try{if(this.registeredMethods.includes(m))return;const g=Nt("WC_METHOD_UNSUPPORTED",m);await this.sendError(f,s,g),this.logger.error(g)}catch(g){await this.sendError(f,s,g),this.logger.error(g)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Nt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!_r(s)){const{message:o}=de("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!mw(s.uri)){const{message:o}=de("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!_r(s)){const{message:f}=de("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(f)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!_r(s)){const{message:f}=de("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(f)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!kt(s,!1)){const{message:o}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(Oi(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=de("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=t,this.logger=Qe.generateChildLogger(r,this.name),this.pairings=new La(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(xt.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(r,s);Xc(o)?(this.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):Zc(o)&&(await this.core.history.resolve(o),this.onRelayEventResponse({topic:r,payload:o}))})}registerExpirerEvents(){this.core.expirer.on(Ur.expired,async t=>{const{topic:r}=ld(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class eD extends aE{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new Qr.EventEmitter,this.name=A6,this.version=T6,this.cached=[],this.initialized=!1,this.storagePrefix=xi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,f)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:f}),this.records.has(o.id))return;const m={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:f};this.records.set(m.id,m),this.events.emit(Jr.created,m)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=fi(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(Jr.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(f=>{if(f.topic===s){if(typeof o<"u"&&f.id!==o)return;this.records.delete(f.id),this.events.emit(Jr.deleted,f)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:eu(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(s)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Jr.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Jr.created,t=>{const r=Jr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Jr.updated,t=>{const r=Jr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Jr.deleted,t=>{const r=Jr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class tD extends fE{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new Qr.EventEmitter,this.name=N6,this.version=R6,this.cached=[],this.initialized=!1,this.storagePrefix=xi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const f=this.formatTarget(s),m={target:f,expiry:o};this.expirations.set(f,m),this.checkExpiry(f,m),this.events.emit(Ur.created,{target:f,expiration:m})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),f=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Ur.deleted,{target:o,expiration:f})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return Qm(t);if(typeof t=="number")return ew(t);const{message:r}=de("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ur.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(t,r){const{expiry:s}=r;me.toMiliseconds(s)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(Ur.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(hs.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Ur.created,t=>{const r=Ur.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Ur.expired,t=>{const r=Ur.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Ur.deleted,t=>{const r=Ur.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}}class rD extends dE{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=Ec,this.initialized=!1,this.init=async s=>{ad()||!cu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||ff,await this.createIframe())},this.register=async s=>{var o;this.initialized||await this.init(),this.iframe&&((o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`))},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const f=this.startAbortTimer(me.FIVE_SECONDS),m=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(f),m.status===200?(o=await m.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(Ec))return s();const f=document.createElement("iframe");f.setAttribute("id",Ec),f.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),f.style.display="none",f.addEventListener("load",()=>{this.initialized=!0,s()}),f.addEventListener("error",m=>{o(m)}),document.body.append(f),this.iframe=f}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),me.toMiliseconds(me.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Qe.generateChildLogger(r,this.name),this.verifyUrl=ff,this.abortController=new AbortController,this.isDevEnv=ou()&&{}.IS_VITEST}get context(){return Qe.getLoggerContext(this.logger)}startAbortTimer(t){return setTimeout(()=>this.abortController.abort(),me.toMiliseconds(t))}}var iD=Object.defineProperty,mf=Object.getOwnPropertySymbols,nD=Object.prototype.hasOwnProperty,sD=Object.prototype.propertyIsEnumerable,wf=(n,t,r)=>t in n?iD(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Ef=(n,t)=>{for(var r in t||(t={}))nD.call(t,r)&&wf(n,r,t[r]);if(mf)for(var r of mf(t))sD.call(t,r)&&wf(n,r,t[r]);return n};let aD=class qd extends sE{constructor(t){super(t),this.protocol=Ld,this.version=a6,this.name=fu,this.events=new Qr.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||zd;const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||o6.logger}));this.logger=Qe.generateChildLogger(r,this.name),this.heartbeat=new hs.HeartBeat,this.crypto=new U6(this,this.logger,t==null?void 0:t.keychain),this.history=new eD(this,this.logger),this.expirer=new tD(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new Yw(Ef(Ef({},c6),t==null?void 0:t.storageOptions)),this.relayer=new Y6({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Q6(this,this.logger),this.verify=new rD(this.projectId||"",this.logger)}static async init(t){const r=new qd(t);await r.initialize();const s=await r.crypto.getClientId();return await r.storage.setItem(S6,s),r}get context(){return Qe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}};const oD=aD,Hd="wc",Bd=2,Kd="client",du=`${Hd}@${Bd}:${Kd}:`,Sc={name:Kd,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},cD="WALLETCONNECT_DEEPLINK_CHOICE",uD="proposal",Vd="Proposal expired",hD="session",_a=me.SEVEN_DAYS,lD="engine",is={wc_sessionPropose:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1104},res:{ttl:me.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1106},res:{ttl:me.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1112},res:{ttl:me.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1115}}},Ic={min:me.FIVE_MINUTES,max:me.SEVEN_DAYS},fD="request",dD=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var pD=Object.defineProperty,gD=Object.defineProperties,_D=Object.getOwnPropertyDescriptors,Df=Object.getOwnPropertySymbols,yD=Object.prototype.hasOwnProperty,vD=Object.prototype.propertyIsEnumerable,Sf=(n,t,r)=>t in n?pD(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Fr=(n,t)=>{for(var r in t||(t={}))yD.call(t,r)&&Sf(n,r,t[r]);if(Df)for(var r of Df(t))vD.call(t,r)&&Sf(n,r,t[r]);return n},Oc=(n,t)=>gD(n,_D(t));class bD extends gE{constructor(t){super(t),this.name=lD,this.events=new Wc,this.initialized=!1,this.ignoredPayloadTypes=[Zi],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(is)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const s=Oc(Fr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:f,optionalNamespaces:m,sessionProperties:g,relays:w}=s;let x=o,A,q=!1;if(x&&(q=this.client.core.pairing.pairings.get(x).active),!x||!q){const{topic:M,uri:P}=await this.client.core.pairing.create();x=M,A=P}const W=await this.client.core.crypto.generateKeyPair(),H=Fr({requiredNamespaces:f,optionalNamespaces:m,relays:w??[{protocol:Md}],proposer:{publicKey:W,metadata:this.client.metadata}},g&&{sessionProperties:g}),{reject:$,resolve:X,done:ee}=En(me.FIVE_MINUTES,Vd);if(this.events.once(qt("session_connect"),async({error:M,session:P})=>{if(M)$(M);else if(P){P.self.publicKey=W;const N=Oc(Fr({},P),{requiredNamespaces:P.requiredNamespaces,optionalNamespaces:P.optionalNamespaces});await this.client.session.set(P.topic,N),await this.setExpiry(P.topic,P.expiry),x&&await this.client.core.pairing.updateMetadata({topic:x,metadata:P.peer.metadata}),X(N)}}),!x){const{message:M}=de("NO_MATCHING_KEY",`connect() pairing topic: ${x}`);throw new Error(M)}const ue=await this.sendRequest(x,"wc_sessionPropose",H),j=Zr(me.FIVE_MINUTES);return await this.setProposal(ue,Fr({id:ue,expiry:j},H)),{uri:A,approval:ee}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:o,namespaces:f,sessionProperties:m}=r,g=this.client.proposal.get(s);let{pairingTopic:w,proposer:x,requiredNamespaces:A,optionalNamespaces:q}=g;w=w||"",In(A)||(A=gw(f,"approve()"));const W=await this.client.core.crypto.generateKeyPair(),H=x.publicKey,$=await this.client.core.crypto.generateSharedKey(W,H);w&&s&&(await this.client.core.pairing.updateMetadata({topic:w,metadata:x.metadata}),await this.sendResult(s,w,{relay:{protocol:o??"irn"},responderPublicKey:W}),await this.client.proposal.delete(s,Nt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:w}));const X=Fr({relay:{protocol:o??"irn"},namespaces:f,requiredNamespaces:A,optionalNamespaces:q,pairingTopic:w,controller:{publicKey:W,metadata:this.client.metadata},expiry:Zr(_a)},m&&{sessionProperties:m});await this.client.core.relayer.subscribe($),await this.sendRequest($,"wc_sessionSettle",X);const ee=Oc(Fr({},X),{topic:$,pairingTopic:w,acknowledged:!1,self:X.controller,peer:{publicKey:x.publicKey,metadata:x.metadata},controller:W});return await this.client.session.set($,ee),await this.setExpiry($,Zr(_a)),{topic:$,acknowledged:()=>new Promise(ue=>setTimeout(()=>ue(this.client.session.get($)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:s,reason:o}=r,{pairingTopic:f}=this.client.proposal.get(s);f&&(await this.sendError(s,f,o),await this.client.proposal.delete(s,Nt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:o}=r,f=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:m,resolve:g,reject:w}=En();return this.events.once(qt("session_update",f),({error:x})=>{x?w(x):g()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:m}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:f,resolve:m,reject:g}=En();return this.events.once(qt("session_extend",o),({error:w})=>{w?g(w):m()}),await this.setExpiry(s,Zr(_a)),{acknowledged:f}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:o,topic:f,expiry:m}=r,g=await this.sendRequest(f,"wc_sessionRequest",{request:o,chainId:s},m),{done:w,resolve:x,reject:A}=En(m);this.events.once(qt("session_request",g),({error:W,result:H})=>{W?A(W):x(H)}),this.client.events.emit("session_request_sent",{topic:f,request:o,chainId:s,id:g});const q=await this.client.core.storage.getItem(cD);return tw({id:g,topic:f,wcDeepLink:q}),await w()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:o}=r,{id:f}=o;Ii(o)?await this.sendResult(f,s,o.result):fi(o)&&await this.sendError(f,s,o.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:f,resolve:m,reject:g}=En();this.events.once(qt("session_ping",o),({error:w})=>{w?g(w):m()}),await f()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:o,chainId:f}=r;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:f})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const o=$f().toString();let f;const m=g=>{(g==null?void 0:g.id.toString())===o&&(this.client.core.relayer.events.removeListener(xt.message_ack,m),f())};await Promise.all([new Promise(g=>{f=g,this.client.core.relayer.on(xt.message_ack,m)}),this.sendRequest(s,"wc_sessionDelete",Nt("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>vw(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(f=>{var m,g;return((m=f.peerMetadata)==null?void 0:m.url)&&((g=f.peerMetadata)==null?void 0:g.url)===r.peer.metadata.url&&f.topic&&f.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(f=>this.client.core.pairing.disconnect({topic:f.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Nt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r)},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,Nt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),o?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=is.wc_sessionRequest.req.ttl,{id:o,topic:f,params:m}=r;await this.client.pendingRequest.set(o,{id:o,topic:f,params:m}),s&&this.client.core.expirer.set(o,Zr(s))},this.sendRequest=async(r,s,o,f,m)=>{const g=eu(s,o);if(cu()&&dD.includes(s)){const A=Sn(JSON.stringify(g));await this.client.core.verify.register({attestationId:A})}const w=await this.client.core.crypto.encode(r,g),x=is[s].req;return f&&(x.ttl=f),m&&(x.id=m),this.client.core.history.set(r,g),this.client.core.relayer.publish(r,w,x),g.id},this.sendResult=async(r,s,o)=>{const f=Qc(r,o),m=await this.client.core.crypto.encode(s,f),g=await this.client.core.history.get(s,r),w=is[g.request.method].res;this.client.core.relayer.publish(s,m,w),await this.client.core.history.resolve(f)},this.sendError=async(r,s,o)=>{const f=Jc(r,o),m=await this.client.core.crypto.encode(s,f),g=await this.client.core.history.get(s,r),w=is[g.request.method].res;this.client.core.relayer.publish(s,m,w),await this.client.core.history.resolve(f)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(o=>{Oi(o.expiry)&&r.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Oi(o.expiry)&&s.push(o.id)}),await Promise.all([...r.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=r=>{const{topic:s,payload:o}=r,f=o.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${f}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:o}=r,f=(await this.client.core.history.get(s,o.id)).request.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${f}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:s}=r,{message:o}=de("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(r,s)=>{const{params:o,id:f}=s;try{this.isValidConnect(Fr({},s.params));const m=Zr(me.FIVE_MINUTES),g=Fr({id:f,pairingTopic:r,expiry:m},o);await this.setProposal(f,g);const w=Sn(JSON.stringify(s)),x=await this.getVerifyContext(w,g.proposer.metadata);this.client.events.emit("session_proposal",{id:f,params:g,verifyContext:x})}catch(m){await this.sendError(f,r,m),this.client.logger.error(m)}},this.onSessionProposeResponse=async(r,s)=>{const{id:o}=s;if(Ii(s)){const{result:f}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:f});const m=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:m});const g=m.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:g});const w=f.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:w});const x=await this.client.core.crypto.generateSharedKey(g,w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:x});const A=await this.client.core.relayer.subscribe(x);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:A}),await this.client.core.pairing.activate({topic:r})}else fi(s)&&(await this.client.proposal.delete(o,Nt("USER_DISCONNECTED")),this.events.emit(qt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:o,params:f}=s;try{this.isValidSessionSettleRequest(f);const{relay:m,controller:g,expiry:w,namespaces:x,requiredNamespaces:A,optionalNamespaces:q,sessionProperties:W,pairingTopic:H}=s.params,$=Fr({topic:r,relay:m,expiry:w,namespaces:x,acknowledged:!0,pairingTopic:H,requiredNamespaces:A,optionalNamespaces:q,controller:g.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:g.publicKey,metadata:g.metadata}},W&&{sessionProperties:W});await this.sendResult(s.id,r,!0),this.events.emit(qt("session_connect"),{session:$}),this.cleanupDuplicatePairings($)}catch(m){await this.sendError(o,r,m),this.client.logger.error(m)}},this.onSessionSettleResponse=async(r,s)=>{const{id:o}=s;Ii(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(qt("session_approve",o),{})):fi(s)&&(await this.client.session.delete(r,Nt("USER_DISCONNECTED")),this.events.emit(qt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:o,id:f}=s;try{this.isValidUpdate(Fr({topic:r},o)),await this.client.session.update(r,{namespaces:o.namespaces}),await this.sendResult(f,r,!0),this.client.events.emit("session_update",{id:f,topic:r,params:o})}catch(m){await this.sendError(f,r,m),this.client.logger.error(m)}},this.onSessionUpdateResponse=(r,s)=>{const{id:o}=s;Ii(s)?this.events.emit(qt("session_update",o),{}):fi(s)&&this.events.emit(qt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:o}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Zr(_a)),await this.sendResult(o,r,!0),this.client.events.emit("session_extend",{id:o,topic:r})}catch(f){await this.sendError(o,r,f),this.client.logger.error(f)}},this.onSessionExtendResponse=(r,s)=>{const{id:o}=s;Ii(s)?this.events.emit(qt("session_extend",o),{}):fi(s)&&this.events.emit(qt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:o}=s;try{this.isValidPing({topic:r}),await this.sendResult(o,r,!0),this.client.events.emit("session_ping",{id:o,topic:r})}catch(f){await this.sendError(o,r,f),this.client.logger.error(f)}},this.onSessionPingResponse=(r,s)=>{const{id:o}=s;setTimeout(()=>{Ii(s)?this.events.emit(qt("session_ping",o),{}):fi(s)&&this.events.emit(qt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(f=>{this.client.core.relayer.once(xt.publish,async()=>{f(await this.deleteSession(r))})}),this.sendResult(o,r,!0)]),this.client.events.emit("session_delete",{id:o,topic:r})}catch(f){this.client.logger.error(f)}},this.onSessionRequest=async(r,s)=>{const{id:o,params:f}=s;try{this.isValidRequest(Fr({topic:r},f)),await this.setPendingSessionRequest({id:o,topic:r,params:f});const m=Sn(JSON.stringify(s)),g=this.client.session.get(r),w=await this.getVerifyContext(m,g.peer.metadata);this.client.events.emit("session_request",{id:o,topic:r,params:f,verifyContext:w})}catch(m){await this.sendError(o,r,m),this.client.logger.error(m)}},this.onSessionRequestResponse=(r,s)=>{const{id:o}=s;Ii(s)?this.events.emit(qt("session_request",o),{result:s.result}):fi(s)&&this.events.emit(qt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:o,params:f}=s;try{this.isValidEmit(Fr({topic:r},f)),this.client.events.emit("session_event",{id:o,topic:r,params:f})}catch(m){await this.sendError(o,r,m),this.client.logger.error(m)}},this.isValidConnect=async r=>{if(!_r(r)){const{message:w}=de("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(w)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:f,sessionProperties:m,relays:g}=r;if(ar(s)||await this.isValidPairingTopic(s),!Aw(g,!0)){const{message:w}=de("MISSING_OR_INVALID",`connect() relays: ${g}`);throw new Error(w)}!ar(o)&&In(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ar(f)&&In(f)!==0&&this.validateNamespaces(f,"optionalNamespaces"),ar(m)||this.validateSessionProps(m,"sessionProperties")},this.validateNamespaces=(r,s)=>{const o=Cw(r,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async r=>{if(!_r(r))throw new Error(de("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:o,relayProtocol:f,sessionProperties:m}=r;await this.isValidProposalId(s);const g=this.client.proposal.get(s),w=wa(o,"approve()");if(w)throw new Error(w.message);const x=Ml(g.requiredNamespaces,o,"approve()");if(x)throw new Error(x.message);if(!kt(f,!0)){const{message:A}=de("MISSING_OR_INVALID",`approve() relayProtocol: ${f}`);throw new Error(A)}ar(m)||this.validateSessionProps(m,"sessionProperties")},this.isValidReject=async r=>{if(!_r(r)){const{message:f}=de("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(f)}const{id:s,reason:o}=r;if(await this.isValidProposalId(s),!Nw(o)){const{message:f}=de("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(f)}},this.isValidSessionSettleRequest=r=>{if(!_r(r)){const{message:x}=de("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(x)}const{relay:s,controller:o,namespaces:f,expiry:m}=r;if(!pd(s)){const{message:x}=de("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(x)}const g=Dw(o,"onSessionSettleRequest()");if(g)throw new Error(g.message);const w=wa(f,"onSessionSettleRequest()");if(w)throw new Error(w.message);if(Oi(m)){const{message:x}=de("EXPIRED","onSessionSettleRequest()");throw new Error(x)}},this.isValidUpdate=async r=>{if(!_r(r)){const{message:w}=de("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(w)}const{topic:s,namespaces:o}=r;await this.isValidSessionTopic(s);const f=this.client.session.get(s),m=wa(o,"update()");if(m)throw new Error(m.message);const g=Ml(f.requiredNamespaces,o,"update()");if(g)throw new Error(g.message)},this.isValidExtend=async r=>{if(!_r(r)){const{message:o}=de("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!_r(r)){const{message:w}=de("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(w)}const{topic:s,request:o,chainId:f,expiry:m}=r;await this.isValidSessionTopic(s);const{namespaces:g}=this.client.session.get(s);if(!Ll(g,f)){const{message:w}=de("MISSING_OR_INVALID",`request() chainId: ${f}`);throw new Error(w)}if(!Rw(o)){const{message:w}=de("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(w)}if(!jw(g,f,o.method)){const{message:w}=de("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(w)}if(m&&!zw(m,Ic)){const{message:w}=de("MISSING_OR_INVALID",`request() expiry: ${m}. Expiry must be a number (in seconds) between ${Ic.min} and ${Ic.max}`);throw new Error(w)}},this.isValidRespond=async r=>{if(!_r(r)){const{message:f}=de("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(f)}const{topic:s,response:o}=r;if(await this.isValidSessionTopic(s),!Fw(o)){const{message:f}=de("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(f)}},this.isValidPing=async r=>{if(!_r(r)){const{message:o}=de("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!_r(r)){const{message:g}=de("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(g)}const{topic:s,event:o,chainId:f}=r;await this.isValidSessionTopic(s);const{namespaces:m}=this.client.session.get(s);if(!Ll(m,f)){const{message:g}=de("MISSING_OR_INVALID",`emit() chainId: ${f}`);throw new Error(g)}if(!Uw(o)){const{message:g}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(g)}if(!$w(m,f,o.name)){const{message:g}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(g)}},this.isValidDisconnect=async r=>{if(!_r(r)){const{message:o}=de("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const f=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});f&&(o.verified.origin=f,o.verified.validation=f===s.url?"VALID":"INVALID")}catch(f){this.client.logger.error(f)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(o=>{if(!kt(o,!1)){const{message:f}=de("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(f)}})}}isInitialized(){if(!this.initialized){const{message:t}=de("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.client.core.relayer.on(xt.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(r,s);Xc(o)?(this.client.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):Zc(o)?(await this.client.core.history.resolve(o),this.onRelayEventResponse({topic:r,payload:o})):this.onRelayEventUnknownPayload({topic:r,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(Ur.expired,async t=>{const{topic:r,id:s}=ld(t.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,de("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(t){if(!kt(t,!1)){const{message:r}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(Oi(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=de("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!kt(t,!1)){const{message:r}=de("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(!this.client.session.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(Oi(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:r}=de("EXPIRED",`session topic: ${t}`);throw new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(kt(t,!1)){const{message:r}=de("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=de("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!Tw(t)){const{message:r}=de("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=de("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(Oi(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:r}=de("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class mD extends La{constructor(t,r){super(t,r,uD,du),this.core=t,this.logger=r}}class wD extends La{constructor(t,r){super(t,r,hD,du),this.core=t,this.logger=r}}class ED extends La{constructor(t,r){super(t,r,fD,du,s=>s.id),this.core=t,this.logger=r}}let DD=class kd extends pE{constructor(t){super(t),this.protocol=Hd,this.version=Bd,this.name=Sc.name,this.events=new Qr.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(t==null?void 0:t.name)||Sc.name,this.metadata=(t==null?void 0:t.metadata)||Wm();const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||Sc.logger}));this.core=(t==null?void 0:t.core)||new oD(t),this.logger=Qe.generateChildLogger(r,this.name),this.session=new wD(this.core,this.logger),this.proposal=new mD(this.core,this.logger),this.pendingRequest=new ED(this.core,this.logger),this.engine=new bD(this)}static async init(t){const r=new kd(t);return await r.initialize(),r}get context(){return Qe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}};const If="error",SD="wss://relay.walletconnect.com",ID="wc",OD="universal_provider",Of=`${ID}@2:${OD}:`,xD="https://rpc.walletconnect.com/v1",Ai={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ns=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bc={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,t){(function(){var r,s="4.17.21",o=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",m="Expected a function",g="Invalid `variable` option passed into `_.template`",w="__lodash_hash_undefined__",x=500,A="__lodash_placeholder__",q=1,W=2,H=4,$=1,X=2,ee=1,ue=2,j=4,M=8,P=16,N=32,S=64,c=128,y=256,Z=512,l=30,d="...",v=800,I=16,b=1,p=2,F=3,L=1/0,J=9007199254740991,C=17976931348623157e292,k=0/0,te=4294967295,se=te-1,ie=te>>>1,ye=[["ary",c],["bind",ee],["bindKey",ue],["curry",M],["curryRight",P],["flip",Z],["partial",N],["partialRight",S],["rearg",y]],le="[object Arguments]",be="[object Array]",Y="[object AsyncFunction]",G="[object Boolean]",z="[object Date]",h="[object DOMException]",R="[object Error]",he="[object Function]",pe="[object GeneratorFunction]",Ie="[object Map]",He="[object Number]",Ve="[object Null]",$e="[object Object]",dt="[object Promise]",pt="[object Proxy]",Me="[object RegExp]",Oe="[object Set]",Re="[object String]",Fe="[object Symbol]",ze="[object Undefined]",Pe="[object WeakMap]",Ue="[object WeakSet]",Se="[object ArrayBuffer]",Ce="[object DataView]",Be="[object Float32Array]",xe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",Qt="[object Uint16Array]",hr="[object Uint32Array]",Br=/\b__p \+= '';/g,er=/\b(__p \+=) '' \+/g,ei=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pi=/&(?:amp|lt|gt|quot|#39);/g,Ti=/[&<>"']/g,mt=RegExp(pi.source),gt=RegExp(Ti.source),wt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,vt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ft=/^\w*$/,Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(Dt.source),St=/^\s+/,Pt=/\s/,It=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,$t=/,? & /,Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ma=/[()=,{}\[\]\/\s]/,za=/\\(\\)?/g,qa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ir=/\w*$/,Ha=/^[-+]0x[0-9a-f]+$/i,Ba=/^0b[01]+$/i,Ka=/^\[object .+?Constructor\]$/,Va=/^0o[0-7]+$/i,ka=/^(?:0|[1-9]\d*)$/,ti=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,en=/($^)/,Ga=/['\n\r\u2028\u2029\\]/g,tn="\\ud800-\\udfff",Wa="\\u0300-\\u036f",Ya="\\ufe20-\\ufe2f",rn="\\u20d0-\\u20ff",fs=Wa+Ya+rn,ds="\\u2700-\\u27bf",$r="a-z\\xdf-\\xf6\\xf8-\\xff",Ja="\\xac\\xb1\\xd7\\xf7",Xa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Za="\\u2000-\\u206f",Qa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ps="A-Z\\xc0-\\xd6\\xd8-\\xde",gs="\\ufe0e\\ufe0f",Ni=Ja+Xa+Za+Qa,Pn="['â€™]",Ri="["+tn+"]",Cn="["+Ni+"]",Fi="["+fs+"]",_s="\\d+",eo="["+ds+"]",ys="["+$r+"]",vs="[^"+tn+Ni+_s+ds+$r+ps+"]",nn="\\ud83c[\\udffb-\\udfff]",to="(?:"+Fi+"|"+nn+")",bs="[^"+tn+"]",sn="(?:\\ud83c[\\udde6-\\uddff]){2}",gi="[\\ud800-\\udbff][\\udc00-\\udfff]",vr="["+ps+"]",ms="\\u200d",ws="(?:"+ys+"|"+vs+")",Kr="(?:"+vr+"|"+vs+")",Es="(?:"+Pn+"(?:d|ll|m|re|s|t|ve))?",Ds="(?:"+Pn+"(?:D|LL|M|RE|S|T|VE))?",Ss=to+"?",Is="["+gs+"]?",ro="(?:"+ms+"(?:"+[bs,sn,gi].join("|")+")"+Is+Ss+")*",ri="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Os="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",xs=Is+Ss+ro,an="(?:"+[eo,sn,gi].join("|")+")"+xs,io="(?:"+[bs+Fi+"?",Fi,sn,gi,Ri].join("|")+")",An=RegExp(Pn,"g"),no=RegExp(Fi,"g"),on=RegExp(nn+"(?="+nn+")|"+io+xs,"g"),Ps=RegExp([vr+"?"+ys+"+"+Es+"(?="+[Cn,vr,"$"].join("|")+")",Kr+"+"+Ds+"(?="+[Cn,vr+ws,"$"].join("|")+")",vr+"?"+ws+"+"+Es,vr+"+"+Ds,Os,ri,_s,an].join("|"),"g"),Cs=RegExp("["+ms+tn+fs+gs+"]"),Ui=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,As=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],so=-1,at={};at[Be]=at[xe]=at[ke]=at[We]=at[et]=at[tt]=at[Je]=at[Qt]=at[hr]=!0,at[le]=at[be]=at[Se]=at[G]=at[Ce]=at[z]=at[R]=at[he]=at[Ie]=at[He]=at[$e]=at[Me]=at[Oe]=at[Re]=at[Pe]=!1;var st={};st[le]=st[be]=st[Se]=st[Ce]=st[G]=st[z]=st[Be]=st[xe]=st[ke]=st[We]=st[et]=st[Ie]=st[He]=st[$e]=st[Me]=st[Oe]=st[Re]=st[Fe]=st[tt]=st[Je]=st[Qt]=st[hr]=!0,st[R]=st[he]=st[Pe]=!1;var O={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ge={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ot=parseFloat,Te=parseInt,lt=typeof ns=="object"&&ns&&ns.Object===Object&&ns,Mt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=lt||Mt||Function("return this")(),ct=t&&!t.nodeType&&t,Ct=ct&&!0&&n&&!n.nodeType&&n,lr=Ct&&Ct.exports===ct,zt=lr&&lt.process,ft=function(){try{var K=Ct&&Ct.require&&Ct.require("util").types;return K||zt&&zt.binding&&zt.binding("util")}catch{}}(),tr=ft&&ft.isArrayBuffer,Lr=ft&&ft.isDate,Or=ft&&ft.isMap,Vr=ft&&ft.isRegExp,Tn=ft&&ft.isSet,ji=ft&&ft.isTypedArray;function Kt(K,re,Q){switch(Q.length){case 0:return K.call(re);case 1:return K.call(re,Q[0]);case 2:return K.call(re,Q[0],Q[1]);case 3:return K.call(re,Q[0],Q[1],Q[2])}return K.apply(re,Q)}function Wd(K,re,Q,_e){for(var Ae=-1,rt=K==null?0:K.length;++Ae<rt;){var Ht=K[Ae];re(_e,Ht,Q(Ht),K)}return _e}function xr(K,re){for(var Q=-1,_e=K==null?0:K.length;++Q<_e&&re(K[Q],Q,K)!==!1;);return K}function Yd(K,re){for(var Q=K==null?0:K.length;Q--&&re(K[Q],Q,K)!==!1;);return K}function _u(K,re){for(var Q=-1,_e=K==null?0:K.length;++Q<_e;)if(!re(K[Q],Q,K))return!1;return!0}function _i(K,re){for(var Q=-1,_e=K==null?0:K.length,Ae=0,rt=[];++Q<_e;){var Ht=K[Q];re(Ht,Q,K)&&(rt[Ae++]=Ht)}return rt}function Ts(K,re){var Q=K==null?0:K.length;return!!Q&&cn(K,re,0)>-1}function ao(K,re,Q){for(var _e=-1,Ae=K==null?0:K.length;++_e<Ae;)if(Q(re,K[_e]))return!0;return!1}function yt(K,re){for(var Q=-1,_e=K==null?0:K.length,Ae=Array(_e);++Q<_e;)Ae[Q]=re(K[Q],Q,K);return Ae}function yi(K,re){for(var Q=-1,_e=re.length,Ae=K.length;++Q<_e;)K[Ae+Q]=re[Q];return K}function oo(K,re,Q,_e){var Ae=-1,rt=K==null?0:K.length;for(_e&&rt&&(Q=K[++Ae]);++Ae<rt;)Q=re(Q,K[Ae],Ae,K);return Q}function Jd(K,re,Q,_e){var Ae=K==null?0:K.length;for(_e&&Ae&&(Q=K[--Ae]);Ae--;)Q=re(Q,K[Ae],Ae,K);return Q}function co(K,re){for(var Q=-1,_e=K==null?0:K.length;++Q<_e;)if(re(K[Q],Q,K))return!0;return!1}var Xd=uo("length");function Zd(K){return K.split("")}function Qd(K){return K.match(Lt)||[]}function yu(K,re,Q){var _e;return Q(K,function(Ae,rt,Ht){if(re(Ae,rt,Ht))return _e=rt,!1}),_e}function Ns(K,re,Q,_e){for(var Ae=K.length,rt=Q+(_e?1:-1);_e?rt--:++rt<Ae;)if(re(K[rt],rt,K))return rt;return-1}function cn(K,re,Q){return re===re?lp(K,re,Q):Ns(K,vu,Q)}function ep(K,re,Q,_e){for(var Ae=Q-1,rt=K.length;++Ae<rt;)if(_e(K[Ae],re))return Ae;return-1}function vu(K){return K!==K}function bu(K,re){var Q=K==null?0:K.length;return Q?lo(K,re)/Q:k}function uo(K){return function(re){return re==null?r:re[K]}}function ho(K){return function(re){return K==null?r:K[re]}}function mu(K,re,Q,_e,Ae){return Ae(K,function(rt,Ht,ut){Q=_e?(_e=!1,rt):re(Q,rt,Ht,ut)}),Q}function tp(K,re){var Q=K.length;for(K.sort(re);Q--;)K[Q]=K[Q].value;return K}function lo(K,re){for(var Q,_e=-1,Ae=K.length;++_e<Ae;){var rt=re(K[_e]);rt!==r&&(Q=Q===r?rt:Q+rt)}return Q}function fo(K,re){for(var Q=-1,_e=Array(K);++Q<K;)_e[Q]=re(Q);return _e}function rp(K,re){return yt(re,function(Q){return[Q,K[Q]]})}function wu(K){return K&&K.slice(0,Iu(K)+1).replace(St,"")}function br(K){return function(re){return K(re)}}function po(K,re){return yt(re,function(Q){return K[Q]})}function Nn(K,re){return K.has(re)}function Eu(K,re){for(var Q=-1,_e=K.length;++Q<_e&&cn(re,K[Q],0)>-1;);return Q}function Du(K,re){for(var Q=K.length;Q--&&cn(re,K[Q],0)>-1;);return Q}function ip(K,re){for(var Q=K.length,_e=0;Q--;)K[Q]===re&&++_e;return _e}var np=ho(O),sp=ho(B);function ap(K){return"\\"+ge[K]}function op(K,re){return K==null?r:K[re]}function un(K){return Cs.test(K)}function cp(K){return Ui.test(K)}function up(K){for(var re,Q=[];!(re=K.next()).done;)Q.push(re.value);return Q}function go(K){var re=-1,Q=Array(K.size);return K.forEach(function(_e,Ae){Q[++re]=[Ae,_e]}),Q}function Su(K,re){return function(Q){return K(re(Q))}}function vi(K,re){for(var Q=-1,_e=K.length,Ae=0,rt=[];++Q<_e;){var Ht=K[Q];(Ht===re||Ht===A)&&(K[Q]=A,rt[Ae++]=Q)}return rt}function Rs(K){var re=-1,Q=Array(K.size);return K.forEach(function(_e){Q[++re]=_e}),Q}function hp(K){var re=-1,Q=Array(K.size);return K.forEach(function(_e){Q[++re]=[_e,_e]}),Q}function lp(K,re,Q){for(var _e=Q-1,Ae=K.length;++_e<Ae;)if(K[_e]===re)return _e;return-1}function fp(K,re,Q){for(var _e=Q+1;_e--;)if(K[_e]===re)return _e;return _e}function hn(K){return un(K)?pp(K):Xd(K)}function Mr(K){return un(K)?gp(K):Zd(K)}function Iu(K){for(var re=K.length;re--&&Pt.test(K.charAt(re)););return re}var dp=ho(oe);function pp(K){for(var re=on.lastIndex=0;on.test(K);)++re;return re}function gp(K){return K.match(on)||[]}function _p(K){return K.match(Ps)||[]}var yp=function K(re){re=re==null?Xe:ln.defaults(Xe.Object(),re,ln.pick(Xe,As));var Q=re.Array,_e=re.Date,Ae=re.Error,rt=re.Function,Ht=re.Math,ut=re.Object,_o=re.RegExp,vp=re.String,Pr=re.TypeError,Fs=Q.prototype,bp=rt.prototype,fn=ut.prototype,Us=re["__core-js_shared__"],js=bp.toString,nt=fn.hasOwnProperty,mp=0,Ou=function(){var e=/[^.]+$/.exec(Us&&Us.keys&&Us.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),$s=fn.toString,wp=js.call(ut),Ep=Xe._,Dp=_o("^"+js.call(nt).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ls=lr?re.Buffer:r,bi=re.Symbol,Ms=re.Uint8Array,xu=Ls?Ls.allocUnsafe:r,zs=Su(ut.getPrototypeOf,ut),Pu=ut.create,Cu=fn.propertyIsEnumerable,qs=Fs.splice,Au=bi?bi.isConcatSpreadable:r,Rn=bi?bi.iterator:r,$i=bi?bi.toStringTag:r,Hs=function(){try{var e=Hi(ut,"defineProperty");return e({},"",{}),e}catch{}}(),Sp=re.clearTimeout!==Xe.clearTimeout&&re.clearTimeout,Ip=_e&&_e.now!==Xe.Date.now&&_e.now,Op=re.setTimeout!==Xe.setTimeout&&re.setTimeout,Bs=Ht.ceil,Ks=Ht.floor,yo=ut.getOwnPropertySymbols,xp=Ls?Ls.isBuffer:r,Tu=re.isFinite,Pp=Fs.join,Cp=Su(ut.keys,ut),Bt=Ht.max,Jt=Ht.min,Ap=_e.now,Tp=re.parseInt,Nu=Ht.random,Np=Fs.reverse,vo=Hi(re,"DataView"),Fn=Hi(re,"Map"),bo=Hi(re,"Promise"),dn=Hi(re,"Set"),Un=Hi(re,"WeakMap"),jn=Hi(ut,"create"),Vs=Un&&new Un,pn={},Rp=Bi(vo),Fp=Bi(Fn),Up=Bi(bo),jp=Bi(dn),$p=Bi(Un),ks=bi?bi.prototype:r,$n=ks?ks.valueOf:r,Ru=ks?ks.toString:r;function E(e){if(Ot(e)&&!Ne(e)&&!(e instanceof Ye)){if(e instanceof Cr)return e;if(nt.call(e,"__wrapped__"))return Fh(e)}return new Cr(e)}var gn=function(){function e(){}return function(i){if(!bt(i))return{};if(Pu)return Pu(i);e.prototype=i;var a=new e;return e.prototype=r,a}}();function Gs(){}function Cr(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}E.templateSettings={escape:wt,evaluate:Et,interpolate:vt,variable:"",imports:{_:E}},E.prototype=Gs.prototype,E.prototype.constructor=E,Cr.prototype=gn(Gs.prototype),Cr.prototype.constructor=Cr;function Ye(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function Lp(){var e=new Ye(this.__wrapped__);return e.__actions__=fr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=fr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=fr(this.__views__),e}function Mp(){if(this.__filtered__){var e=new Ye(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function zp(){var e=this.__wrapped__.value(),i=this.__dir__,a=Ne(e),u=i<0,_=a?e.length:0,D=Zg(0,_,this.__views__),T=D.start,U=D.end,V=U-T,ne=u?U:T-1,ae=this.__iteratees__,ce=ae.length,fe=0,ve=Jt(V,this.__takeCount__);if(!a||!u&&_==V&&ve==V)return ih(e,this.__actions__);var Ee=[];e:for(;V--&&fe<ve;){ne+=i;for(var qe=-1,De=e[ne];++qe<ce;){var Ge=ae[qe],Ze=Ge.iteratee,Er=Ge.type,nr=Ze(De);if(Er==p)De=nr;else if(!nr){if(Er==b)continue e;break e}}Ee[fe++]=De}return Ee}Ye.prototype=gn(Gs.prototype),Ye.prototype.constructor=Ye;function Li(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function qp(){this.__data__=jn?jn(null):{},this.size=0}function Hp(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function Bp(e){var i=this.__data__;if(jn){var a=i[e];return a===w?r:a}return nt.call(i,e)?i[e]:r}function Kp(e){var i=this.__data__;return jn?i[e]!==r:nt.call(i,e)}function Vp(e,i){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=jn&&i===r?w:i,this}Li.prototype.clear=qp,Li.prototype.delete=Hp,Li.prototype.get=Bp,Li.prototype.has=Kp,Li.prototype.set=Vp;function ii(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function kp(){this.__data__=[],this.size=0}function Gp(e){var i=this.__data__,a=Ws(i,e);if(a<0)return!1;var u=i.length-1;return a==u?i.pop():qs.call(i,a,1),--this.size,!0}function Wp(e){var i=this.__data__,a=Ws(i,e);return a<0?r:i[a][1]}function Yp(e){return Ws(this.__data__,e)>-1}function Jp(e,i){var a=this.__data__,u=Ws(a,e);return u<0?(++this.size,a.push([e,i])):a[u][1]=i,this}ii.prototype.clear=kp,ii.prototype.delete=Gp,ii.prototype.get=Wp,ii.prototype.has=Yp,ii.prototype.set=Jp;function ni(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function Xp(){this.size=0,this.__data__={hash:new Li,map:new(Fn||ii),string:new Li}}function Zp(e){var i=aa(this,e).delete(e);return this.size-=i?1:0,i}function Qp(e){return aa(this,e).get(e)}function eg(e){return aa(this,e).has(e)}function tg(e,i){var a=aa(this,e),u=a.size;return a.set(e,i),this.size+=a.size==u?0:1,this}ni.prototype.clear=Xp,ni.prototype.delete=Zp,ni.prototype.get=Qp,ni.prototype.has=eg,ni.prototype.set=tg;function Mi(e){var i=-1,a=e==null?0:e.length;for(this.__data__=new ni;++i<a;)this.add(e[i])}function rg(e){return this.__data__.set(e,w),this}function ig(e){return this.__data__.has(e)}Mi.prototype.add=Mi.prototype.push=rg,Mi.prototype.has=ig;function zr(e){var i=this.__data__=new ii(e);this.size=i.size}function ng(){this.__data__=new ii,this.size=0}function sg(e){var i=this.__data__,a=i.delete(e);return this.size=i.size,a}function ag(e){return this.__data__.get(e)}function og(e){return this.__data__.has(e)}function cg(e,i){var a=this.__data__;if(a instanceof ii){var u=a.__data__;if(!Fn||u.length<o-1)return u.push([e,i]),this.size=++a.size,this;a=this.__data__=new ni(u)}return a.set(e,i),this.size=a.size,this}zr.prototype.clear=ng,zr.prototype.delete=sg,zr.prototype.get=ag,zr.prototype.has=og,zr.prototype.set=cg;function Fu(e,i){var a=Ne(e),u=!a&&Ki(e),_=!a&&!u&&Si(e),D=!a&&!u&&!_&&bn(e),T=a||u||_||D,U=T?fo(e.length,vp):[],V=U.length;for(var ne in e)(i||nt.call(e,ne))&&!(T&&(ne=="length"||_&&(ne=="offset"||ne=="parent")||D&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||ci(ne,V)))&&U.push(ne);return U}function Uu(e){var i=e.length;return i?e[Ao(0,i-1)]:r}function ug(e,i){return oa(fr(e),zi(i,0,e.length))}function hg(e){return oa(fr(e))}function mo(e,i,a){(a!==r&&!qr(e[i],a)||a===r&&!(i in e))&&si(e,i,a)}function Ln(e,i,a){var u=e[i];(!(nt.call(e,i)&&qr(u,a))||a===r&&!(i in e))&&si(e,i,a)}function Ws(e,i){for(var a=e.length;a--;)if(qr(e[a][0],i))return a;return-1}function lg(e,i,a,u){return mi(e,function(_,D,T){i(u,_,a(_),T)}),u}function ju(e,i){return e&&Gr(i,Vt(i),e)}function fg(e,i){return e&&Gr(i,pr(i),e)}function si(e,i,a){i=="__proto__"&&Hs?Hs(e,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[i]=a}function wo(e,i){for(var a=-1,u=i.length,_=Q(u),D=e==null;++a<u;)_[a]=D?r:tc(e,i[a]);return _}function zi(e,i,a){return e===e&&(a!==r&&(e=e<=a?e:a),i!==r&&(e=e>=i?e:i)),e}function Ar(e,i,a,u,_,D){var T,U=i&q,V=i&W,ne=i&H;if(a&&(T=_?a(e,u,_,D):a(e)),T!==r)return T;if(!bt(e))return e;var ae=Ne(e);if(ae){if(T=e0(e),!U)return fr(e,T)}else{var ce=Xt(e),fe=ce==he||ce==pe;if(Si(e))return ah(e,U);if(ce==$e||ce==le||fe&&!_){if(T=V||fe?{}:Ih(e),!U)return V?Bg(e,fg(T,e)):Hg(e,ju(T,e))}else{if(!st[ce])return _?e:{};T=t0(e,ce,U)}}D||(D=new zr);var ve=D.get(e);if(ve)return ve;D.set(e,T),el(e)?e.forEach(function(De){T.add(Ar(De,i,a,De,e,D))}):Zh(e)&&e.forEach(function(De,Ge){T.set(Ge,Ar(De,i,a,Ge,e,D))});var Ee=ne?V?qo:zo:V?pr:Vt,qe=ae?r:Ee(e);return xr(qe||e,function(De,Ge){qe&&(Ge=De,De=e[Ge]),Ln(T,Ge,Ar(De,i,a,Ge,e,D))}),T}function dg(e){var i=Vt(e);return function(a){return $u(a,e,i)}}function $u(e,i,a){var u=a.length;if(e==null)return!u;for(e=ut(e);u--;){var _=a[u],D=i[_],T=e[_];if(T===r&&!(_ in e)||!D(T))return!1}return!0}function Lu(e,i,a){if(typeof e!="function")throw new Pr(m);return Vn(function(){e.apply(r,a)},i)}function Mn(e,i,a,u){var _=-1,D=Ts,T=!0,U=e.length,V=[],ne=i.length;if(!U)return V;a&&(i=yt(i,br(a))),u?(D=ao,T=!1):i.length>=o&&(D=Nn,T=!1,i=new Mi(i));e:for(;++_<U;){var ae=e[_],ce=a==null?ae:a(ae);if(ae=u||ae!==0?ae:0,T&&ce===ce){for(var fe=ne;fe--;)if(i[fe]===ce)continue e;V.push(ae)}else D(i,ce,u)||V.push(ae)}return V}var mi=lh(kr),Mu=lh(Do,!0);function pg(e,i){var a=!0;return mi(e,function(u,_,D){return a=!!i(u,_,D),a}),a}function Ys(e,i,a){for(var u=-1,_=e.length;++u<_;){var D=e[u],T=i(D);if(T!=null&&(U===r?T===T&&!wr(T):a(T,U)))var U=T,V=D}return V}function gg(e,i,a,u){var _=e.length;for(a=Le(a),a<0&&(a=-a>_?0:_+a),u=u===r||u>_?_:Le(u),u<0&&(u+=_),u=a>u?0:rl(u);a<u;)e[a++]=i;return e}function zu(e,i){var a=[];return mi(e,function(u,_,D){i(u,_,D)&&a.push(u)}),a}function Gt(e,i,a,u,_){var D=-1,T=e.length;for(a||(a=i0),_||(_=[]);++D<T;){var U=e[D];i>0&&a(U)?i>1?Gt(U,i-1,a,u,_):yi(_,U):u||(_[_.length]=U)}return _}var Eo=fh(),qu=fh(!0);function kr(e,i){return e&&Eo(e,i,Vt)}function Do(e,i){return e&&qu(e,i,Vt)}function Js(e,i){return _i(i,function(a){return ui(e[a])})}function qi(e,i){i=Ei(i,e);for(var a=0,u=i.length;e!=null&&a<u;)e=e[Wr(i[a++])];return a&&a==u?e:r}function Hu(e,i,a){var u=i(e);return Ne(e)?u:yi(u,a(e))}function rr(e){return e==null?e===r?ze:Ve:$i&&$i in ut(e)?Xg(e):h0(e)}function So(e,i){return e>i}function _g(e,i){return e!=null&&nt.call(e,i)}function yg(e,i){return e!=null&&i in ut(e)}function vg(e,i,a){return e>=Jt(i,a)&&e<Bt(i,a)}function Io(e,i,a){for(var u=a?ao:Ts,_=e[0].length,D=e.length,T=D,U=Q(D),V=1/0,ne=[];T--;){var ae=e[T];T&&i&&(ae=yt(ae,br(i))),V=Jt(ae.length,V),U[T]=!a&&(i||_>=120&&ae.length>=120)?new Mi(T&&ae):r}ae=e[0];var ce=-1,fe=U[0];e:for(;++ce<_&&ne.length<V;){var ve=ae[ce],Ee=i?i(ve):ve;if(ve=a||ve!==0?ve:0,!(fe?Nn(fe,Ee):u(ne,Ee,a))){for(T=D;--T;){var qe=U[T];if(!(qe?Nn(qe,Ee):u(e[T],Ee,a)))continue e}fe&&fe.push(Ee),ne.push(ve)}}return ne}function bg(e,i,a,u){return kr(e,function(_,D,T){i(u,a(_),D,T)}),u}function zn(e,i,a){i=Ei(i,e),e=Ch(e,i);var u=e==null?e:e[Wr(Nr(i))];return u==null?r:Kt(u,e,a)}function Bu(e){return Ot(e)&&rr(e)==le}function mg(e){return Ot(e)&&rr(e)==Se}function wg(e){return Ot(e)&&rr(e)==z}function qn(e,i,a,u,_){return e===i?!0:e==null||i==null||!Ot(e)&&!Ot(i)?e!==e&&i!==i:Eg(e,i,a,u,qn,_)}function Eg(e,i,a,u,_,D){var T=Ne(e),U=Ne(i),V=T?be:Xt(e),ne=U?be:Xt(i);V=V==le?$e:V,ne=ne==le?$e:ne;var ae=V==$e,ce=ne==$e,fe=V==ne;if(fe&&Si(e)){if(!Si(i))return!1;T=!0,ae=!1}if(fe&&!ae)return D||(D=new zr),T||bn(e)?Eh(e,i,a,u,_,D):Yg(e,i,V,a,u,_,D);if(!(a&$)){var ve=ae&&nt.call(e,"__wrapped__"),Ee=ce&&nt.call(i,"__wrapped__");if(ve||Ee){var qe=ve?e.value():e,De=Ee?i.value():i;return D||(D=new zr),_(qe,De,a,u,D)}}return fe?(D||(D=new zr),Jg(e,i,a,u,_,D)):!1}function Dg(e){return Ot(e)&&Xt(e)==Ie}function Oo(e,i,a,u){var _=a.length,D=_,T=!u;if(e==null)return!D;for(e=ut(e);_--;){var U=a[_];if(T&&U[2]?U[1]!==e[U[0]]:!(U[0]in e))return!1}for(;++_<D;){U=a[_];var V=U[0],ne=e[V],ae=U[1];if(T&&U[2]){if(ne===r&&!(V in e))return!1}else{var ce=new zr;if(u)var fe=u(ne,ae,V,e,i,ce);if(!(fe===r?qn(ae,ne,$|X,u,ce):fe))return!1}}return!0}function Ku(e){if(!bt(e)||s0(e))return!1;var i=ui(e)?Dp:Ka;return i.test(Bi(e))}function Sg(e){return Ot(e)&&rr(e)==Me}function Ig(e){return Ot(e)&&Xt(e)==Oe}function Og(e){return Ot(e)&&da(e.length)&&!!at[rr(e)]}function Vu(e){return typeof e=="function"?e:e==null?gr:typeof e=="object"?Ne(e)?Wu(e[0],e[1]):Gu(e):dl(e)}function xo(e){if(!Kn(e))return Cp(e);var i=[];for(var a in ut(e))nt.call(e,a)&&a!="constructor"&&i.push(a);return i}function xg(e){if(!bt(e))return u0(e);var i=Kn(e),a=[];for(var u in e)u=="constructor"&&(i||!nt.call(e,u))||a.push(u);return a}function Po(e,i){return e<i}function ku(e,i){var a=-1,u=dr(e)?Q(e.length):[];return mi(e,function(_,D,T){u[++a]=i(_,D,T)}),u}function Gu(e){var i=Bo(e);return i.length==1&&i[0][2]?xh(i[0][0],i[0][1]):function(a){return a===e||Oo(a,e,i)}}function Wu(e,i){return Vo(e)&&Oh(i)?xh(Wr(e),i):function(a){var u=tc(a,e);return u===r&&u===i?rc(a,e):qn(i,u,$|X)}}function Xs(e,i,a,u,_){e!==i&&Eo(i,function(D,T){if(_||(_=new zr),bt(D))Pg(e,i,T,a,Xs,u,_);else{var U=u?u(Go(e,T),D,T+"",e,i,_):r;U===r&&(U=D),mo(e,T,U)}},pr)}function Pg(e,i,a,u,_,D,T){var U=Go(e,a),V=Go(i,a),ne=T.get(V);if(ne){mo(e,a,ne);return}var ae=D?D(U,V,a+"",e,i,T):r,ce=ae===r;if(ce){var fe=Ne(V),ve=!fe&&Si(V),Ee=!fe&&!ve&&bn(V);ae=V,fe||ve||Ee?Ne(U)?ae=U:At(U)?ae=fr(U):ve?(ce=!1,ae=ah(V,!0)):Ee?(ce=!1,ae=oh(V,!0)):ae=[]:kn(V)||Ki(V)?(ae=U,Ki(U)?ae=il(U):(!bt(U)||ui(U))&&(ae=Ih(V))):ce=!1}ce&&(T.set(V,ae),_(ae,V,u,D,T),T.delete(V)),mo(e,a,ae)}function Yu(e,i){var a=e.length;if(a)return i+=i<0?a:0,ci(i,a)?e[i]:r}function Ju(e,i,a){i.length?i=yt(i,function(D){return Ne(D)?function(T){return qi(T,D.length===1?D[0]:D)}:D}):i=[gr];var u=-1;i=yt(i,br(we()));var _=ku(e,function(D,T,U){var V=yt(i,function(ne){return ne(D)});return{criteria:V,index:++u,value:D}});return tp(_,function(D,T){return qg(D,T,a)})}function Cg(e,i){return Xu(e,i,function(a,u){return rc(e,u)})}function Xu(e,i,a){for(var u=-1,_=i.length,D={};++u<_;){var T=i[u],U=qi(e,T);a(U,T)&&Hn(D,Ei(T,e),U)}return D}function Ag(e){return function(i){return qi(i,e)}}function Co(e,i,a,u){var _=u?ep:cn,D=-1,T=i.length,U=e;for(e===i&&(i=fr(i)),a&&(U=yt(e,br(a)));++D<T;)for(var V=0,ne=i[D],ae=a?a(ne):ne;(V=_(U,ae,V,u))>-1;)U!==e&&qs.call(U,V,1),qs.call(e,V,1);return e}function Zu(e,i){for(var a=e?i.length:0,u=a-1;a--;){var _=i[a];if(a==u||_!==D){var D=_;ci(_)?qs.call(e,_,1):Ro(e,_)}}return e}function Ao(e,i){return e+Ks(Nu()*(i-e+1))}function Tg(e,i,a,u){for(var _=-1,D=Bt(Bs((i-e)/(a||1)),0),T=Q(D);D--;)T[u?D:++_]=e,e+=a;return T}function To(e,i){var a="";if(!e||i<1||i>J)return a;do i%2&&(a+=e),i=Ks(i/2),i&&(e+=e);while(i);return a}function Ke(e,i){return Wo(Ph(e,i,gr),e+"")}function Ng(e){return Uu(mn(e))}function Rg(e,i){var a=mn(e);return oa(a,zi(i,0,a.length))}function Hn(e,i,a,u){if(!bt(e))return e;i=Ei(i,e);for(var _=-1,D=i.length,T=D-1,U=e;U!=null&&++_<D;){var V=Wr(i[_]),ne=a;if(V==="__proto__"||V==="constructor"||V==="prototype")return e;if(_!=T){var ae=U[V];ne=u?u(ae,V,U):r,ne===r&&(ne=bt(ae)?ae:ci(i[_+1])?[]:{})}Ln(U,V,ne),U=U[V]}return e}var Qu=Vs?function(e,i){return Vs.set(e,i),e}:gr,Fg=Hs?function(e,i){return Hs(e,"toString",{configurable:!0,enumerable:!1,value:nc(i),writable:!0})}:gr;function Ug(e){return oa(mn(e))}function Tr(e,i,a){var u=-1,_=e.length;i<0&&(i=-i>_?0:_+i),a=a>_?_:a,a<0&&(a+=_),_=i>a?0:a-i>>>0,i>>>=0;for(var D=Q(_);++u<_;)D[u]=e[u+i];return D}function jg(e,i){var a;return mi(e,function(u,_,D){return a=i(u,_,D),!a}),!!a}function Zs(e,i,a){var u=0,_=e==null?u:e.length;if(typeof i=="number"&&i===i&&_<=ie){for(;u<_;){var D=u+_>>>1,T=e[D];T!==null&&!wr(T)&&(a?T<=i:T<i)?u=D+1:_=D}return _}return No(e,i,gr,a)}function No(e,i,a,u){var _=0,D=e==null?0:e.length;if(D===0)return 0;i=a(i);for(var T=i!==i,U=i===null,V=wr(i),ne=i===r;_<D;){var ae=Ks((_+D)/2),ce=a(e[ae]),fe=ce!==r,ve=ce===null,Ee=ce===ce,qe=wr(ce);if(T)var De=u||Ee;else ne?De=Ee&&(u||fe):U?De=Ee&&fe&&(u||!ve):V?De=Ee&&fe&&!ve&&(u||!qe):ve||qe?De=!1:De=u?ce<=i:ce<i;De?_=ae+1:D=ae}return Jt(D,se)}function eh(e,i){for(var a=-1,u=e.length,_=0,D=[];++a<u;){var T=e[a],U=i?i(T):T;if(!a||!qr(U,V)){var V=U;D[_++]=T===0?0:T}}return D}function th(e){return typeof e=="number"?e:wr(e)?k:+e}function mr(e){if(typeof e=="string")return e;if(Ne(e))return yt(e,mr)+"";if(wr(e))return Ru?Ru.call(e):"";var i=e+"";return i=="0"&&1/e==-L?"-0":i}function wi(e,i,a){var u=-1,_=Ts,D=e.length,T=!0,U=[],V=U;if(a)T=!1,_=ao;else if(D>=o){var ne=i?null:Gg(e);if(ne)return Rs(ne);T=!1,_=Nn,V=new Mi}else V=i?[]:U;e:for(;++u<D;){var ae=e[u],ce=i?i(ae):ae;if(ae=a||ae!==0?ae:0,T&&ce===ce){for(var fe=V.length;fe--;)if(V[fe]===ce)continue e;i&&V.push(ce),U.push(ae)}else _(V,ce,a)||(V!==U&&V.push(ce),U.push(ae))}return U}function Ro(e,i){return i=Ei(i,e),e=Ch(e,i),e==null||delete e[Wr(Nr(i))]}function rh(e,i,a,u){return Hn(e,i,a(qi(e,i)),u)}function Qs(e,i,a,u){for(var _=e.length,D=u?_:-1;(u?D--:++D<_)&&i(e[D],D,e););return a?Tr(e,u?0:D,u?D+1:_):Tr(e,u?D+1:0,u?_:D)}function ih(e,i){var a=e;return a instanceof Ye&&(a=a.value()),oo(i,function(u,_){return _.func.apply(_.thisArg,yi([u],_.args))},a)}function Fo(e,i,a){var u=e.length;if(u<2)return u?wi(e[0]):[];for(var _=-1,D=Q(u);++_<u;)for(var T=e[_],U=-1;++U<u;)U!=_&&(D[_]=Mn(D[_]||T,e[U],i,a));return wi(Gt(D,1),i,a)}function nh(e,i,a){for(var u=-1,_=e.length,D=i.length,T={};++u<_;){var U=u<D?i[u]:r;a(T,e[u],U)}return T}function Uo(e){return At(e)?e:[]}function jo(e){return typeof e=="function"?e:gr}function Ei(e,i){return Ne(e)?e:Vo(e,i)?[e]:Rh(it(e))}var $g=Ke;function Di(e,i,a){var u=e.length;return a=a===r?u:a,!i&&a>=u?e:Tr(e,i,a)}var sh=Sp||function(e){return Xe.clearTimeout(e)};function ah(e,i){if(i)return e.slice();var a=e.length,u=xu?xu(a):new e.constructor(a);return e.copy(u),u}function $o(e){var i=new e.constructor(e.byteLength);return new Ms(i).set(new Ms(e)),i}function Lg(e,i){var a=i?$o(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function Mg(e){var i=new e.constructor(e.source,Ir.exec(e));return i.lastIndex=e.lastIndex,i}function zg(e){return $n?ut($n.call(e)):{}}function oh(e,i){var a=i?$o(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function ch(e,i){if(e!==i){var a=e!==r,u=e===null,_=e===e,D=wr(e),T=i!==r,U=i===null,V=i===i,ne=wr(i);if(!U&&!ne&&!D&&e>i||D&&T&&V&&!U&&!ne||u&&T&&V||!a&&V||!_)return 1;if(!u&&!D&&!ne&&e<i||ne&&a&&_&&!u&&!D||U&&a&&_||!T&&_||!V)return-1}return 0}function qg(e,i,a){for(var u=-1,_=e.criteria,D=i.criteria,T=_.length,U=a.length;++u<T;){var V=ch(_[u],D[u]);if(V){if(u>=U)return V;var ne=a[u];return V*(ne=="desc"?-1:1)}}return e.index-i.index}function uh(e,i,a,u){for(var _=-1,D=e.length,T=a.length,U=-1,V=i.length,ne=Bt(D-T,0),ae=Q(V+ne),ce=!u;++U<V;)ae[U]=i[U];for(;++_<T;)(ce||_<D)&&(ae[a[_]]=e[_]);for(;ne--;)ae[U++]=e[_++];return ae}function hh(e,i,a,u){for(var _=-1,D=e.length,T=-1,U=a.length,V=-1,ne=i.length,ae=Bt(D-U,0),ce=Q(ae+ne),fe=!u;++_<ae;)ce[_]=e[_];for(var ve=_;++V<ne;)ce[ve+V]=i[V];for(;++T<U;)(fe||_<D)&&(ce[ve+a[T]]=e[_++]);return ce}function fr(e,i){var a=-1,u=e.length;for(i||(i=Q(u));++a<u;)i[a]=e[a];return i}function Gr(e,i,a,u){var _=!a;a||(a={});for(var D=-1,T=i.length;++D<T;){var U=i[D],V=u?u(a[U],e[U],U,a,e):r;V===r&&(V=e[U]),_?si(a,U,V):Ln(a,U,V)}return a}function Hg(e,i){return Gr(e,Ko(e),i)}function Bg(e,i){return Gr(e,Dh(e),i)}function ea(e,i){return function(a,u){var _=Ne(a)?Wd:lg,D=i?i():{};return _(a,e,we(u,2),D)}}function _n(e){return Ke(function(i,a){var u=-1,_=a.length,D=_>1?a[_-1]:r,T=_>2?a[2]:r;for(D=e.length>3&&typeof D=="function"?(_--,D):r,T&&ir(a[0],a[1],T)&&(D=_<3?r:D,_=1),i=ut(i);++u<_;){var U=a[u];U&&e(i,U,u,D)}return i})}function lh(e,i){return function(a,u){if(a==null)return a;if(!dr(a))return e(a,u);for(var _=a.length,D=i?_:-1,T=ut(a);(i?D--:++D<_)&&u(T[D],D,T)!==!1;);return a}}function fh(e){return function(i,a,u){for(var _=-1,D=ut(i),T=u(i),U=T.length;U--;){var V=T[e?U:++_];if(a(D[V],V,D)===!1)break}return i}}function Kg(e,i,a){var u=i&ee,_=Bn(e);function D(){var T=this&&this!==Xe&&this instanceof D?_:e;return T.apply(u?a:this,arguments)}return D}function dh(e){return function(i){i=it(i);var a=un(i)?Mr(i):r,u=a?a[0]:i.charAt(0),_=a?Di(a,1).join(""):i.slice(1);return u[e]()+_}}function yn(e){return function(i){return oo(ll(hl(i).replace(An,"")),e,"")}}function Bn(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=gn(e.prototype),u=e.apply(a,i);return bt(u)?u:a}}function Vg(e,i,a){var u=Bn(e);function _(){for(var D=arguments.length,T=Q(D),U=D,V=vn(_);U--;)T[U]=arguments[U];var ne=D<3&&T[0]!==V&&T[D-1]!==V?[]:vi(T,V);if(D-=ne.length,D<a)return vh(e,i,ta,_.placeholder,r,T,ne,r,r,a-D);var ae=this&&this!==Xe&&this instanceof _?u:e;return Kt(ae,this,T)}return _}function ph(e){return function(i,a,u){var _=ut(i);if(!dr(i)){var D=we(a,3);i=Vt(i),a=function(U){return D(_[U],U,_)}}var T=e(i,a,u);return T>-1?_[D?i[T]:T]:r}}function gh(e){return oi(function(i){var a=i.length,u=a,_=Cr.prototype.thru;for(e&&i.reverse();u--;){var D=i[u];if(typeof D!="function")throw new Pr(m);if(_&&!T&&sa(D)=="wrapper")var T=new Cr([],!0)}for(u=T?u:a;++u<a;){D=i[u];var U=sa(D),V=U=="wrapper"?Ho(D):r;V&&ko(V[0])&&V[1]==(c|M|N|y)&&!V[4].length&&V[9]==1?T=T[sa(V[0])].apply(T,V[3]):T=D.length==1&&ko(D)?T[U]():T.thru(D)}return function(){var ne=arguments,ae=ne[0];if(T&&ne.length==1&&Ne(ae))return T.plant(ae).value();for(var ce=0,fe=a?i[ce].apply(this,ne):ae;++ce<a;)fe=i[ce].call(this,fe);return fe}})}function ta(e,i,a,u,_,D,T,U,V,ne){var ae=i&c,ce=i&ee,fe=i&ue,ve=i&(M|P),Ee=i&Z,qe=fe?r:Bn(e);function De(){for(var Ge=arguments.length,Ze=Q(Ge),Er=Ge;Er--;)Ze[Er]=arguments[Er];if(ve)var nr=vn(De),Dr=ip(Ze,nr);if(u&&(Ze=uh(Ze,u,_,ve)),D&&(Ze=hh(Ze,D,T,ve)),Ge-=Dr,ve&&Ge<ne){var Tt=vi(Ze,nr);return vh(e,i,ta,De.placeholder,a,Ze,Tt,U,V,ne-Ge)}var Hr=ce?a:this,li=fe?Hr[e]:e;return Ge=Ze.length,U?Ze=l0(Ze,U):Ee&&Ge>1&&Ze.reverse(),ae&&V<Ge&&(Ze.length=V),this&&this!==Xe&&this instanceof De&&(li=qe||Bn(li)),li.apply(Hr,Ze)}return De}function _h(e,i){return function(a,u){return bg(a,e,i(u),{})}}function ra(e,i){return function(a,u){var _;if(a===r&&u===r)return i;if(a!==r&&(_=a),u!==r){if(_===r)return u;typeof a=="string"||typeof u=="string"?(a=mr(a),u=mr(u)):(a=th(a),u=th(u)),_=e(a,u)}return _}}function Lo(e){return oi(function(i){return i=yt(i,br(we())),Ke(function(a){var u=this;return e(i,function(_){return Kt(_,u,a)})})})}function ia(e,i){i=i===r?" ":mr(i);var a=i.length;if(a<2)return a?To(i,e):i;var u=To(i,Bs(e/hn(i)));return un(i)?Di(Mr(u),0,e).join(""):u.slice(0,e)}function kg(e,i,a,u){var _=i&ee,D=Bn(e);function T(){for(var U=-1,V=arguments.length,ne=-1,ae=u.length,ce=Q(ae+V),fe=this&&this!==Xe&&this instanceof T?D:e;++ne<ae;)ce[ne]=u[ne];for(;V--;)ce[ne++]=arguments[++U];return Kt(fe,_?a:this,ce)}return T}function yh(e){return function(i,a,u){return u&&typeof u!="number"&&ir(i,a,u)&&(a=u=r),i=hi(i),a===r?(a=i,i=0):a=hi(a),u=u===r?i<a?1:-1:hi(u),Tg(i,a,u,e)}}function na(e){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=Rr(i),a=Rr(a)),e(i,a)}}function vh(e,i,a,u,_,D,T,U,V,ne){var ae=i&M,ce=ae?T:r,fe=ae?r:T,ve=ae?D:r,Ee=ae?r:D;i|=ae?N:S,i&=~(ae?S:N),i&j||(i&=~(ee|ue));var qe=[e,i,_,ve,ce,Ee,fe,U,V,ne],De=a.apply(r,qe);return ko(e)&&Ah(De,qe),De.placeholder=u,Th(De,e,i)}function Mo(e){var i=Ht[e];return function(a,u){if(a=Rr(a),u=u==null?0:Jt(Le(u),292),u&&Tu(a)){var _=(it(a)+"e").split("e"),D=i(_[0]+"e"+(+_[1]+u));return _=(it(D)+"e").split("e"),+(_[0]+"e"+(+_[1]-u))}return i(a)}}var Gg=dn&&1/Rs(new dn([,-0]))[1]==L?function(e){return new dn(e)}:oc;function bh(e){return function(i){var a=Xt(i);return a==Ie?go(i):a==Oe?hp(i):rp(i,e(i))}}function ai(e,i,a,u,_,D,T,U){var V=i&ue;if(!V&&typeof e!="function")throw new Pr(m);var ne=u?u.length:0;if(ne||(i&=~(N|S),u=_=r),T=T===r?T:Bt(Le(T),0),U=U===r?U:Le(U),ne-=_?_.length:0,i&S){var ae=u,ce=_;u=_=r}var fe=V?r:Ho(e),ve=[e,i,a,u,_,ae,ce,D,T,U];if(fe&&c0(ve,fe),e=ve[0],i=ve[1],a=ve[2],u=ve[3],_=ve[4],U=ve[9]=ve[9]===r?V?0:e.length:Bt(ve[9]-ne,0),!U&&i&(M|P)&&(i&=~(M|P)),!i||i==ee)var Ee=Kg(e,i,a);else i==M||i==P?Ee=Vg(e,i,U):(i==N||i==(ee|N))&&!_.length?Ee=kg(e,i,a,u):Ee=ta.apply(r,ve);var qe=fe?Qu:Ah;return Th(qe(Ee,ve),e,i)}function mh(e,i,a,u){return e===r||qr(e,fn[a])&&!nt.call(u,a)?i:e}function wh(e,i,a,u,_,D){return bt(e)&&bt(i)&&(D.set(i,e),Xs(e,i,r,wh,D),D.delete(i)),e}function Wg(e){return kn(e)?r:e}function Eh(e,i,a,u,_,D){var T=a&$,U=e.length,V=i.length;if(U!=V&&!(T&&V>U))return!1;var ne=D.get(e),ae=D.get(i);if(ne&&ae)return ne==i&&ae==e;var ce=-1,fe=!0,ve=a&X?new Mi:r;for(D.set(e,i),D.set(i,e);++ce<U;){var Ee=e[ce],qe=i[ce];if(u)var De=T?u(qe,Ee,ce,i,e,D):u(Ee,qe,ce,e,i,D);if(De!==r){if(De)continue;fe=!1;break}if(ve){if(!co(i,function(Ge,Ze){if(!Nn(ve,Ze)&&(Ee===Ge||_(Ee,Ge,a,u,D)))return ve.push(Ze)})){fe=!1;break}}else if(!(Ee===qe||_(Ee,qe,a,u,D))){fe=!1;break}}return D.delete(e),D.delete(i),fe}function Yg(e,i,a,u,_,D,T){switch(a){case Ce:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case Se:return!(e.byteLength!=i.byteLength||!D(new Ms(e),new Ms(i)));case G:case z:case He:return qr(+e,+i);case R:return e.name==i.name&&e.message==i.message;case Me:case Re:return e==i+"";case Ie:var U=go;case Oe:var V=u&$;if(U||(U=Rs),e.size!=i.size&&!V)return!1;var ne=T.get(e);if(ne)return ne==i;u|=X,T.set(e,i);var ae=Eh(U(e),U(i),u,_,D,T);return T.delete(e),ae;case Fe:if($n)return $n.call(e)==$n.call(i)}return!1}function Jg(e,i,a,u,_,D){var T=a&$,U=zo(e),V=U.length,ne=zo(i),ae=ne.length;if(V!=ae&&!T)return!1;for(var ce=V;ce--;){var fe=U[ce];if(!(T?fe in i:nt.call(i,fe)))return!1}var ve=D.get(e),Ee=D.get(i);if(ve&&Ee)return ve==i&&Ee==e;var qe=!0;D.set(e,i),D.set(i,e);for(var De=T;++ce<V;){fe=U[ce];var Ge=e[fe],Ze=i[fe];if(u)var Er=T?u(Ze,Ge,fe,i,e,D):u(Ge,Ze,fe,e,i,D);if(!(Er===r?Ge===Ze||_(Ge,Ze,a,u,D):Er)){qe=!1;break}De||(De=fe=="constructor")}if(qe&&!De){var nr=e.constructor,Dr=i.constructor;nr!=Dr&&"constructor"in e&&"constructor"in i&&!(typeof nr=="function"&&nr instanceof nr&&typeof Dr=="function"&&Dr instanceof Dr)&&(qe=!1)}return D.delete(e),D.delete(i),qe}function oi(e){return Wo(Ph(e,r,$h),e+"")}function zo(e){return Hu(e,Vt,Ko)}function qo(e){return Hu(e,pr,Dh)}var Ho=Vs?function(e){return Vs.get(e)}:oc;function sa(e){for(var i=e.name+"",a=pn[i],u=nt.call(pn,i)?a.length:0;u--;){var _=a[u],D=_.func;if(D==null||D==e)return _.name}return i}function vn(e){var i=nt.call(E,"placeholder")?E:e;return i.placeholder}function we(){var e=E.iteratee||sc;return e=e===sc?Vu:e,arguments.length?e(arguments[0],arguments[1]):e}function aa(e,i){var a=e.__data__;return n0(i)?a[typeof i=="string"?"string":"hash"]:a.map}function Bo(e){for(var i=Vt(e),a=i.length;a--;){var u=i[a],_=e[u];i[a]=[u,_,Oh(_)]}return i}function Hi(e,i){var a=op(e,i);return Ku(a)?a:r}function Xg(e){var i=nt.call(e,$i),a=e[$i];try{e[$i]=r;var u=!0}catch{}var _=$s.call(e);return u&&(i?e[$i]=a:delete e[$i]),_}var Ko=yo?function(e){return e==null?[]:(e=ut(e),_i(yo(e),function(i){return Cu.call(e,i)}))}:cc,Dh=yo?function(e){for(var i=[];e;)yi(i,Ko(e)),e=zs(e);return i}:cc,Xt=rr;(vo&&Xt(new vo(new ArrayBuffer(1)))!=Ce||Fn&&Xt(new Fn)!=Ie||bo&&Xt(bo.resolve())!=dt||dn&&Xt(new dn)!=Oe||Un&&Xt(new Un)!=Pe)&&(Xt=function(e){var i=rr(e),a=i==$e?e.constructor:r,u=a?Bi(a):"";if(u)switch(u){case Rp:return Ce;case Fp:return Ie;case Up:return dt;case jp:return Oe;case $p:return Pe}return i});function Zg(e,i,a){for(var u=-1,_=a.length;++u<_;){var D=a[u],T=D.size;switch(D.type){case"drop":e+=T;break;case"dropRight":i-=T;break;case"take":i=Jt(i,e+T);break;case"takeRight":e=Bt(e,i-T);break}}return{start:e,end:i}}function Qg(e){var i=e.match(ht);return i?i[1].split($t):[]}function Sh(e,i,a){i=Ei(i,e);for(var u=-1,_=i.length,D=!1;++u<_;){var T=Wr(i[u]);if(!(D=e!=null&&a(e,T)))break;e=e[T]}return D||++u!=_?D:(_=e==null?0:e.length,!!_&&da(_)&&ci(T,_)&&(Ne(e)||Ki(e)))}function e0(e){var i=e.length,a=new e.constructor(i);return i&&typeof e[0]=="string"&&nt.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function Ih(e){return typeof e.constructor=="function"&&!Kn(e)?gn(zs(e)):{}}function t0(e,i,a){var u=e.constructor;switch(i){case Se:return $o(e);case G:case z:return new u(+e);case Ce:return Lg(e,a);case Be:case xe:case ke:case We:case et:case tt:case Je:case Qt:case hr:return oh(e,a);case Ie:return new u;case He:case Re:return new u(e);case Me:return Mg(e);case Oe:return new u;case Fe:return zg(e)}}function r0(e,i){var a=i.length;if(!a)return e;var u=a-1;return i[u]=(a>1?"& ":"")+i[u],i=i.join(a>2?", ":" "),e.replace(It,`{
/* [wrapped with `+i+`] */
`)}function i0(e){return Ne(e)||Ki(e)||!!(Au&&e&&e[Au])}function ci(e,i){var a=typeof e;return i=i??J,!!i&&(a=="number"||a!="symbol"&&ka.test(e))&&e>-1&&e%1==0&&e<i}function ir(e,i,a){if(!bt(a))return!1;var u=typeof i;return(u=="number"?dr(a)&&ci(i,a.length):u=="string"&&i in a)?qr(a[i],e):!1}function Vo(e,i){if(Ne(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||wr(e)?!0:Ft.test(e)||!_t.test(e)||i!=null&&e in ut(i)}function n0(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function ko(e){var i=sa(e),a=E[i];if(typeof a!="function"||!(i in Ye.prototype))return!1;if(e===a)return!0;var u=Ho(a);return!!u&&e===u[0]}function s0(e){return!!Ou&&Ou in e}var a0=Us?ui:uc;function Kn(e){var i=e&&e.constructor,a=typeof i=="function"&&i.prototype||fn;return e===a}function Oh(e){return e===e&&!bt(e)}function xh(e,i){return function(a){return a==null?!1:a[e]===i&&(i!==r||e in ut(a))}}function o0(e){var i=la(e,function(u){return a.size===x&&a.clear(),u}),a=i.cache;return i}function c0(e,i){var a=e[1],u=i[1],_=a|u,D=_<(ee|ue|c),T=u==c&&a==M||u==c&&a==y&&e[7].length<=i[8]||u==(c|y)&&i[7].length<=i[8]&&a==M;if(!(D||T))return e;u&ee&&(e[2]=i[2],_|=a&ee?0:j);var U=i[3];if(U){var V=e[3];e[3]=V?uh(V,U,i[4]):U,e[4]=V?vi(e[3],A):i[4]}return U=i[5],U&&(V=e[5],e[5]=V?hh(V,U,i[6]):U,e[6]=V?vi(e[5],A):i[6]),U=i[7],U&&(e[7]=U),u&c&&(e[8]=e[8]==null?i[8]:Jt(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=_,e}function u0(e){var i=[];if(e!=null)for(var a in ut(e))i.push(a);return i}function h0(e){return $s.call(e)}function Ph(e,i,a){return i=Bt(i===r?e.length-1:i,0),function(){for(var u=arguments,_=-1,D=Bt(u.length-i,0),T=Q(D);++_<D;)T[_]=u[i+_];_=-1;for(var U=Q(i+1);++_<i;)U[_]=u[_];return U[i]=a(T),Kt(e,this,U)}}function Ch(e,i){return i.length<2?e:qi(e,Tr(i,0,-1))}function l0(e,i){for(var a=e.length,u=Jt(i.length,a),_=fr(e);u--;){var D=i[u];e[u]=ci(D,a)?_[D]:r}return e}function Go(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var Ah=Nh(Qu),Vn=Op||function(e,i){return Xe.setTimeout(e,i)},Wo=Nh(Fg);function Th(e,i,a){var u=i+"";return Wo(e,r0(u,f0(Qg(u),a)))}function Nh(e){var i=0,a=0;return function(){var u=Ap(),_=I-(u-a);if(a=u,_>0){if(++i>=v)return arguments[0]}else i=0;return e.apply(r,arguments)}}function oa(e,i){var a=-1,u=e.length,_=u-1;for(i=i===r?u:i;++a<i;){var D=Ao(a,_),T=e[D];e[D]=e[a],e[a]=T}return e.length=i,e}var Rh=o0(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(Ut,function(a,u,_,D){i.push(_?D.replace(za,"$1"):u||a)}),i});function Wr(e){if(typeof e=="string"||wr(e))return e;var i=e+"";return i=="0"&&1/e==-L?"-0":i}function Bi(e){if(e!=null){try{return js.call(e)}catch{}try{return e+""}catch{}}return""}function f0(e,i){return xr(ye,function(a){var u="_."+a[0];i&a[1]&&!Ts(e,u)&&e.push(u)}),e.sort()}function Fh(e){if(e instanceof Ye)return e.clone();var i=new Cr(e.__wrapped__,e.__chain__);return i.__actions__=fr(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function d0(e,i,a){(a?ir(e,i,a):i===r)?i=1:i=Bt(Le(i),0);var u=e==null?0:e.length;if(!u||i<1)return[];for(var _=0,D=0,T=Q(Bs(u/i));_<u;)T[D++]=Tr(e,_,_+=i);return T}function p0(e){for(var i=-1,a=e==null?0:e.length,u=0,_=[];++i<a;){var D=e[i];D&&(_[u++]=D)}return _}function g0(){var e=arguments.length;if(!e)return[];for(var i=Q(e-1),a=arguments[0],u=e;u--;)i[u-1]=arguments[u];return yi(Ne(a)?fr(a):[a],Gt(i,1))}var _0=Ke(function(e,i){return At(e)?Mn(e,Gt(i,1,At,!0)):[]}),y0=Ke(function(e,i){var a=Nr(i);return At(a)&&(a=r),At(e)?Mn(e,Gt(i,1,At,!0),we(a,2)):[]}),v0=Ke(function(e,i){var a=Nr(i);return At(a)&&(a=r),At(e)?Mn(e,Gt(i,1,At,!0),r,a):[]});function b0(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===r?1:Le(i),Tr(e,i<0?0:i,u)):[]}function m0(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===r?1:Le(i),i=u-i,Tr(e,0,i<0?0:i)):[]}function w0(e,i){return e&&e.length?Qs(e,we(i,3),!0,!0):[]}function E0(e,i){return e&&e.length?Qs(e,we(i,3),!0):[]}function D0(e,i,a,u){var _=e==null?0:e.length;return _?(a&&typeof a!="number"&&ir(e,i,a)&&(a=0,u=_),gg(e,i,a,u)):[]}function Uh(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var _=a==null?0:Le(a);return _<0&&(_=Bt(u+_,0)),Ns(e,we(i,3),_)}function jh(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var _=u-1;return a!==r&&(_=Le(a),_=a<0?Bt(u+_,0):Jt(_,u-1)),Ns(e,we(i,3),_,!0)}function $h(e){var i=e==null?0:e.length;return i?Gt(e,1):[]}function S0(e){var i=e==null?0:e.length;return i?Gt(e,L):[]}function I0(e,i){var a=e==null?0:e.length;return a?(i=i===r?1:Le(i),Gt(e,i)):[]}function O0(e){for(var i=-1,a=e==null?0:e.length,u={};++i<a;){var _=e[i];u[_[0]]=_[1]}return u}function Lh(e){return e&&e.length?e[0]:r}function x0(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var _=a==null?0:Le(a);return _<0&&(_=Bt(u+_,0)),cn(e,i,_)}function P0(e){var i=e==null?0:e.length;return i?Tr(e,0,-1):[]}var C0=Ke(function(e){var i=yt(e,Uo);return i.length&&i[0]===e[0]?Io(i):[]}),A0=Ke(function(e){var i=Nr(e),a=yt(e,Uo);return i===Nr(a)?i=r:a.pop(),a.length&&a[0]===e[0]?Io(a,we(i,2)):[]}),T0=Ke(function(e){var i=Nr(e),a=yt(e,Uo);return i=typeof i=="function"?i:r,i&&a.pop(),a.length&&a[0]===e[0]?Io(a,r,i):[]});function N0(e,i){return e==null?"":Pp.call(e,i)}function Nr(e){var i=e==null?0:e.length;return i?e[i-1]:r}function R0(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var _=u;return a!==r&&(_=Le(a),_=_<0?Bt(u+_,0):Jt(_,u-1)),i===i?fp(e,i,_):Ns(e,vu,_,!0)}function F0(e,i){return e&&e.length?Yu(e,Le(i)):r}var U0=Ke(Mh);function Mh(e,i){return e&&e.length&&i&&i.length?Co(e,i):e}function j0(e,i,a){return e&&e.length&&i&&i.length?Co(e,i,we(a,2)):e}function $0(e,i,a){return e&&e.length&&i&&i.length?Co(e,i,r,a):e}var L0=oi(function(e,i){var a=e==null?0:e.length,u=wo(e,i);return Zu(e,yt(i,function(_){return ci(_,a)?+_:_}).sort(ch)),u});function M0(e,i){var a=[];if(!(e&&e.length))return a;var u=-1,_=[],D=e.length;for(i=we(i,3);++u<D;){var T=e[u];i(T,u,e)&&(a.push(T),_.push(u))}return Zu(e,_),a}function Yo(e){return e==null?e:Np.call(e)}function z0(e,i,a){var u=e==null?0:e.length;return u?(a&&typeof a!="number"&&ir(e,i,a)?(i=0,a=u):(i=i==null?0:Le(i),a=a===r?u:Le(a)),Tr(e,i,a)):[]}function q0(e,i){return Zs(e,i)}function H0(e,i,a){return No(e,i,we(a,2))}function B0(e,i){var a=e==null?0:e.length;if(a){var u=Zs(e,i);if(u<a&&qr(e[u],i))return u}return-1}function K0(e,i){return Zs(e,i,!0)}function V0(e,i,a){return No(e,i,we(a,2),!0)}function k0(e,i){var a=e==null?0:e.length;if(a){var u=Zs(e,i,!0)-1;if(qr(e[u],i))return u}return-1}function G0(e){return e&&e.length?eh(e):[]}function W0(e,i){return e&&e.length?eh(e,we(i,2)):[]}function Y0(e){var i=e==null?0:e.length;return i?Tr(e,1,i):[]}function J0(e,i,a){return e&&e.length?(i=a||i===r?1:Le(i),Tr(e,0,i<0?0:i)):[]}function X0(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===r?1:Le(i),i=u-i,Tr(e,i<0?0:i,u)):[]}function Z0(e,i){return e&&e.length?Qs(e,we(i,3),!1,!0):[]}function Q0(e,i){return e&&e.length?Qs(e,we(i,3)):[]}var e1=Ke(function(e){return wi(Gt(e,1,At,!0))}),t1=Ke(function(e){var i=Nr(e);return At(i)&&(i=r),wi(Gt(e,1,At,!0),we(i,2))}),r1=Ke(function(e){var i=Nr(e);return i=typeof i=="function"?i:r,wi(Gt(e,1,At,!0),r,i)});function i1(e){return e&&e.length?wi(e):[]}function n1(e,i){return e&&e.length?wi(e,we(i,2)):[]}function s1(e,i){return i=typeof i=="function"?i:r,e&&e.length?wi(e,r,i):[]}function Jo(e){if(!(e&&e.length))return[];var i=0;return e=_i(e,function(a){if(At(a))return i=Bt(a.length,i),!0}),fo(i,function(a){return yt(e,uo(a))})}function zh(e,i){if(!(e&&e.length))return[];var a=Jo(e);return i==null?a:yt(a,function(u){return Kt(i,r,u)})}var a1=Ke(function(e,i){return At(e)?Mn(e,i):[]}),o1=Ke(function(e){return Fo(_i(e,At))}),c1=Ke(function(e){var i=Nr(e);return At(i)&&(i=r),Fo(_i(e,At),we(i,2))}),u1=Ke(function(e){var i=Nr(e);return i=typeof i=="function"?i:r,Fo(_i(e,At),r,i)}),h1=Ke(Jo);function l1(e,i){return nh(e||[],i||[],Ln)}function f1(e,i){return nh(e||[],i||[],Hn)}var d1=Ke(function(e){var i=e.length,a=i>1?e[i-1]:r;return a=typeof a=="function"?(e.pop(),a):r,zh(e,a)});function qh(e){var i=E(e);return i.__chain__=!0,i}function p1(e,i){return i(e),e}function ca(e,i){return i(e)}var g1=oi(function(e){var i=e.length,a=i?e[0]:0,u=this.__wrapped__,_=function(D){return wo(D,e)};return i>1||this.__actions__.length||!(u instanceof Ye)||!ci(a)?this.thru(_):(u=u.slice(a,+a+(i?1:0)),u.__actions__.push({func:ca,args:[_],thisArg:r}),new Cr(u,this.__chain__).thru(function(D){return i&&!D.length&&D.push(r),D}))});function _1(){return qh(this)}function y1(){return new Cr(this.value(),this.__chain__)}function v1(){this.__values__===r&&(this.__values__=tl(this.value()));var e=this.__index__>=this.__values__.length,i=e?r:this.__values__[this.__index__++];return{done:e,value:i}}function b1(){return this}function m1(e){for(var i,a=this;a instanceof Gs;){var u=Fh(a);u.__index__=0,u.__values__=r,i?_.__wrapped__=u:i=u;var _=u;a=a.__wrapped__}return _.__wrapped__=e,i}function w1(){var e=this.__wrapped__;if(e instanceof Ye){var i=e;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:ca,args:[Yo],thisArg:r}),new Cr(i,this.__chain__)}return this.thru(Yo)}function E1(){return ih(this.__wrapped__,this.__actions__)}var D1=ea(function(e,i,a){nt.call(e,a)?++e[a]:si(e,a,1)});function S1(e,i,a){var u=Ne(e)?_u:pg;return a&&ir(e,i,a)&&(i=r),u(e,we(i,3))}function I1(e,i){var a=Ne(e)?_i:zu;return a(e,we(i,3))}var O1=ph(Uh),x1=ph(jh);function P1(e,i){return Gt(ua(e,i),1)}function C1(e,i){return Gt(ua(e,i),L)}function A1(e,i,a){return a=a===r?1:Le(a),Gt(ua(e,i),a)}function Hh(e,i){var a=Ne(e)?xr:mi;return a(e,we(i,3))}function Bh(e,i){var a=Ne(e)?Yd:Mu;return a(e,we(i,3))}var T1=ea(function(e,i,a){nt.call(e,a)?e[a].push(i):si(e,a,[i])});function N1(e,i,a,u){e=dr(e)?e:mn(e),a=a&&!u?Le(a):0;var _=e.length;return a<0&&(a=Bt(_+a,0)),pa(e)?a<=_&&e.indexOf(i,a)>-1:!!_&&cn(e,i,a)>-1}var R1=Ke(function(e,i,a){var u=-1,_=typeof i=="function",D=dr(e)?Q(e.length):[];return mi(e,function(T){D[++u]=_?Kt(i,T,a):zn(T,i,a)}),D}),F1=ea(function(e,i,a){si(e,a,i)});function ua(e,i){var a=Ne(e)?yt:ku;return a(e,we(i,3))}function U1(e,i,a,u){return e==null?[]:(Ne(i)||(i=i==null?[]:[i]),a=u?r:a,Ne(a)||(a=a==null?[]:[a]),Ju(e,i,a))}var j1=ea(function(e,i,a){e[a?0:1].push(i)},function(){return[[],[]]});function $1(e,i,a){var u=Ne(e)?oo:mu,_=arguments.length<3;return u(e,we(i,4),a,_,mi)}function L1(e,i,a){var u=Ne(e)?Jd:mu,_=arguments.length<3;return u(e,we(i,4),a,_,Mu)}function M1(e,i){var a=Ne(e)?_i:zu;return a(e,fa(we(i,3)))}function z1(e){var i=Ne(e)?Uu:Ng;return i(e)}function q1(e,i,a){(a?ir(e,i,a):i===r)?i=1:i=Le(i);var u=Ne(e)?ug:Rg;return u(e,i)}function H1(e){var i=Ne(e)?hg:Ug;return i(e)}function B1(e){if(e==null)return 0;if(dr(e))return pa(e)?hn(e):e.length;var i=Xt(e);return i==Ie||i==Oe?e.size:xo(e).length}function K1(e,i,a){var u=Ne(e)?co:jg;return a&&ir(e,i,a)&&(i=r),u(e,we(i,3))}var V1=Ke(function(e,i){if(e==null)return[];var a=i.length;return a>1&&ir(e,i[0],i[1])?i=[]:a>2&&ir(i[0],i[1],i[2])&&(i=[i[0]]),Ju(e,Gt(i,1),[])}),ha=Ip||function(){return Xe.Date.now()};function k1(e,i){if(typeof i!="function")throw new Pr(m);return e=Le(e),function(){if(--e<1)return i.apply(this,arguments)}}function Kh(e,i,a){return i=a?r:i,i=e&&i==null?e.length:i,ai(e,c,r,r,r,r,i)}function Vh(e,i){var a;if(typeof i!="function")throw new Pr(m);return e=Le(e),function(){return--e>0&&(a=i.apply(this,arguments)),e<=1&&(i=r),a}}var Xo=Ke(function(e,i,a){var u=ee;if(a.length){var _=vi(a,vn(Xo));u|=N}return ai(e,u,i,a,_)}),kh=Ke(function(e,i,a){var u=ee|ue;if(a.length){var _=vi(a,vn(kh));u|=N}return ai(i,u,e,a,_)});function Gh(e,i,a){i=a?r:i;var u=ai(e,M,r,r,r,r,r,i);return u.placeholder=Gh.placeholder,u}function Wh(e,i,a){i=a?r:i;var u=ai(e,P,r,r,r,r,r,i);return u.placeholder=Wh.placeholder,u}function Yh(e,i,a){var u,_,D,T,U,V,ne=0,ae=!1,ce=!1,fe=!0;if(typeof e!="function")throw new Pr(m);i=Rr(i)||0,bt(a)&&(ae=!!a.leading,ce="maxWait"in a,D=ce?Bt(Rr(a.maxWait)||0,i):D,fe="trailing"in a?!!a.trailing:fe);function ve(Tt){var Hr=u,li=_;return u=_=r,ne=Tt,T=e.apply(li,Hr),T}function Ee(Tt){return ne=Tt,U=Vn(Ge,i),ae?ve(Tt):T}function qe(Tt){var Hr=Tt-V,li=Tt-ne,pl=i-Hr;return ce?Jt(pl,D-li):pl}function De(Tt){var Hr=Tt-V,li=Tt-ne;return V===r||Hr>=i||Hr<0||ce&&li>=D}function Ge(){var Tt=ha();if(De(Tt))return Ze(Tt);U=Vn(Ge,qe(Tt))}function Ze(Tt){return U=r,fe&&u?ve(Tt):(u=_=r,T)}function Er(){U!==r&&sh(U),ne=0,u=V=_=U=r}function nr(){return U===r?T:Ze(ha())}function Dr(){var Tt=ha(),Hr=De(Tt);if(u=arguments,_=this,V=Tt,Hr){if(U===r)return Ee(V);if(ce)return sh(U),U=Vn(Ge,i),ve(V)}return U===r&&(U=Vn(Ge,i)),T}return Dr.cancel=Er,Dr.flush=nr,Dr}var G1=Ke(function(e,i){return Lu(e,1,i)}),W1=Ke(function(e,i,a){return Lu(e,Rr(i)||0,a)});function Y1(e){return ai(e,Z)}function la(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new Pr(m);var a=function(){var u=arguments,_=i?i.apply(this,u):u[0],D=a.cache;if(D.has(_))return D.get(_);var T=e.apply(this,u);return a.cache=D.set(_,T)||D,T};return a.cache=new(la.Cache||ni),a}la.Cache=ni;function fa(e){if(typeof e!="function")throw new Pr(m);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function J1(e){return Vh(2,e)}var X1=$g(function(e,i){i=i.length==1&&Ne(i[0])?yt(i[0],br(we())):yt(Gt(i,1),br(we()));var a=i.length;return Ke(function(u){for(var _=-1,D=Jt(u.length,a);++_<D;)u[_]=i[_].call(this,u[_]);return Kt(e,this,u)})}),Zo=Ke(function(e,i){var a=vi(i,vn(Zo));return ai(e,N,r,i,a)}),Jh=Ke(function(e,i){var a=vi(i,vn(Jh));return ai(e,S,r,i,a)}),Z1=oi(function(e,i){return ai(e,y,r,r,r,i)});function Q1(e,i){if(typeof e!="function")throw new Pr(m);return i=i===r?i:Le(i),Ke(e,i)}function e_(e,i){if(typeof e!="function")throw new Pr(m);return i=i==null?0:Bt(Le(i),0),Ke(function(a){var u=a[i],_=Di(a,0,i);return u&&yi(_,u),Kt(e,this,_)})}function t_(e,i,a){var u=!0,_=!0;if(typeof e!="function")throw new Pr(m);return bt(a)&&(u="leading"in a?!!a.leading:u,_="trailing"in a?!!a.trailing:_),Yh(e,i,{leading:u,maxWait:i,trailing:_})}function r_(e){return Kh(e,1)}function i_(e,i){return Zo(jo(i),e)}function n_(){if(!arguments.length)return[];var e=arguments[0];return Ne(e)?e:[e]}function s_(e){return Ar(e,H)}function a_(e,i){return i=typeof i=="function"?i:r,Ar(e,H,i)}function o_(e){return Ar(e,q|H)}function c_(e,i){return i=typeof i=="function"?i:r,Ar(e,q|H,i)}function u_(e,i){return i==null||$u(e,i,Vt(i))}function qr(e,i){return e===i||e!==e&&i!==i}var h_=na(So),l_=na(function(e,i){return e>=i}),Ki=Bu(function(){return arguments}())?Bu:function(e){return Ot(e)&&nt.call(e,"callee")&&!Cu.call(e,"callee")},Ne=Q.isArray,f_=tr?br(tr):mg;function dr(e){return e!=null&&da(e.length)&&!ui(e)}function At(e){return Ot(e)&&dr(e)}function d_(e){return e===!0||e===!1||Ot(e)&&rr(e)==G}var Si=xp||uc,p_=Lr?br(Lr):wg;function g_(e){return Ot(e)&&e.nodeType===1&&!kn(e)}function __(e){if(e==null)return!0;if(dr(e)&&(Ne(e)||typeof e=="string"||typeof e.splice=="function"||Si(e)||bn(e)||Ki(e)))return!e.length;var i=Xt(e);if(i==Ie||i==Oe)return!e.size;if(Kn(e))return!xo(e).length;for(var a in e)if(nt.call(e,a))return!1;return!0}function y_(e,i){return qn(e,i)}function v_(e,i,a){a=typeof a=="function"?a:r;var u=a?a(e,i):r;return u===r?qn(e,i,r,a):!!u}function Qo(e){if(!Ot(e))return!1;var i=rr(e);return i==R||i==h||typeof e.message=="string"&&typeof e.name=="string"&&!kn(e)}function b_(e){return typeof e=="number"&&Tu(e)}function ui(e){if(!bt(e))return!1;var i=rr(e);return i==he||i==pe||i==Y||i==pt}function Xh(e){return typeof e=="number"&&e==Le(e)}function da(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=J}function bt(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function Ot(e){return e!=null&&typeof e=="object"}var Zh=Or?br(Or):Dg;function m_(e,i){return e===i||Oo(e,i,Bo(i))}function w_(e,i,a){return a=typeof a=="function"?a:r,Oo(e,i,Bo(i),a)}function E_(e){return Qh(e)&&e!=+e}function D_(e){if(a0(e))throw new Ae(f);return Ku(e)}function S_(e){return e===null}function I_(e){return e==null}function Qh(e){return typeof e=="number"||Ot(e)&&rr(e)==He}function kn(e){if(!Ot(e)||rr(e)!=$e)return!1;var i=zs(e);if(i===null)return!0;var a=nt.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&js.call(a)==wp}var ec=Vr?br(Vr):Sg;function O_(e){return Xh(e)&&e>=-J&&e<=J}var el=Tn?br(Tn):Ig;function pa(e){return typeof e=="string"||!Ne(e)&&Ot(e)&&rr(e)==Re}function wr(e){return typeof e=="symbol"||Ot(e)&&rr(e)==Fe}var bn=ji?br(ji):Og;function x_(e){return e===r}function P_(e){return Ot(e)&&Xt(e)==Pe}function C_(e){return Ot(e)&&rr(e)==Ue}var A_=na(Po),T_=na(function(e,i){return e<=i});function tl(e){if(!e)return[];if(dr(e))return pa(e)?Mr(e):fr(e);if(Rn&&e[Rn])return up(e[Rn]());var i=Xt(e),a=i==Ie?go:i==Oe?Rs:mn;return a(e)}function hi(e){if(!e)return e===0?e:0;if(e=Rr(e),e===L||e===-L){var i=e<0?-1:1;return i*C}return e===e?e:0}function Le(e){var i=hi(e),a=i%1;return i===i?a?i-a:i:0}function rl(e){return e?zi(Le(e),0,te):0}function Rr(e){if(typeof e=="number")return e;if(wr(e))return k;if(bt(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=bt(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=wu(e);var a=Ba.test(e);return a||Va.test(e)?Te(e.slice(2),a?2:8):Ha.test(e)?k:+e}function il(e){return Gr(e,pr(e))}function N_(e){return e?zi(Le(e),-J,J):e===0?e:0}function it(e){return e==null?"":mr(e)}var R_=_n(function(e,i){if(Kn(i)||dr(i)){Gr(i,Vt(i),e);return}for(var a in i)nt.call(i,a)&&Ln(e,a,i[a])}),nl=_n(function(e,i){Gr(i,pr(i),e)}),ga=_n(function(e,i,a,u){Gr(i,pr(i),e,u)}),F_=_n(function(e,i,a,u){Gr(i,Vt(i),e,u)}),U_=oi(wo);function j_(e,i){var a=gn(e);return i==null?a:ju(a,i)}var $_=Ke(function(e,i){e=ut(e);var a=-1,u=i.length,_=u>2?i[2]:r;for(_&&ir(i[0],i[1],_)&&(u=1);++a<u;)for(var D=i[a],T=pr(D),U=-1,V=T.length;++U<V;){var ne=T[U],ae=e[ne];(ae===r||qr(ae,fn[ne])&&!nt.call(e,ne))&&(e[ne]=D[ne])}return e}),L_=Ke(function(e){return e.push(r,wh),Kt(sl,r,e)});function M_(e,i){return yu(e,we(i,3),kr)}function z_(e,i){return yu(e,we(i,3),Do)}function q_(e,i){return e==null?e:Eo(e,we(i,3),pr)}function H_(e,i){return e==null?e:qu(e,we(i,3),pr)}function B_(e,i){return e&&kr(e,we(i,3))}function K_(e,i){return e&&Do(e,we(i,3))}function V_(e){return e==null?[]:Js(e,Vt(e))}function k_(e){return e==null?[]:Js(e,pr(e))}function tc(e,i,a){var u=e==null?r:qi(e,i);return u===r?a:u}function G_(e,i){return e!=null&&Sh(e,i,_g)}function rc(e,i){return e!=null&&Sh(e,i,yg)}var W_=_h(function(e,i,a){i!=null&&typeof i.toString!="function"&&(i=$s.call(i)),e[i]=a},nc(gr)),Y_=_h(function(e,i,a){i!=null&&typeof i.toString!="function"&&(i=$s.call(i)),nt.call(e,i)?e[i].push(a):e[i]=[a]},we),J_=Ke(zn);function Vt(e){return dr(e)?Fu(e):xo(e)}function pr(e){return dr(e)?Fu(e,!0):xg(e)}function X_(e,i){var a={};return i=we(i,3),kr(e,function(u,_,D){si(a,i(u,_,D),u)}),a}function Z_(e,i){var a={};return i=we(i,3),kr(e,function(u,_,D){si(a,_,i(u,_,D))}),a}var Q_=_n(function(e,i,a){Xs(e,i,a)}),sl=_n(function(e,i,a,u){Xs(e,i,a,u)}),ey=oi(function(e,i){var a={};if(e==null)return a;var u=!1;i=yt(i,function(D){return D=Ei(D,e),u||(u=D.length>1),D}),Gr(e,qo(e),a),u&&(a=Ar(a,q|W|H,Wg));for(var _=i.length;_--;)Ro(a,i[_]);return a});function ty(e,i){return al(e,fa(we(i)))}var ry=oi(function(e,i){return e==null?{}:Cg(e,i)});function al(e,i){if(e==null)return{};var a=yt(qo(e),function(u){return[u]});return i=we(i),Xu(e,a,function(u,_){return i(u,_[0])})}function iy(e,i,a){i=Ei(i,e);var u=-1,_=i.length;for(_||(_=1,e=r);++u<_;){var D=e==null?r:e[Wr(i[u])];D===r&&(u=_,D=a),e=ui(D)?D.call(e):D}return e}function ny(e,i,a){return e==null?e:Hn(e,i,a)}function sy(e,i,a,u){return u=typeof u=="function"?u:r,e==null?e:Hn(e,i,a,u)}var ol=bh(Vt),cl=bh(pr);function ay(e,i,a){var u=Ne(e),_=u||Si(e)||bn(e);if(i=we(i,4),a==null){var D=e&&e.constructor;_?a=u?new D:[]:bt(e)?a=ui(D)?gn(zs(e)):{}:a={}}return(_?xr:kr)(e,function(T,U,V){return i(a,T,U,V)}),a}function oy(e,i){return e==null?!0:Ro(e,i)}function cy(e,i,a){return e==null?e:rh(e,i,jo(a))}function uy(e,i,a,u){return u=typeof u=="function"?u:r,e==null?e:rh(e,i,jo(a),u)}function mn(e){return e==null?[]:po(e,Vt(e))}function hy(e){return e==null?[]:po(e,pr(e))}function ly(e,i,a){return a===r&&(a=i,i=r),a!==r&&(a=Rr(a),a=a===a?a:0),i!==r&&(i=Rr(i),i=i===i?i:0),zi(Rr(e),i,a)}function fy(e,i,a){return i=hi(i),a===r?(a=i,i=0):a=hi(a),e=Rr(e),vg(e,i,a)}function dy(e,i,a){if(a&&typeof a!="boolean"&&ir(e,i,a)&&(i=a=r),a===r&&(typeof i=="boolean"?(a=i,i=r):typeof e=="boolean"&&(a=e,e=r)),e===r&&i===r?(e=0,i=1):(e=hi(e),i===r?(i=e,e=0):i=hi(i)),e>i){var u=e;e=i,i=u}if(a||e%1||i%1){var _=Nu();return Jt(e+_*(i-e+ot("1e-"+((_+"").length-1))),i)}return Ao(e,i)}var py=yn(function(e,i,a){return i=i.toLowerCase(),e+(a?ul(i):i)});function ul(e){return ic(it(e).toLowerCase())}function hl(e){return e=it(e),e&&e.replace(ti,np).replace(no,"")}function gy(e,i,a){e=it(e),i=mr(i);var u=e.length;a=a===r?u:zi(Le(a),0,u);var _=a;return a-=i.length,a>=0&&e.slice(a,_)==i}function _y(e){return e=it(e),e&&gt.test(e)?e.replace(Ti,sp):e}function yy(e){return e=it(e),e&&jt.test(e)?e.replace(Dt,"\\$&"):e}var vy=yn(function(e,i,a){return e+(a?"-":"")+i.toLowerCase()}),by=yn(function(e,i,a){return e+(a?" ":"")+i.toLowerCase()}),my=dh("toLowerCase");function wy(e,i,a){e=it(e),i=Le(i);var u=i?hn(e):0;if(!i||u>=i)return e;var _=(i-u)/2;return ia(Ks(_),a)+e+ia(Bs(_),a)}function Ey(e,i,a){e=it(e),i=Le(i);var u=i?hn(e):0;return i&&u<i?e+ia(i-u,a):e}function Dy(e,i,a){e=it(e),i=Le(i);var u=i?hn(e):0;return i&&u<i?ia(i-u,a)+e:e}function Sy(e,i,a){return a||i==null?i=0:i&&(i=+i),Tp(it(e).replace(St,""),i||0)}function Iy(e,i,a){return(a?ir(e,i,a):i===r)?i=1:i=Le(i),To(it(e),i)}function Oy(){var e=arguments,i=it(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var xy=yn(function(e,i,a){return e+(a?"_":"")+i.toLowerCase()});function Py(e,i,a){return a&&typeof a!="number"&&ir(e,i,a)&&(i=a=r),a=a===r?te:a>>>0,a?(e=it(e),e&&(typeof i=="string"||i!=null&&!ec(i))&&(i=mr(i),!i&&un(e))?Di(Mr(e),0,a):e.split(i,a)):[]}var Cy=yn(function(e,i,a){return e+(a?" ":"")+ic(i)});function Ay(e,i,a){return e=it(e),a=a==null?0:zi(Le(a),0,e.length),i=mr(i),e.slice(a,a+i.length)==i}function Ty(e,i,a){var u=E.templateSettings;a&&ir(e,i,a)&&(i=r),e=it(e),i=ga({},i,u,mh);var _=ga({},i.imports,u.imports,mh),D=Vt(_),T=po(_,D),U,V,ne=0,ae=i.interpolate||en,ce="__p += '",fe=_o((i.escape||en).source+"|"+ae.source+"|"+(ae===vt?qa:en).source+"|"+(i.evaluate||en).source+"|$","g"),ve="//# sourceURL="+(nt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++so+"]")+`
`;e.replace(fe,function(De,Ge,Ze,Er,nr,Dr){return Ze||(Ze=Er),ce+=e.slice(ne,Dr).replace(Ga,ap),Ge&&(U=!0,ce+=`' +
__e(`+Ge+`) +
'`),nr&&(V=!0,ce+=`';
`+nr+`;
__p += '`),Ze&&(ce+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),ne=Dr+De.length,De}),ce+=`';
`;var Ee=nt.call(i,"variable")&&i.variable;if(!Ee)ce=`with (obj) {
`+ce+`
}
`;else if(Ma.test(Ee))throw new Ae(g);ce=(V?ce.replace(Br,""):ce).replace(er,"$1").replace(ei,"$1;"),ce="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(U?", __e = _.escape":"")+(V?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var qe=fl(function(){return rt(D,ve+"return "+ce).apply(r,T)});if(qe.source=ce,Qo(qe))throw qe;return qe}function Ny(e){return it(e).toLowerCase()}function Ry(e){return it(e).toUpperCase()}function Fy(e,i,a){if(e=it(e),e&&(a||i===r))return wu(e);if(!e||!(i=mr(i)))return e;var u=Mr(e),_=Mr(i),D=Eu(u,_),T=Du(u,_)+1;return Di(u,D,T).join("")}function Uy(e,i,a){if(e=it(e),e&&(a||i===r))return e.slice(0,Iu(e)+1);if(!e||!(i=mr(i)))return e;var u=Mr(e),_=Du(u,Mr(i))+1;return Di(u,0,_).join("")}function jy(e,i,a){if(e=it(e),e&&(a||i===r))return e.replace(St,"");if(!e||!(i=mr(i)))return e;var u=Mr(e),_=Eu(u,Mr(i));return Di(u,_).join("")}function $y(e,i){var a=l,u=d;if(bt(i)){var _="separator"in i?i.separator:_;a="length"in i?Le(i.length):a,u="omission"in i?mr(i.omission):u}e=it(e);var D=e.length;if(un(e)){var T=Mr(e);D=T.length}if(a>=D)return e;var U=a-hn(u);if(U<1)return u;var V=T?Di(T,0,U).join(""):e.slice(0,U);if(_===r)return V+u;if(T&&(U+=V.length-U),ec(_)){if(e.slice(U).search(_)){var ne,ae=V;for(_.global||(_=_o(_.source,it(Ir.exec(_))+"g")),_.lastIndex=0;ne=_.exec(ae);)var ce=ne.index;V=V.slice(0,ce===r?U:ce)}}else if(e.indexOf(mr(_),U)!=U){var fe=V.lastIndexOf(_);fe>-1&&(V=V.slice(0,fe))}return V+u}function Ly(e){return e=it(e),e&&mt.test(e)?e.replace(pi,dp):e}var My=yn(function(e,i,a){return e+(a?" ":"")+i.toUpperCase()}),ic=dh("toUpperCase");function ll(e,i,a){return e=it(e),i=a?r:i,i===r?cp(e)?_p(e):Qd(e):e.match(i)||[]}var fl=Ke(function(e,i){try{return Kt(e,r,i)}catch(a){return Qo(a)?a:new Ae(a)}}),zy=oi(function(e,i){return xr(i,function(a){a=Wr(a),si(e,a,Xo(e[a],e))}),e});function qy(e){var i=e==null?0:e.length,a=we();return e=i?yt(e,function(u){if(typeof u[1]!="function")throw new Pr(m);return[a(u[0]),u[1]]}):[],Ke(function(u){for(var _=-1;++_<i;){var D=e[_];if(Kt(D[0],this,u))return Kt(D[1],this,u)}})}function Hy(e){return dg(Ar(e,q))}function nc(e){return function(){return e}}function By(e,i){return e==null||e!==e?i:e}var Ky=gh(),Vy=gh(!0);function gr(e){return e}function sc(e){return Vu(typeof e=="function"?e:Ar(e,q))}function ky(e){return Gu(Ar(e,q))}function Gy(e,i){return Wu(e,Ar(i,q))}var Wy=Ke(function(e,i){return function(a){return zn(a,e,i)}}),Yy=Ke(function(e,i){return function(a){return zn(e,a,i)}});function ac(e,i,a){var u=Vt(i),_=Js(i,u);a==null&&!(bt(i)&&(_.length||!u.length))&&(a=i,i=e,e=this,_=Js(i,Vt(i)));var D=!(bt(a)&&"chain"in a)||!!a.chain,T=ui(e);return xr(_,function(U){var V=i[U];e[U]=V,T&&(e.prototype[U]=function(){var ne=this.__chain__;if(D||ne){var ae=e(this.__wrapped__),ce=ae.__actions__=fr(this.__actions__);return ce.push({func:V,args:arguments,thisArg:e}),ae.__chain__=ne,ae}return V.apply(e,yi([this.value()],arguments))})}),e}function Jy(){return Xe._===this&&(Xe._=Ep),this}function oc(){}function Xy(e){return e=Le(e),Ke(function(i){return Yu(i,e)})}var Zy=Lo(yt),Qy=Lo(_u),ev=Lo(co);function dl(e){return Vo(e)?uo(Wr(e)):Ag(e)}function tv(e){return function(i){return e==null?r:qi(e,i)}}var rv=yh(),iv=yh(!0);function cc(){return[]}function uc(){return!1}function nv(){return{}}function sv(){return""}function av(){return!0}function ov(e,i){if(e=Le(e),e<1||e>J)return[];var a=te,u=Jt(e,te);i=we(i),e-=te;for(var _=fo(u,i);++a<e;)i(a);return _}function cv(e){return Ne(e)?yt(e,Wr):wr(e)?[e]:fr(Rh(it(e)))}function uv(e){var i=++mp;return it(e)+i}var hv=ra(function(e,i){return e+i},0),lv=Mo("ceil"),fv=ra(function(e,i){return e/i},1),dv=Mo("floor");function pv(e){return e&&e.length?Ys(e,gr,So):r}function gv(e,i){return e&&e.length?Ys(e,we(i,2),So):r}function _v(e){return bu(e,gr)}function yv(e,i){return bu(e,we(i,2))}function vv(e){return e&&e.length?Ys(e,gr,Po):r}function bv(e,i){return e&&e.length?Ys(e,we(i,2),Po):r}var mv=ra(function(e,i){return e*i},1),wv=Mo("round"),Ev=ra(function(e,i){return e-i},0);function Dv(e){return e&&e.length?lo(e,gr):0}function Sv(e,i){return e&&e.length?lo(e,we(i,2)):0}return E.after=k1,E.ary=Kh,E.assign=R_,E.assignIn=nl,E.assignInWith=ga,E.assignWith=F_,E.at=U_,E.before=Vh,E.bind=Xo,E.bindAll=zy,E.bindKey=kh,E.castArray=n_,E.chain=qh,E.chunk=d0,E.compact=p0,E.concat=g0,E.cond=qy,E.conforms=Hy,E.constant=nc,E.countBy=D1,E.create=j_,E.curry=Gh,E.curryRight=Wh,E.debounce=Yh,E.defaults=$_,E.defaultsDeep=L_,E.defer=G1,E.delay=W1,E.difference=_0,E.differenceBy=y0,E.differenceWith=v0,E.drop=b0,E.dropRight=m0,E.dropRightWhile=w0,E.dropWhile=E0,E.fill=D0,E.filter=I1,E.flatMap=P1,E.flatMapDeep=C1,E.flatMapDepth=A1,E.flatten=$h,E.flattenDeep=S0,E.flattenDepth=I0,E.flip=Y1,E.flow=Ky,E.flowRight=Vy,E.fromPairs=O0,E.functions=V_,E.functionsIn=k_,E.groupBy=T1,E.initial=P0,E.intersection=C0,E.intersectionBy=A0,E.intersectionWith=T0,E.invert=W_,E.invertBy=Y_,E.invokeMap=R1,E.iteratee=sc,E.keyBy=F1,E.keys=Vt,E.keysIn=pr,E.map=ua,E.mapKeys=X_,E.mapValues=Z_,E.matches=ky,E.matchesProperty=Gy,E.memoize=la,E.merge=Q_,E.mergeWith=sl,E.method=Wy,E.methodOf=Yy,E.mixin=ac,E.negate=fa,E.nthArg=Xy,E.omit=ey,E.omitBy=ty,E.once=J1,E.orderBy=U1,E.over=Zy,E.overArgs=X1,E.overEvery=Qy,E.overSome=ev,E.partial=Zo,E.partialRight=Jh,E.partition=j1,E.pick=ry,E.pickBy=al,E.property=dl,E.propertyOf=tv,E.pull=U0,E.pullAll=Mh,E.pullAllBy=j0,E.pullAllWith=$0,E.pullAt=L0,E.range=rv,E.rangeRight=iv,E.rearg=Z1,E.reject=M1,E.remove=M0,E.rest=Q1,E.reverse=Yo,E.sampleSize=q1,E.set=ny,E.setWith=sy,E.shuffle=H1,E.slice=z0,E.sortBy=V1,E.sortedUniq=G0,E.sortedUniqBy=W0,E.split=Py,E.spread=e_,E.tail=Y0,E.take=J0,E.takeRight=X0,E.takeRightWhile=Z0,E.takeWhile=Q0,E.tap=p1,E.throttle=t_,E.thru=ca,E.toArray=tl,E.toPairs=ol,E.toPairsIn=cl,E.toPath=cv,E.toPlainObject=il,E.transform=ay,E.unary=r_,E.union=e1,E.unionBy=t1,E.unionWith=r1,E.uniq=i1,E.uniqBy=n1,E.uniqWith=s1,E.unset=oy,E.unzip=Jo,E.unzipWith=zh,E.update=cy,E.updateWith=uy,E.values=mn,E.valuesIn=hy,E.without=a1,E.words=ll,E.wrap=i_,E.xor=o1,E.xorBy=c1,E.xorWith=u1,E.zip=h1,E.zipObject=l1,E.zipObjectDeep=f1,E.zipWith=d1,E.entries=ol,E.entriesIn=cl,E.extend=nl,E.extendWith=ga,ac(E,E),E.add=hv,E.attempt=fl,E.camelCase=py,E.capitalize=ul,E.ceil=lv,E.clamp=ly,E.clone=s_,E.cloneDeep=o_,E.cloneDeepWith=c_,E.cloneWith=a_,E.conformsTo=u_,E.deburr=hl,E.defaultTo=By,E.divide=fv,E.endsWith=gy,E.eq=qr,E.escape=_y,E.escapeRegExp=yy,E.every=S1,E.find=O1,E.findIndex=Uh,E.findKey=M_,E.findLast=x1,E.findLastIndex=jh,E.findLastKey=z_,E.floor=dv,E.forEach=Hh,E.forEachRight=Bh,E.forIn=q_,E.forInRight=H_,E.forOwn=B_,E.forOwnRight=K_,E.get=tc,E.gt=h_,E.gte=l_,E.has=G_,E.hasIn=rc,E.head=Lh,E.identity=gr,E.includes=N1,E.indexOf=x0,E.inRange=fy,E.invoke=J_,E.isArguments=Ki,E.isArray=Ne,E.isArrayBuffer=f_,E.isArrayLike=dr,E.isArrayLikeObject=At,E.isBoolean=d_,E.isBuffer=Si,E.isDate=p_,E.isElement=g_,E.isEmpty=__,E.isEqual=y_,E.isEqualWith=v_,E.isError=Qo,E.isFinite=b_,E.isFunction=ui,E.isInteger=Xh,E.isLength=da,E.isMap=Zh,E.isMatch=m_,E.isMatchWith=w_,E.isNaN=E_,E.isNative=D_,E.isNil=I_,E.isNull=S_,E.isNumber=Qh,E.isObject=bt,E.isObjectLike=Ot,E.isPlainObject=kn,E.isRegExp=ec,E.isSafeInteger=O_,E.isSet=el,E.isString=pa,E.isSymbol=wr,E.isTypedArray=bn,E.isUndefined=x_,E.isWeakMap=P_,E.isWeakSet=C_,E.join=N0,E.kebabCase=vy,E.last=Nr,E.lastIndexOf=R0,E.lowerCase=by,E.lowerFirst=my,E.lt=A_,E.lte=T_,E.max=pv,E.maxBy=gv,E.mean=_v,E.meanBy=yv,E.min=vv,E.minBy=bv,E.stubArray=cc,E.stubFalse=uc,E.stubObject=nv,E.stubString=sv,E.stubTrue=av,E.multiply=mv,E.nth=F0,E.noConflict=Jy,E.noop=oc,E.now=ha,E.pad=wy,E.padEnd=Ey,E.padStart=Dy,E.parseInt=Sy,E.random=dy,E.reduce=$1,E.reduceRight=L1,E.repeat=Iy,E.replace=Oy,E.result=iy,E.round=wv,E.runInContext=K,E.sample=z1,E.size=B1,E.snakeCase=xy,E.some=K1,E.sortedIndex=q0,E.sortedIndexBy=H0,E.sortedIndexOf=B0,E.sortedLastIndex=K0,E.sortedLastIndexBy=V0,E.sortedLastIndexOf=k0,E.startCase=Cy,E.startsWith=Ay,E.subtract=Ev,E.sum=Dv,E.sumBy=Sv,E.template=Ty,E.times=ov,E.toFinite=hi,E.toInteger=Le,E.toLength=rl,E.toLower=Ny,E.toNumber=Rr,E.toSafeInteger=N_,E.toString=it,E.toUpper=Ry,E.trim=Fy,E.trimEnd=Uy,E.trimStart=jy,E.truncate=$y,E.unescape=Ly,E.uniqueId=uv,E.upperCase=My,E.upperFirst=ic,E.each=Hh,E.eachRight=Bh,E.first=Lh,ac(E,function(){var e={};return kr(E,function(i,a){nt.call(E.prototype,a)||(e[a]=i)}),e}(),{chain:!1}),E.VERSION=s,xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){E[e].placeholder=E}),xr(["drop","take"],function(e,i){Ye.prototype[e]=function(a){a=a===r?1:Bt(Le(a),0);var u=this.__filtered__&&!i?new Ye(this):this.clone();return u.__filtered__?u.__takeCount__=Jt(a,u.__takeCount__):u.__views__.push({size:Jt(a,te),type:e+(u.__dir__<0?"Right":"")}),u},Ye.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),xr(["filter","map","takeWhile"],function(e,i){var a=i+1,u=a==b||a==F;Ye.prototype[e]=function(_){var D=this.clone();return D.__iteratees__.push({iteratee:we(_,3),type:a}),D.__filtered__=D.__filtered__||u,D}}),xr(["head","last"],function(e,i){var a="take"+(i?"Right":"");Ye.prototype[e]=function(){return this[a](1).value()[0]}}),xr(["initial","tail"],function(e,i){var a="drop"+(i?"":"Right");Ye.prototype[e]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(gr)},Ye.prototype.find=function(e){return this.filter(e).head()},Ye.prototype.findLast=function(e){return this.reverse().find(e)},Ye.prototype.invokeMap=Ke(function(e,i){return typeof e=="function"?new Ye(this):this.map(function(a){return zn(a,e,i)})}),Ye.prototype.reject=function(e){return this.filter(fa(we(e)))},Ye.prototype.slice=function(e,i){e=Le(e);var a=this;return a.__filtered__&&(e>0||i<0)?new Ye(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),i!==r&&(i=Le(i),a=i<0?a.dropRight(-i):a.take(i-e)),a)},Ye.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ye.prototype.toArray=function(){return this.take(te)},kr(Ye.prototype,function(e,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),u=/^(?:head|last)$/.test(i),_=E[u?"take"+(i=="last"?"Right":""):i],D=u||/^find/.test(i);_&&(E.prototype[i]=function(){var T=this.__wrapped__,U=u?[1]:arguments,V=T instanceof Ye,ne=U[0],ae=V||Ne(T),ce=function(Ge){var Ze=_.apply(E,yi([Ge],U));return u&&fe?Ze[0]:Ze};ae&&a&&typeof ne=="function"&&ne.length!=1&&(V=ae=!1);var fe=this.__chain__,ve=!!this.__actions__.length,Ee=D&&!fe,qe=V&&!ve;if(!D&&ae){T=qe?T:new Ye(this);var De=e.apply(T,U);return De.__actions__.push({func:ca,args:[ce],thisArg:r}),new Cr(De,fe)}return Ee&&qe?e.apply(this,U):(De=this.thru(ce),Ee?u?De.value()[0]:De.value():De)})}),xr(["pop","push","shift","sort","splice","unshift"],function(e){var i=Fs[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);E.prototype[e]=function(){var _=arguments;if(u&&!this.__chain__){var D=this.value();return i.apply(Ne(D)?D:[],_)}return this[a](function(T){return i.apply(Ne(T)?T:[],_)})}}),kr(Ye.prototype,function(e,i){var a=E[i];if(a){var u=a.name+"";nt.call(pn,u)||(pn[u]=[]),pn[u].push({name:i,func:a})}}),pn[ta(r,ue).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=Lp,Ye.prototype.reverse=Mp,Ye.prototype.value=zp,E.prototype.at=g1,E.prototype.chain=_1,E.prototype.commit=y1,E.prototype.next=v1,E.prototype.plant=m1,E.prototype.reverse=w1,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=E1,E.prototype.first=E.prototype.head,Rn&&(E.prototype[Rn]=b1),E},ln=yp();Ct?((Ct.exports=ln)._=ln,ct._=ln):Xe._=ln}).call(ns)})(Bc,Bc.exports);var PD=Object.defineProperty,CD=Object.defineProperties,AD=Object.getOwnPropertyDescriptors,xf=Object.getOwnPropertySymbols,TD=Object.prototype.hasOwnProperty,ND=Object.prototype.propertyIsEnumerable,Pf=(n,t,r)=>t in n?PD(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,ya=(n,t)=>{for(var r in t||(t={}))TD.call(t,r)&&Pf(n,r,t[r]);if(xf)for(var r of xf(t))ND.call(t,r)&&Pf(n,r,t[r]);return n},RD=(n,t)=>CD(n,AD(t));function jr(n,t,r){let s;const o=Kc(n);return t.rpcMap&&(s=t.rpcMap[o]),s||(s=`${xD}?chainId=eip155:${o}&projectId=${r}`),s}function Kc(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function FD(n,t){if(!t.includes(n))throw new Error(`Chain '${n}' not approved. Please use one of the following: ${t.toString()}`)}function UD(n){return n.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function jD(n,t){const r=Object.keys(t.namespaces).filter(o=>o.includes(n));if(!r.length)return[];const s=[];return r.forEach(o=>{const f=t.namespaces[o].accounts;s.push(...f)}),s}function $D(n,t={}){const r=Cf(n),s=Cf(t);return Bc.exports.merge(r,s)}function Cf(n){var t,r,s,o;const f={};if(!In(n))return f;for(const[m,g]of Object.entries(n)){const w=fd(m)?[m]:g.chains,x=g.methods||[],A=g.events||[],q=g.rpcMap||{},W=ma(m);f[W]=RD(ya(ya({},f[W]),g),{chains:gc(w,(t=f[W])==null?void 0:t.chains),methods:gc(x,(r=f[W])==null?void 0:r.methods),events:gc(A,(s=f[W])==null?void 0:s.events),rpcMap:ya(ya({},q),(o=f[W])==null?void 0:o.rpcMap)})}return f}const Gd={},Rt=n=>Gd[n],xc=(n,t)=>{Gd[n]=t};class LD{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||jr(`${this.name}:${t}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jr(t,this.namespace);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}}class MD{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){var r;switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){const s=Kc(t);if(!this.httpProviders[s]){const o=r||jr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const s=r||jr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const o=Kc(r);t[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}handleSwitchChain(t){const r=parseInt(t,16),s=`${this.name}:${r}`;FD(s,this.namespace.chains),this.setDefaultChain(`${r}`)}}class zD{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||jr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}}class qD{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||jr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}}class HD{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||this.getCardanoRPCUrl(t);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);t[r]=this.createHttpProvider(r,s)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||this.getCardanoRPCUrl(t);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}}class BD{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||jr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}}class KD{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=Rt("events"),this.client=Rt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(!this.httpProviders[t]){const s=r||jr(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.chainId=t,this.events.emit(Ai.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||jr(t,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Pi(new Xi(s,Rt("disableProviderPing")))}}var VD=Object.defineProperty,kD=Object.defineProperties,GD=Object.getOwnPropertyDescriptors,Af=Object.getOwnPropertySymbols,WD=Object.prototype.hasOwnProperty,YD=Object.prototype.propertyIsEnumerable,Tf=(n,t,r)=>t in n?VD(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,va=(n,t)=>{for(var r in t||(t={}))WD.call(t,r)&&Tf(n,r,t[r]);if(Af)for(var r of Af(t))YD.call(t,r)&&Tf(n,r,t[r]);return n},Pc=(n,t)=>kD(n,GD(t));class pu{constructor(t){this.events=new Wc,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||If})),this.disableProviderPing=(t==null?void 0:t.disableProviderPing)||!1}static async init(t){const r=new pu(t);return await r.initialize(),r}async request(t,r){const[s,o]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:va({},t),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(t,r,s){this.request(t,s).then(o=>r(null,o)).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Nt("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(f=>{this.session=f}).catch(f=>{if(f.message!==Vd)throw f;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{const[s,o]=this.validateChain(t);this.getProvider(s).setDefaultChain(o,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(di(r)){for(const s of r)t.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await DD.init({logger:this.providerOpts.logger||If,relayUrl:this.providerOpts.relayUrl||SD,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(r=>ma(r)))];xc("client",this.client),xc("events",this.events),xc("disableProviderPing",this.disableProviderPing),t.forEach(r=>{if(!this.session)return;const s=jD(r,this.session),o=UD(s),f=$D(this.namespaces,this.optionalNamespaces),m=Pc(va({},f[r]),{accounts:s,chains:o});switch(r){case"eip155":this.rpcProviders[r]=new MD({namespace:m});break;case"solana":this.rpcProviders[r]=new zD({namespace:m});break;case"cosmos":this.rpcProviders[r]=new qD({namespace:m});break;case"polkadot":this.rpcProviders[r]=new LD({namespace:m});break;case"cip34":this.rpcProviders[r]=new HD({namespace:m});break;case"elrond":this.rpcProviders[r]=new BD({namespace:m});break;case"multiversx":this.rpcProviders[r]=new KD({namespace:m});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:r}=t,{event:s}=r;s.name==="accountsChanged"?this.events.emit("accountsChanged",s.data):s.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var s;const{namespaces:o}=r,f=(s=this.client)==null?void 0:s.session.get(t);this.session=Pc(va({},f),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Pc(va({},Nt("USER_DISCONNECTED")),{data:t.topic}))}),this.on(Ai.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])})}setNamespaces(t){const{namespaces:r,optionalNamespaces:s,sessionProperties:o}=t;if(!r||!Object.keys(r).length)throw new Error("Namespaces must be not empty");this.namespaces=r,this.optionalNamespaces=s,this.sessionProperties=o,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(t){const[r,s]=(t==null?void 0:t.split(":"))||["",""];if(r&&!Object.keys(this.namespaces).map(m=>ma(m)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const o=ma(Object.keys(this.namespaces)[0]),f=this.rpcProviders[o].getDefaultChain();return[o,f]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){var s;const[o,f]=this.validateChain(t);r||this.getProvider(o).setDefaultChain(f),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${f}`]).defaultChain=f,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",f)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${Of}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${Of}/${t}`)}}const JD=pu,XD="wc",ZD="ethereum_provider",QD=`${XD}@2:${ZD}:`,e2="https://rpc.walletconnect.com/v1/",Vc=["eth_sendTransaction","personal_sign"],g2=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],kc=["chainChanged","accountsChanged"],_2=["message","disconnect","connect"];var t2=Object.defineProperty,r2=Object.defineProperties,i2=Object.getOwnPropertyDescriptors,Nf=Object.getOwnPropertySymbols,n2=Object.prototype.hasOwnProperty,s2=Object.prototype.propertyIsEnumerable,Rf=(n,t,r)=>t in n?t2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,Cc=(n,t)=>{for(var r in t||(t={}))n2.call(t,r)&&Rf(n,r,t[r]);if(Nf)for(var r of Nf(t))s2.call(t,r)&&Rf(n,r,t[r]);return n},Ff=(n,t)=>r2(n,i2(t));function Gc(n){return Number(n[0].split(":")[1])}function Ac(n){return`0x${n.toString(16)}`}function a2(n){const{chains:t,optionalChains:r,methods:s,optionalMethods:o,events:f,optionalEvents:m,rpcMap:g}=n;if(!di(t))throw new Error("Invalid chains");const w=t,x=s||Vc,A=f||kc,q={[Gc(w)]:g[Gc(w)]},W={chains:w,methods:x,events:A,rpcMap:q},H=f==null?void 0:f.filter(ue=>!kc.includes(ue)),$=s==null?void 0:s.filter(ue=>!Vc.includes(ue));if(!r&&!m&&!o&&!(H!=null&&H.length)&&!($!=null&&$.length))return{required:W};const X=(H==null?void 0:H.length)&&($==null?void 0:$.length)||!r,ee={chains:[...new Set(X?w.concat(r||[]):r)],methods:[...new Set(x.concat(o||[]))],events:[...new Set(A.concat(m||[]))],rpcMap:g};return{required:W,optional:ee}}class gu{constructor(){this.events=new Qr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=QD,this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const r=new gu;return await r.initialize(t),r}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,r){this.signer.sendAsync(t,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:r,optional:s}=a2(this.rpc);try{const o=await new Promise(async(m,g)=>{var w;this.rpc.showQrModal&&((w=this.modal)==null||w.subscribeModal(x=>{!x.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),g(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Ff(Cc({namespaces:{[this.namespace]:r}},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:t==null?void 0:t.pairingTopic})).then(x=>{m(x)}).catch(x=>{g(new Error(x.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const f=Nm(o.namespaces,[this.namespace]);this.setAccounts(f),this.events.emit("connect",{chainId:Ac(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:r}=t,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",Ac(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",Ff(Cc({},Nt("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:t})),this.events.emit("display_uri",t)})}setHttpProvider(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const r=t.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Ac(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const r=this.parseChainId(t);this.chainId=r,this.setHttpProvider(r)}}parseAccountId(t){const[r,s,o]=t.split(":");return{chainId:`${r}:${s}`,address:o}}setAccounts(t){this.accounts=t.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,s;return{chains:((r=t.chains)==null?void 0:r.map(o=>this.formatChainId(o)))||[`${this.namespace}:1`],optionalChains:t.optionalChains?t.optionalChains.map(o=>this.formatChainId(o)):void 0,methods:(t==null?void 0:t.methods)||Vc,events:(t==null?void 0:t.events)||kc,optionalMethods:(t==null?void 0:t.optionalMethods)||[],optionalEvents:(t==null?void 0:t.optionalEvents)||[],rpcMap:(t==null?void 0:t.rpcMap)||this.buildRpcMap(t.chains.concat(t.optionalChains||[]),t.projectId),showQrModal:!!(t!=null&&t.showQrModal),qrModalOptions:(s=t==null?void 0:t.qrModalOptions)!=null?s:void 0,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){const s={};return t.forEach(o=>{s[o]=this.getRpcUrl(o,r)}),s}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=Gc(this.rpc.chains),this.signer=await JD.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:s}=await Pv(()=>import("./index-c29b7405.js").then(o=>o.a),["assets/index-c29b7405.js","assets/index-e728eeed.js","assets/index-01f7d37e.css","assets/index-cc134824.js"]);r=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(Cc({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:r,optionalChains:s,rpcMap:o}=t;r&&di(r)&&(this.rpc.chains=r.map(f=>this.formatChainId(f)),r.forEach(f=>{this.rpc.rpcMap[f]=(o==null?void 0:o[f])||this.getRpcUrl(f)})),s&&di(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(f=>this.formatChainId(f)),s.forEach(f=>{this.rpc.rpcMap[f]=(o==null?void 0:o[f])||this.getRpcUrl(f)}))}getRpcUrl(t,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[t])||`${e2}?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`);this.setChainIds(t?[this.formatChainId(t)]:this.session.namespaces[this.namespace].accounts),this.setAccounts(this.session.namespaces[this.namespace].accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map(r=>this.parseAccount(r))}}const y2=gu;export{y2 as EthereumProvider,_2 as OPTIONAL_EVENTS,g2 as OPTIONAL_METHODS,kc as REQUIRED_EVENTS,Vc as REQUIRED_METHODS,gu as default};
